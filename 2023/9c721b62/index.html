<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.webp"><link rel="icon" href="/img/favicon.webp"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#2f4154"><meta name="author" content="Oikiou"><meta name="keywords" content=""><meta name="description" content="USB 版本及发展历史USB接口自1994年推出以来，经过26年的发展，经过USB1.0&#x2F;1.1、USB2.0、USB3.x，最终发展到了现在的USB4；传输速率也从最开始的1.5Mbps，大幅提高到了最新的40Gbps。 USB1.0 1996年1月15日推出USB1.0接口规范 规定低速传输速率为1.5Mbit&#x2F;s 对外提供供电电压为5V，最大电流500mA 一般适用于鼠标"><meta property="og:type" content="article"><meta property="og:title" content="USB"><meta property="og:url" content="https://www.oikiou.top/2023/9c721b62/index.html"><meta property="og:site_name" content="Oikiou&#39;s Blog"><meta property="og:description" content="USB 版本及发展历史USB接口自1994年推出以来，经过26年的发展，经过USB1.0&#x2F;1.1、USB2.0、USB3.x，最终发展到了现在的USB4；传输速率也从最开始的1.5Mbps，大幅提高到了最新的40Gbps。 USB1.0 1996年1月15日推出USB1.0接口规范 规定低速传输速率为1.5Mbit&#x2F;s 对外提供供电电压为5V，最大电流500mA 一般适用于鼠标"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.oikiou.top/2023/9c721b62/image-20240621114302408.png"><meta property="og:image" content="https://www.oikiou.top/2023/9c721b62/v2-43379ad330f4acd76ce885f2e1359458_720w.webp"><meta property="og:image" content="https://www.oikiou.top/2023/9c721b62/usbdes.jpeg"><meta property="og:image" content="https://www.oikiou.top/2023/9c721b62/image-20240620151939825.png"><meta property="og:image" content="https://www.oikiou.top/2023/9c721b62/dev.png"><meta property="og:image" content="https://www.oikiou.top/2023/9c721b62/d976ff82852a45ea8fc59183689cbd5b.png"><meta property="article:published_time" content="2023-12-01T10:12:15.000Z"><meta property="article:modified_time" content="2024-08-07T09:08:09.871Z"><meta property="article:author" content="Oikiou"><meta property="article:tag" content="embedded"><meta property="article:tag" content="usb"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://www.oikiou.top/2023/9c721b62/image-20240621114302408.png"><meta name="referrer" content="no-referrer-when-downgrade"><title>USB - Oikiou&#39;s Blog</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/custom.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var dntVal,CONFIG={hostname:"www.oikiou.top",root:"/",version:"1.9.8",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"bash"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"left",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!1,baidu:null,google:"G-TSV6137NWK",tencent:{sid:null,cid:null},leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1},umami:{src:null,website_id:null,domains:null,start_time:"2024-01-01T00:00:00.000Z",token:null,api_server:null},gtag:"G-TSV6137NWK",woyaola:null,cnzz:null},search_path:"/xml/local-search-database.xml",include_content_in_search:!0};CONFIG.web_analytics.follow_dnt&&(dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on")))</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 7.3.0"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>Oikiou&#39;s Blog</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/" target="_self"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/" target="_self"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item"><a class="nav-link" href="/links/" target="_self"><i class="iconfont icon-link-fill"></i> <span>友链</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(https://bing.img.run/1920x1080.php) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="USB"></span></div><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> Oikiou </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2023-12-01 18:12" pubdate>2023年12月1日 晚上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 4.4k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 73 分钟 </span><span id="busuanzi_container_page_pv" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="busuanzi_value_page_pv"></span> 次</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="padding-left:2rem;margin-right:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">USB</h1><p id="updated-time" class="note note-info" style="display:none">本文最后更新于 2024-08-07T17:08:09+08:00</p><div class="markdown-body"><h1 id="USB-版本及发展历史"><a href="#USB-版本及发展历史" class="headerlink" title="USB 版本及发展历史"></a>USB 版本及发展历史</h1><p>USB接口自1994年推出以来，经过26年的发展，经过USB1.0&#x2F;1.1、USB2.0、USB3.x，最终发展到了现在的USB4；传输速率也从最开始的1.5Mbps，大幅提高到了最新的40Gbps。<br><img src="/2023/9c721b62/image-20240621114302408.png" srcset="/img/loading.gif" lazyload></p><h2 id="USB1-0"><a href="#USB1-0" class="headerlink" title="USB1.0"></a>USB1.0</h2><ul><li>1996年1月15日推出USB1.0接口规范</li><li>规定低速传输速率为1.5Mbit&#x2F;s</li><li>对外提供供电电压为5V，最大电流500mA</li><li>一般适用于鼠标、键盘等低速HID设备。</li><li>支持热插拨</li></ul><h2 id="USB1-1"><a href="#USB1-1" class="headerlink" title="USB1.1"></a>USB1.1</h2><ul><li>1998年9月23日对原来的USB1.0进行升级，提出了USB1.1</li><li>USB1.1规定了全速传输速率为12Mbit&#x2F;s,并兼容USB1.0的1.5Mbit&#x2F;s</li><li>传输线缆最大度度3m</li><li>对外提供供电电压为5V，最大电流500mA</li><li>一般适用于鼠标、键盘、U盘，光驱等。</li><li>一个USB接口理论上可以支持127个设备。</li></ul><h2 id="USB2-0"><a href="#USB2-0" class="headerlink" title="USB2.0"></a>USB2.0</h2><ul><li>2000年4月27日由USB-IF组织提出了USB2.0总线协议规范</li><li>具备480Mbit&#x2F;s的高速传输速率，向下兼容低速1.5Mbit&#x2F;s和全速12Mit&#x2F;s</li><li>传输线缆最大度度5m</li><li>对外提供供电电压为5V，最大电流500mA</li><li>通过HUB级联的方式，一个USB接口理论上可以扩展127个USB设备</li><li>支持 4种传输方式：控制传输、中断传输、同步传输和块传输。</li></ul><p><strong>USB3 的名字有些多</strong></p><table><thead><tr><th>版本</th><th>时间</th><th>带宽</th><th>别名，指的是同一种</th></tr></thead><tbody><tr><td>USB3.0</td><td>2008年11月17</td><td>5Gbps</td><td>SuperSpeed USB、USB 3.2 Gen 1、USB 3.1 Gen 1</td></tr><tr><td>USB3.1</td><td>2013年7月</td><td>10Gbps</td><td>SuperSpeed USB 10Gbps、USB 3.2 Gen 2、USB 3.1 Gen 2</td></tr><tr><td>USB3.2</td><td>2017年9月份</td><td>20Gbps</td><td>SuperSpeed USB 20Gbps、USB 3.2 Gen 2x2</td></tr></tbody></table><h2 id="USB3-0-USB-3-2-Gen-1-USB-3-1-Gen-1"><a href="#USB3-0-USB-3-2-Gen-1-USB-3-1-Gen-1" class="headerlink" title="USB3.0 &#x2F; USB 3.2 Gen 1 &#x2F; USB 3.1 Gen 1"></a>USB3.0 &#x2F; USB 3.2 Gen 1 &#x2F; USB 3.1 Gen 1</h2><ul><li>超高速USB3.0规范于2008年11月17日出USB-IF组织推出。</li><li>提供更高的5.0Gbit&#x2F;s的超高速传输速度，并向下兼容低速1.5Mbits&#x2F;s、全速12Mbit&#x2F;s和高速480Mbit&#x2F;s传输速率</li><li>对外提供供电电压为5V，最大电流900mA</li><li>传输线缆最大度度3m</li><li>增加了新的电源管理功能，支持待机、睡眠以及暂定模式，更加省电。</li><li>全双工通讯。</li></ul><h2 id="USB3-1-USB-3-2-Gen-2-USB-3-1-Gen-2"><a href="#USB3-1-USB-3-2-Gen-2-USB-3-1-Gen-2" class="headerlink" title="USB3.1 &#x2F; USB 3.2 Gen 2 &#x2F; USB 3.1 Gen 2"></a>USB3.1 &#x2F; USB 3.2 Gen 2 &#x2F; USB 3.1 Gen 2</h2><p>2013年7月份，USB 3.1发布，速度翻番至10Gbps，同时USB-IF就把USB 3.0改名为USB 3.1 Gen 1，新的USB 3.1则叫做USB 3.1 Gen 2。</p><ul><li>2013年7月份发布</li><li>速度翻番至10Gbps</li><li>新增USB A&#x2F;V影音传输。以更适合作为移动设备的输出接口，尤其是可逆的Type-C。</li><li>将供电的最高允许标准提高到了20V&#x2F;5A，供电100W。</li><li>必须使用USB Type-C接口才能达到10Gbps的速度。</li></ul><h2 id="USB3-2-USB-3-2-Gen-2x2"><a href="#USB3-2-USB-3-2-Gen-2x2" class="headerlink" title="USB3.2 &#x2F; USB 3.2 Gen 2x2"></a>USB3.2 &#x2F; USB 3.2 Gen 2x2</h2><ul><li>2017年9月份，USB 3.2发布。</li><li>据最新公布的规范，USB 3.0、USB 3.1的版本命名都将彻底消失，统一被划入USB 3.2的序列，三者分别再次改名叫做USB 3.2 Gen 1、USB 3.2 Gen 2、USB 3.2 Gen 2x2。</li><li>它们还各自有一个市场推广命名，分别是SuperSpeed USB、SuperSpeed USB 10Gbps、SuperSpeed USB 20Gbps。<br>之所以想出USB 3.2 Gen2x2这样的名字，大概是因为它使用了USB Type-C接口的上下两端全部针脚，速度得以翻番。</li><li>必须使用USB Type-C接口才能达到20Gbps的速度。</li></ul><h1 id="USB-描述符"><a href="#USB-描述符" class="headerlink" title="USB 描述符"></a>USB 描述符</h1><blockquote><p>USB是个通用的总线，端口都是统一的。但是USB设备却各种各样，例如USB鼠标，USB键盘，U盘等等，那么USB主机是如何识别出不同的设备的呢？这就要依赖于描述符了。</p><p>USB的描述符主要有<strong>设备描述符，配置描述符，接口描述符，端点描述符，字符串描述符，HID描述符，报告描述符</strong>等等。</p></blockquote><p><strong>USB各个描述符之间的关系</strong></p><blockquote><p>一个USB设备有一个<strong>设备描述符</strong>，设备描述符里面决定了该设备有<strong>多少种配置</strong>，每种配置描述符对应着配置描述符；</p><p>而在<strong>配置描述符</strong>中又定义了该配置里面有<strong>多少个接口</strong>，每个接口有对应的接口描述符；</p><p>在<strong>接口描述符</strong>里面又定义了该接口有<strong>多少个端点</strong>，每个端点对应一个端点描述符；</p><p>在<strong>端点描述符</strong>定义了端点的大小，类型等等。</p><blockquote><p>由此我们可以看出，USB的描述符之间的关系是一层一层的，最上一层是设备描述符，下面是配置描述符，再下面是接口描述符，再下面是端点描述符。</p><p>在获取描述符时，先获取设备描述符，然后再获取配置描述符，根据配置描述符中的配置集合长度，一次将配置描述符、接口描述符、端点描述符一起一次读回。</p><p>其中可能还会有获取设备序列号，厂商字符串，产品字符串等。</p></blockquote></blockquote><p><strong>各个描述符的编号</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> DEVICE_DESCRIPTOR               0x01  <span class="hljs-comment">//设备描述符   </span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> CONFIGURATION_DESCRIPTOR        0x02  <span class="hljs-comment">//配置描述符   </span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> STRING_DESCRIPTOR               0x03  <span class="hljs-comment">//字符串描述符   </span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INTERFACE_DESCRIPTOR            0x04  <span class="hljs-comment">//接口描述符   </span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ENDPOINT_DESCRIPTOR             0x05  <span class="hljs-comment">//端点描述符  </span></span><br></code></pre></td></tr></table></figure><p><img src="/2023/9c721b62/v2-43379ad330f4acd76ce885f2e1359458_720w.webp" srcset="/img/loading.gif" lazyload alt="img"></p><p><img src="/2023/9c721b62/usbdes.jpeg" srcset="/img/loading.gif" lazyload alt="img"></p><p><img src="/2023/9c721b62/image-20240620151939825.png" srcset="/img/loading.gif" lazyload></p><h2 id="设备描述符-0x01-Device-Descriptor"><a href="#设备描述符-0x01-Device-Descriptor" class="headerlink" title="设备描述符 0x01 Device Descriptor"></a>设备描述符 0x01 Device Descriptor</h2><p><img src="/2023/9c721b62/dev.png" srcset="/img/loading.gif" lazyload alt="设备描述符"></p><p><strong>代码</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// 定义标准的设备描述符结构</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> _<span class="hljs-title">DEVICE_DCESCRIPTOR_STRUCT</span> &#123;</span><br>    BYTE blength;            <span class="hljs-comment">// 设备描述符的字节数大小</span><br>    BYTE bDescriptorType;    <span class="hljs-comment">// 设备描述符类型编号</span><br>    WORD bcdUSB;             <span class="hljs-comment">// USB版本号</span><br>    BYTE bDeviceClass;       <span class="hljs-comment">// USB分配的设备类代码</span><br>    BYTE bDeviceSubClass;    <span class="hljs-comment">// USB分配的子类代码</span><br>    BYTE bDeviceProtocol;    <span class="hljs-comment">// USB分配的设备协议代码</span><br>    BYTE bMaxPacketSize0;    <span class="hljs-comment">// 端点0的最大包大小</span><br>    WORD idVendor;           <span class="hljs-comment">// 厂商编号</span><br>    WORD idProduct;          <span class="hljs-comment">// 产品编号</span><br>    WORD bcdDevice;          <span class="hljs-comment">// 设备出厂编号</span><br>    BYTE iManufacturer;      <span class="hljs-comment">// 设备厂商字符串的索引</span><br>    BYTE iProduct;           <span class="hljs-comment">// 描述产品字符串的索引</span><br>    BYTE iSerialNumber;      <span class="hljs-comment">// 描述设备序列号字符串的索引</span><br>    BYTE bNumConfigurations; <span class="hljs-comment">// 可能的配置数量</span><br>&#125; DEVICE_DESCRIPTOR_STRUCT, *pDEVICE_DESCRIPTOR_STRUCT;<br><br><span class="hljs-comment">// 实际的设备描述符示例</span><br>DEVICE_DESCRIPTOR_STRUCT device_descriptor = &#123;<br>.blength           =<span class="hljs-keyword">sizeof</span>(DEVICE_DESCRIPTOR_STRUCT),<span class="hljs-comment">// 设备描述符的字节数大小，这里是18字节</span><br>.bDescriptorType   =DEVICE_DESCRIPTOR,  <span class="hljs-comment">// 设备描述符类型编号，设备描述符是01</span><br>.bcdUSB            =<span class="hljs-number">0x1001</span>, <span class="hljs-comment">// USB版本号，这里是USB01.10，即USB1.1。由于51是大端模式，所以高低字节交换</span><br>.bDeviceClass      =<span class="hljs-number">0x00</span>,   <span class="hljs-comment">// USB分配的设备类代码，0表示类型在接口描述符中定义</span><br>.bDeviceSubClass   =<span class="hljs-number">0x00</span>,   <span class="hljs-comment">// USB分配的子类代码，上面一项为0时，本项也要设置为0</span><br>.bDeviceProtocol   =<span class="hljs-number">0x00</span>,   <span class="hljs-comment">// USB分配的设备协议代码，上面一项为0时，本项也要设置为0</span><br>.bMaxPacketSize0   =<span class="hljs-number">0x10</span>,   <span class="hljs-comment">// 端点0的最大包大小，这里为16字节</span><br>.idVendor          =<span class="hljs-number">0x7104</span>, <span class="hljs-comment">// 厂商编号，这个是需要跟USB组织申请的ID号，表示厂商代号。</span><br>.idProduct         =<span class="hljs-number">0xf0ff</span>, <span class="hljs-comment">// 该产品的编号，跟厂商编号一起配合使用，让主机注册该设备并加载相应的驱动程序</span><br>.bcdDevice         =<span class="hljs-number">0x0100</span>, <span class="hljs-comment">// 设备出厂编号</span><br>.iManufacturer     =<span class="hljs-number">0x01</span>,   <span class="hljs-comment">// 设备厂商字符串的索引，在获取字符串描述符时，使用该索引号来识别不同的字符串</span><br>.iProduct          =<span class="hljs-number">0x02</span>,   <span class="hljs-comment">// 描述产品字符串的索引，同上</span><br>.iSerialNumber     =<span class="hljs-number">0x03</span>,   <span class="hljs-comment">// 描述设备序列号字符串的索引，同上</span><br>.bNumConfigurations=<span class="hljs-number">0x01</span>    <span class="hljs-comment">// 可能的配置数为1，即该设备只有一个配置</span><br>&#125;;<br></code></pre></td></tr></table></figure><ul><li><p><strong>bLength</strong></p><ul><li>是设备描述符的总长度，以字节为单位。</li></ul></li><li><p><strong>bDescriptorType</strong></p><ul><li>代表了本描述符的类型。</li><li>用于描述设备的描述符 是0x01。<ul><li>其他描述符的数值及含义</li><li><img src="/2023/9c721b62/d976ff82852a45ea8fc59183689cbd5b.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></li></ul></li></ul></li><li><p><strong>bcdUSB</strong></p><ul><li>显示了设备支持的USB版本，通常是最新版本。</li><li>这是一个<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E4%BA%8C%E8%BF%9B%E5%88%B6&spm=1001.2101.3001.7020">二进制</a>代码形式的十进制数据，采用0xAABC的形式，其中A是主版本号，B是次版本号，C是子次版本号。</li><li>例如，USB2.0设备拥有0x0200值，USB1.1设备拥有0x0110值。通常，主机将使用bcdUSB以确定需要加载的USB驱动器。</li></ul></li><li><p><strong>bDeviceClass</strong>、<strong>bDeviceSubClass</strong>、<strong>bDeviceProtocol</strong></p><ul><li>分别代表<strong>设备类型</strong>，<strong>子类型</strong>，<strong>设备使用的协议</strong></li><li>USB-IF区分设备类分了三个等级（类-子类-协议码）其中，<ul><li>类包含人机交互类、图像类、无线类、音频类等等，</li><li>子类比如音频类的音频控制、音频流等等，</li><li>协议比如人机接口类中的鼠标、键盘、<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E8%A7%A6%E6%91%B8%E5%B1%8F&spm=1001.2101.3001.7020">触摸屏</a>等，</li></ul></li><li><blockquote><p>为何会有这么多USB的Class分类，子分类，设备协议。<br>我们要知道，USB协议设计的目的，就是为实现通用，用单一的USB接口取代之前种类繁多的各种其他接口。而为了取代其他各种接口，那意味着就要实现各种设备所对应的各种功能。</p></blockquote></li></ul></li><li><p><strong>bMaxPackeSize0</strong></p><ul><li>端点一次最大传多少个字节。</li><li>根据设备，数据包的大小可以为 8 个字节、 16 个字节、 32 个字节和 64 个字节。</li><li>USB协议里有规定，端点0最低8字节，端点的最大传输大小和USB速度等级以及传输类型有关，<strong>控制传输一般使用端点0</strong>，低速最大8字节，全速和高速最大传输64字节：</li></ul></li><li><p><strong>idVendor</strong></p><ul><li>代表着设备的生产商ID,由USB设备生产商向USB-IF官方来统一管理和申请。</li></ul></li><li><p><strong>idProduct</strong></p><ul><li>代表着该生产商生产的产品编号，同一厂商下的不同idProduct代表着该公司不同的产品系列。</li></ul></li><li><p><strong>bcdDevice</strong></p><ul><li>是一个BCD编码格式，代表着设备的出产编号，或者同一产品的版本更新迭代。</li></ul></li><li><p><strong>iManufacturer</strong></p><ul><li>描述厂商的字符串的索引，为0则表示没有。</li></ul></li><li><p><strong>iProduct</strong></p><ul><li>描述产品的字符串的索引，为0则表示没有。</li></ul></li><li><p><strong>iSerialNumber</strong></p><ul><li>产品序列号字符串的索引，为0则表示没有。</li></ul></li><li><p><strong>bNumConfigurations</strong></p><ul><li>指示设备有多少个配置，前面提到过，一个USB可能有多个配置，一般USB产品都是1个配置。</li></ul></li></ul><h2 id="配置描述符-0x02-Configuration-Descriptor"><a href="#配置描述符-0x02-Configuration-Descriptor" class="headerlink" title="配置描述符 0x02 Configuration Descriptor"></a>配置描述符 0x02 Configuration Descriptor</h2><table><thead><tr><th>偏移</th><th>字段</th><th>大小<br>Byte</th><th>说明</th></tr></thead><tbody><tr><td>0</td><td>bLength</td><td>1</td><td>该描述符的长度 &#x3D; 9 个字节</td></tr><tr><td>1</td><td>bDescriptorType</td><td>1</td><td>描述符类型 &#x3D; 配置（02h）</td></tr><tr><td>2</td><td>wTotalLength</td><td>2</td><td>总长度包括接口和端点描述符在内</td></tr><tr><td>4</td><td>bNumInterfaces</td><td>1</td><td>本配置中接口的数量</td></tr><tr><td>5</td><td>bConfigurationValue</td><td>1</td><td>SET_CONFIGURATION 请求所使用的配置值，用于选择该配置</td></tr><tr><td>6</td><td>iConfiguration</td><td>1</td><td>描述该配置的字符串索引</td></tr><tr><td>7</td><td>bmAttributes</td><td>1</td><td>位 7：预留（设置为 1）<br>位 6：自供电<br>位 5：远程唤醒<br>位 4:0：保留</td></tr><tr><td>8</td><td>bMaxPower</td><td>1</td><td>本配置所需的最大功耗（单位为 2 mA）</td></tr></tbody></table><ul><li><p><strong>bLength</strong> 1字节，表示配置描述符的长度，配置描述符的长度是9字节。</p></li><li><p><strong>bDescriptor</strong> 1字节，表示描述符的类型，配置描述符的类型编码为 0x02。</p></li><li><p><strong>wTotalLength</strong> 2字节，是整个配置描述符集合的总长度。包括配置描述符，接口描述符，端点描述符和类特殊描述符（如果有）。</p></li><li><p><strong>bNumInterfaces</strong> 1字节，则定义了在该指定配置中接口总数。最小为 1 个接口，通常功能单一的设备只有一个接口（如鼠标），而复合设备具有多个接口（如音频设备）。</p></li><li><p><strong>bConfigurationValue</strong> 1字节，表示该配置的值，设置配置请求时会发送一个配置值，如果某个配置的bConfigurationValue和它相匹配，就表示该配置被激活。</p></li><li><p><strong>iConfiguration</strong> 1字节，描述该配置的字符串的索引，如果该值为0，表示没有字符串来描述它。</p></li><li><p><strong>bmAttributes</strong> 1字节，定义了 USB 设备的一些特性。 位7保留，必须设置为1，位6表示供电方式，设置为 0表示设备由总线供电，设置为 1 表示设备自供电。位5表示是否支持远程唤醒，设置为 1表示支持远程唤醒，设置为 0 表示不支持远程唤醒。位4~位0设置为0。</p></li><li><p><strong>bMaxPower</strong> 1字节，表示设备需要从总线获取的最大电流量，以 2 mA 为单位。如需要200mA的最大电流，则该字段的值为100。</p></li></ul><h2 id="字符串描述符-0x03"><a href="#字符串描述符-0x03" class="headerlink" title="字符串描述符 0x03"></a>字符串描述符 0x03</h2><table><thead><tr><th>偏移</th><th>字段</th><th>大小（字节）</th><th>说明</th></tr></thead><tbody><tr><td>0</td><td>bLength</td><td>1</td><td>该描述符的长度 &#x3D; 7 个字节</td></tr><tr><td>1</td><td>bDescriptorType</td><td>1</td><td>描述符类型 &#x3D; STRING （03h）</td></tr><tr><td>2..n</td><td>bString 或 wLangID</td><td>变化</td><td>Unicode 编码字符串 或 LANGID 代码</td></tr></tbody></table><p>字符串描述符是可选的，字符串描述符用于描述一些方便人们阅读的信息，比如制造商、设备名称啥的。如果一个设备没有字符串描述符，那么其他描述符中和字符串有关的索引值都必须为 0。</p><h2 id="接口描述符-0x04-Interface-Descriptor"><a href="#接口描述符-0x04-Interface-Descriptor" class="headerlink" title="接口描述符 0x04 Interface Descriptor"></a>接口描述符 0x04 Interface Descriptor</h2><table><thead><tr><th>偏移</th><th>字段</th><th>大小（字节）</th><th>说明</th></tr></thead><tbody><tr><td>0</td><td>bLength</td><td>1</td><td>该描述符的长度 &#x3D; 9 个字节</td></tr><tr><td>1</td><td>bDescriptorType</td><td>1</td><td>描述符类型 &#x3D; 接口（04h）</td></tr><tr><td>2</td><td>bInterfaceNumber</td><td>1</td><td>该接口基于零的索引</td></tr><tr><td>3</td><td>bAlternateSetting</td><td>1</td><td>备用设置值</td></tr><tr><td>4</td><td>bNumEndpoints</td><td>1</td><td>该接口所使用的端点数量（不包含 EP0）</td></tr><tr><td>5</td><td>bInterfaceClass</td><td>1</td><td>接口类别</td></tr><tr><td>6</td><td>bInterfaceSubclass</td><td>1</td><td>接口子类别</td></tr><tr><td>7</td><td>bInterfaceProtocol</td><td>1</td><td>接口协议</td></tr><tr><td>8</td><td>iInterface</td><td>1</td><td>该接口字符串描述符索引</td></tr></tbody></table><ul><li><strong>bLength</strong> 1字节，表示接口描述符的长度，标准的接口描述符的长度为9字节。</li><li><strong>bDescriptorType</strong> 1字节，表示描述符的类型，接口描述符的类型编码为 0x04。</li><li><strong>bInterfaceNumber</strong> 1字节，表示该接口的编号，如果一个配置具有多个接口，每个接口的编号都不相同，从0开始依次递增对一个配置的接口进行编号。</li><li><strong>bAlternateSetting</strong> 1字节，接口的备用编号，很少用到，设置为0。</li><li><strong>bNumEndpoints</strong> 1字节，表示该接口的端点数（不包括0端点）。</li><li><strong>bInterfaceClass、bInterfaceSubClass、bInterfaceProtocol</strong> 均为1字节，分别表示接口所使用的类，子类以及协议，由USB协会规定。</li><li><strong>iInterface</strong> 1字节，描述该接口的字符串的索引值，如果为0，表示没有字符串。</li></ul><p><strong>bInterfaceClass</strong>、<strong>bDeviceClass</strong>：</p><table><thead><tr><th>Base Class</th><th>Descriptor Usage</th><th>Description</th></tr></thead><tbody><tr><td>00h</td><td>Device</td><td>Use class information in the Interface Descriptors</td></tr><tr><td>01h</td><td>Interface</td><td>Audio USB音频，参见UAC规范</td></tr><tr><td>02h</td><td>Both</td><td>Communications and <a target="_blank" rel="noopener" href="https://www.usbzh.com/article/detail-842.html">CDC</a> Control 网卡、调制解调器、串列端口</td></tr><tr><td>03h</td><td>Interface</td><td><a target="_blank" rel="noopener" href="https://www.usbzh.com/article/detail-76.html">HID</a> (Human Interface Device)，键盘、鼠标 参见<a target="_blank" rel="noopener" href="https://www.usbzh.com/article/detail-76.html">HID</a>规范</td></tr><tr><td>05h</td><td>Interface</td><td>Physical 控制杆</td></tr><tr><td>06h</td><td>Interface</td><td>Image 影像扫描仪、Picture Transfer Protocol</td></tr><tr><td>07h</td><td>Interface</td><td>Printer 打印机</td></tr><tr><td>08h</td><td>Interface</td><td>Mass Storage U盘、移动硬盘、存储卡读卡器、数字相机</td></tr><tr><td>09h</td><td>Device</td><td>Hub <a target="_blank" rel="noopener" href="https://www.usbzh.com/article/detail-25.html">集线器</a></td></tr><tr><td>0Ah</td><td>Interface</td><td><a target="_blank" rel="noopener" href="https://www.usbzh.com/article/detail-842.html">CDC</a>-Data 调制解调器、网络卡、ISDN、传真</td></tr><tr><td>0Bh</td><td>Interface</td><td>Smart Card 读卡器</td></tr><tr><td>0Dh</td><td>Interface</td><td>Content Security</td></tr><tr><td>0Eh</td><td>Interface</td><td>Video USB视频，<a target="_blank" rel="noopener" href="https://www.usbzh.com/article/detail-80.html">UVC</a>摄像头，参见<a target="_blank" rel="noopener" href="https://www.usbzh.com/article/detail-80.html">UVC</a>规范</td></tr><tr><td>0Fh</td><td>Interface</td><td>Personal Healthcare</td></tr><tr><td>10h</td><td>Interface</td><td>Audio&#x2F;Video Devices</td></tr><tr><td>11h</td><td>Device</td><td>Billboard Device Class</td></tr><tr><td>12h</td><td>Interface</td><td>USB Type-C Bridge Class</td></tr><tr><td>DCh</td><td>Both</td><td>Diagnostic Device</td></tr><tr><td>E0h</td><td>Interface</td><td>Wireless Controller 蓝牙</td></tr><tr><td>EFh</td><td>Both</td><td>Miscellaneous</td></tr><tr><td>FEh</td><td>Interface</td><td>Application Specific 红外线资料桥接器</td></tr><tr><td>FFh</td><td>Both</td><td>Vendor Specific 自定义USB设备</td></tr><tr><td>更多信息参考 <a target="_blank" rel="noopener" href="https://www.usb.org/defined-class-codes">USB.org</a> 的部分章节</td><td></td><td></td></tr></tbody></table><h2 id="端点描述符-0x05-Endpoint-Descriptor"><a href="#端点描述符-0x05-Endpoint-Descriptor" class="headerlink" title="端点描述符 0x05 Endpoint Descriptor"></a>端点描述符 0x05 Endpoint Descriptor</h2><table><thead><tr><th>偏移</th><th>字段</th><th>大小<br>Byte</th><th>说明</th></tr></thead><tbody><tr><td>0</td><td>bLength</td><td>1</td><td>该描述符长度 &#x3D; 7 个字节</td></tr><tr><td>1</td><td>bDescriptorType</td><td>1</td><td>描述符类型 &#x3D; 端点（05h）</td></tr><tr><td>2</td><td>bEndpointAddress</td><td>1</td><td><strong>位 3…0</strong>：端点数量<br><strong>位 6…4</strong>：预留，复位为零<br><strong>位 7</strong>：端点的方向。控制端点可以忽略该位。<br>0 &#x3D; OUT 端点 (主机到设备)<br>1 &#x3D; IN 端点 (设备到主机)</td></tr><tr><td>3</td><td>bmAttributes</td><td>1</td><td><strong>位 1…0</strong>：传输类型<br>00 &#x3D; 控制传输<br>01 &#x3D; 同步传输<br>10 &#x3D; 批量传输<br>11 &#x3D; 中断传输<br>如果该端点不是同步端点，那么位 5 到位 2 将被预留，必须将这些位设置为零。如果该端点是同步的，这些位将按如下内容定义：<br><strong>位 3…2</strong>：同步类型<br>00 &#x3D; 无同步<br>01 &#x3D; 异步<br>10 &#x3D; 自适应<br>11 &#x3D; 同步<br><strong>位 5…4</strong>：用途类型<br>00 &#x3D; 数据端点<br>01 &#x3D; 反馈端点<br>10 &#x3D; 隐式反馈数据端点<br>数值 11 表示保留</td></tr><tr><td>4</td><td>wMaxPacketSize</td><td>1</td><td>该端点的数据包最大尺寸</td></tr><tr><td>6</td><td>bInterval</td><td>1</td><td>中断端点的轮询间隔，单位为 ms（对于同步端点，该间隔为 1 ms；控制或批量端点可能忽略该字段）</td></tr></tbody></table><ul><li><strong>bLength</strong> 1字节，表示端点描述符的长度，标准的端点描述符的长度为7字节。</li><li><strong>bDescriptorType</strong> 1字节，表示描述符的类型，端点描述符的类型编码为 0x05。</li><li><strong>bEndpointAddress</strong> 1字节，表示该端点的地址和方向。</li><li><strong>bmAttributes</strong> 1字节，表示该端点的属性，详细看上表。<ul><li><strong>Transfer Type</strong><ul><li><strong>控制CONTROL</strong> 控制端点被用来控制对 USB 设备的不同部分访问。<em>通常用作配置设备、获取设备信息、发送命令到设备或获取设备状态报告</em>。这些端点通常较小。<em>每个 USB 设备都有一个控制端点称为”端点 0”, 被 USB 核心用来在插入时配置设备</em>。USB协议保证总有足够的带宽留给控制端点传送数据到设备.</li><li><strong>中断INTERRUPT</strong>每当 USB 主机向设备请求数据时，中断端点以固定的速率传送<em>小量的数据</em>。此为USB 键盘和鼠标的主要的数据传送方法。它还用以传送数据到 USB 设备来控制设备。<em>通常不用来传送大量数据</em>。USB协议保证总有足够的带宽留给中断端点传送数据到设备.</li><li><strong>批量BULK</strong> 批量端点用以传送大量数据。这些端点常比中断端点大得多. 它们普遍用于<em>不能有任何数据丢失的数据</em>。USB 协议<em>不保证传输在特定时间范围内完成</em>。如果总线上没有足够的空间来发送整个BULK包，它被分为多个包进行传输。这些端点普遍用于打印机、USB Mass Storage和USB网络设备上。</li><li><strong>等时ISOCHRONOUS</strong> 等时端点也批量传送大量数据, 但是这个数据<em>不被保证能送达</em>。这些端点用在可以处理数据丢失的设备中，并且更多依赖于保持持续的数据流。如音频和视频设备等等。</li><li>对比总结：<em>控制</em>和<em>批量</em>端点用于异步数据传送，而<em>中断</em>和<em>同步</em>端点是周期性的。这意味着这些端点被设置来在固定的时间连续传送数据，USB 核心为它们保留了相应的带宽。</li></ul></li></ul></li><li><strong>wMaxPacketSize</strong> 2字节，表示该端点的数据包最大长度。</li><li><strong>bInterval</strong> 1字节</li></ul><p>每个端点描述符都规定了该端点所支持的最大数据包长 (wMaxPacketSize)，主机每次发送数据包，都不能超过端点的最大包长，各种端点的最大包长如下表：</p><table><thead><tr><th>端点类型</th><th>最大包长 (低速)</th><th>最大包长 (全速)</th><th>最大包长 (高)</th></tr></thead><tbody><tr><td>控制端点</td><td>8</td><td>8&#x2F;16&#x2F;32&#x2F;64</td><td>64</td></tr><tr><td>实时端点</td><td>不支持</td><td>1023</td><td>1024</td></tr><tr><td>中断端点</td><td>8</td><td>64</td><td>1024</td></tr><tr><td>批量端点</td><td>不支持</td><td>8&#x2F;16&#x2F;32&#x2F;64</td><td>512</td></tr></tbody></table><h1 id="HID"><a href="#HID" class="headerlink" title="HID"></a>HID</h1><h1 id="UVC"><a href="#UVC" class="headerlink" title="UVC"></a>UVC</h1><blockquote><p>UVC，全称为：USB video(device) class,是微软与另外几家设备厂商联合推出的为USB视频捕获设备定义的协议标准，目前已成为USB org标准之一。</p></blockquote></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/embedded/" class="category-chain-item">embedded</a> <span>></span> <a href="/categories/embedded/blog/" class="category-chain-item">blog</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/embedded/" class="print-no-link">#embedded</a> <a href="/tags/usb/" class="print-no-link">#usb</a></div></div><div class="license-box my-3"><div class="license-title"><div>USB</div><div>https://www.oikiou.top/2023/9c721b62/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Oikiou</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2023年12月1日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-cc-by"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="NC - 非商业性使用"><i class="iconfont icon-cc-nc"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="SA - 相同方式共享"><i class="iconfont icon-cc-sa"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2023/c98db97a/" title="RustDesk"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">RustDesk</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2023/6dfa9920/" title="OrangePi"><span class="hidden-mobile">OrangePi</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="twikoo"></div><script type="text/javascript">Fluid.utils.loadComments("#comments",function(){Fluid.utils.createScript("https://lib.baomitu.com/twikoo/1.6.10/twikoo.all.min.js",function(){var o=Object.assign({envId:"https://twikoo.oikiou.top/",region:"ap-shanghai",path:"window.location.pathname"},{el:"#twikoo",path:"window.location.pathname",onCommentLoaded:function(){Fluid.utils.listenDOMLoaded(function(){var o="#twikoo .tk-content img:not(.tk-owo-emotion)";Fluid.plugins.imageCaption(o),Fluid.plugins.fancyBox(o)})}});twikoo.init(o)})})</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar category-bar" style="margin-left:-1rem"><div class="category-list"><div class="category row nomargin-x"><a class="category-item list-group-item category-item-action col-10 col-md-11 col-xm-11" title="embedded" id="heading-605abe26d014c72e3df9deb267e73756" role="tab" data-toggle="collapse" href="#collapse-605abe26d014c72e3df9deb267e73756" aria-expanded="true">embedded <span class="list-group-count">(4)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse show" id="collapse-605abe26d014c72e3df9deb267e73756" role="tabpanel" aria-labelledby="heading-605abe26d014c72e3df9deb267e73756"><div class="category-post-list"><a href="/2018/ef667962/" title="嵌入式编程杂乱笔记" class="list-group-item list-group-item-action"><span class="category-post">嵌入式编程杂乱笔记</span> </a><a href="/2024/9bf1668d/" title="一些优秀的开源项目" class="list-group-item list-group-item-action"><span class="category-post">一些优秀的开源项目</span></a></div><div class="category-sub row nomargin-x"><a class="category-subitem list-group-item category-item-action col-10 col-md-11 col-xm-11" title="blog" id="heading-126ac9f6149081eb0e97c2e939eaad52" role="tab" data-toggle="collapse" href="#collapse-126ac9f6149081eb0e97c2e939eaad52" aria-expanded="true">blog <span class="list-group-count">(2)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse show" id="collapse-126ac9f6149081eb0e97c2e939eaad52" role="tabpanel" aria-labelledby="heading-126ac9f6149081eb0e97c2e939eaad52"><div class="category-post-list"><a href="/2023/9c721b62/" title="USB" class="list-group-item list-group-item-action active"><span class="category-post">USB</span> </a><a href="/2025/87426b16/" title="ESP32 Develop" class="list-group-item list-group-item-action"><span class="category-post">ESP32 Develop</span></a></div></div></div></div></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><span>如果你有任何反馈请联系oikiou@outlook.com</span></div><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">总访问量 <span id="busuanzi_value_site_pv"></span> 次 </span><span id="busuanzi_container_site_uv" style="display:none">总访客数 <span id="busuanzi_value_site_uv"></span> 人</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t){var e=Fluid.plugins.typing,i=t.getElementById("subtitle");i&&e&&e(i.getAttribute("data-typed-text"))}((window,document))</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",function(){var t,o=jQuery("#toc");0!==o.length&&window.tocbot&&(t=jQuery("#board-ctn").offset().top,window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-t},CONFIG.toc)),0<o.find(".toc-list-item").length&&o.css("visibility","visible"),Fluid.events.registerRefreshCallback(function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;0<t.find(".toc-list-item").length&&t.css("visibility","visible")}}))})</script><script>var relativeDate=function(){var t,e,i,n,m=document.getElementById("updated-time");m&&(e=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:Z|[+-]\d{2}:\d{2})/,(i=(t=m.textContent).match(e))&&(n=moment(i[0]).fromNow(),m.textContent=t.replace(e,n)),m.style.display="")};Fluid.utils.createScript("https://lib.baomitu.com/moment.js/2.29.4/moment.min.js",function(){"zh-cn".startsWith("en")?relativeDate():Fluid.utils.createScript("https://lib.baomitu.com/moment.js/2.29.4/locale/zh-cn.min.js",function(){relativeDate()})})</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",function(){Fluid.plugins.fancyBox()})</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/custom.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>