{
    "version": "https://jsonfeed.org/version/1",
    "title": "Oikiou's Blog • All posts by \"rustdesk\" tag",
    "description": "Blog",
    "home_page_url": "https://www.oikiou.top",
    "items": [
        {
            "id": "https://www.oikiou.top/2023/c98db97a/",
            "url": "https://www.oikiou.top/2023/c98db97a/",
            "title": "RustDesk",
            "date_published": "2023-12-16T10:23:05.000Z",
            "content_html": "<h1 id=\"Server-搭建\"><a href=\"#Server-搭建\" class=\"headerlink\" title=\"Server 搭建\"></a>Server 搭建</h1><p>RustDesk Server OSS<strong>功能简单</strong>，<strong>无需许可证</strong>，RustDesk Server Pro<strong>功能更强</strong>，<strong>需要许可证</strong>。</p>\n<p>参考官方<a href=\"https://rustdesk.com/docs/en/self-host/rustdesk-server-oss/\">文档</a>。</p>\n<h2 id=\"RustDesk-Server-OSS-搭建\"><a href=\"#RustDesk-Server-OSS-搭建\" class=\"headerlink\" title=\"RustDesk Server OSS 搭建\"></a>RustDesk Server OSS 搭建</h2><p>RustDesk Server OSS有两个程序<code>hbbs</code>和<code>hbbr</code>。</p>\n<ul>\n<li><code>hbbs</code>- RustDesk ID&#x2F;Rendezvous 服务器</li>\n<li><code>hbbr</code>- RustDesk 中继服务器</li>\n</ul>\n<blockquote>\n<p>  默认情况下，</p>\n<p>  <code>hbbs</code> 侦听 21115 (TCP)、21116 (TCP&#x2F;UDP) 和 21118 (TCP)，</p>\n<p>  <code>hbbr</code> 侦听 21117 (TCP) 、21119（TCP）。</p>\n<p>  请务必在防火墙中打开这些端口。 <strong>请注意，TCP 和 UDP 都应启用 21116。</strong> </p>\n<p>  21115 用于 NAT 类型测试，21116&#x2F;UDP 用于 ID 注册，心跳服务，21116&#x2F;TCP用于TCP打洞和连接服务，21117用于Relay服务，21118和21119用于支持Web客户端。 </p>\n<p>  <em>如果不需要Web客户端（21118、21119）支持，可以禁用相应端口。</em></p>\n</blockquote>\n<ul>\n<li>TCP (<strong>21115、21116、21117、21118、21119</strong>)</li>\n<li>UDP (<strong>21116</strong>)</li>\n</ul>\n<p>关闭防火墙对端口的封锁：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">ufw allow 21115:21119/tcp<br>ufw allow 21116/udp<br>sudo ufw enable<br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"服务器硬件要求\"><a href=\"#服务器硬件要求\" class=\"headerlink\" title=\"服务器硬件要求\"></a>服务器硬件要求</h3><blockquote>\n<h5 id=\"服务器要求\"><a href=\"#服务器要求\" class=\"headerlink\" title=\"服务器要求\"></a>服务器要求</h5><p>  硬件要求很低；基础云服务器最低配置就够了，对CPU和内存的要求也很低。您还可以使用 Raspberry Pi 或类似的东西。从网络规模来看，如果TCP打洞直连失败，会消耗中继流量。中继连接的流量在 30 K&#x2F;s 到 3 M&#x2F;s（1920x1080 屏幕）之间，具体取决于分辨率设置和屏幕更新。如果只是办公需求，流量在100K&#x2F;s左右。</p>\n</blockquote>\n<h3 id=\"hbbr-的运行\"><a href=\"#hbbr-的运行\" class=\"headerlink\" title=\"hbbr 的运行\"></a>hbbr 的运行</h3><blockquote>\n<p>  <code>hbbs</code>第一次运行时，会自动生成一对加密的私钥和<strong>公钥</strong>（分别位于<code>id_ed25519</code>和<code>id_ed25519.pub</code>运行目录下的文件），其主要目的是通信加密。</p>\n<p>  <strong>公钥就是我们需要填入Client端的key</strong></p>\n<p>  如果您想禁止没有密钥的用户建立非加密连接，请在运行时添加<code>-k _</code>参数<code>hbbs</code>和<code>hbbr</code>。</p>\n<p>  <em>注意不要漏写了下划线</em> 例如：</p>\n  <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">./hbbs -r &lt;relay-server-ip[:port]&gt; -k _<br>./hbbr -k _<br></code></pre></td></tr></table></figure>\n</blockquote>\n<h3 id=\"使用Docker搭建\"><a href=\"#使用Docker搭建\" class=\"headerlink\" title=\"使用Docker搭建\"></a>使用Docker搭建</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">sudo docker image pull rustdesk/rustdesk-server<br><span class=\"hljs-meta prompt_\"></span><br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">-v 映射文件夹 容器内 /root 目录会存放key文件等</span><br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">hbbs 的 -r 参数是 服务器地址</span><br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">hbbs 和 hbbr 的 -k 参数是 禁止没有密钥的用户建立非加密连接</span><br>sudo docker run --name hbbs -v ./data:/root -td -m 64M --restart=on-failure --net=host rustdesk/rustdesk-server hbbs -r &lt;relay-server-ip[:port]&gt; -k _<br><span class=\"hljs-meta prompt_\"></span><br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\"></span><br><span class=\"language-bash\"><span class=\"hljs-built_in\">sudo</span> docker run --name hbbr -v ./data:/root -td -m 64M --restart=on-failure --net=host rustdesk/rustdesk-server hbbr -k _</span><br><br></code></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"客户端配置\"><a href=\"#客户端配置\" class=\"headerlink\" title=\"客户端配置\"></a>客户端配置</h1><p>在 RustDesk 客户端主主页中，单击 ID 旁边的菜单按钮 [ ⋮ ]，然后单击网络，您现在可以使用提升的权限解锁设置并设置您的 ID、中继、API 和密钥。</p>\n<p><img src=\"/2023/c98db97a/network-config.png\" alt=\"img\"></p>\n<p>在<strong>ID Server</strong>输入框中输入<code>hbbs</code>的域名或IP地址。</p>\n<p>另外两个地址可以留空，RustDesk会自动推导（如果没有专门设置），Relay Server指的是<code>hbbr</code>（端口21117）。</p>\n<p>Key的数值：Docker中可以在<code>data</code>文件夹找到<code>id_ed25519.pub</code>文件，此文件内容即为key。</p>\n",
            "tags": [
                "RustDesk"
            ]
        }
    ]
}