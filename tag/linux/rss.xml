<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>Oikiou&#39;s Blog • Posts by &#34;linux&#34; tag</title>
        <link>https://www.oikiou.top</link>
        <description>Blog</description>
        <language>zh-CN</language>
        <pubDate>Mon, 12 Dec 2022 22:57:15 +0800</pubDate>
        <lastBuildDate>Mon, 12 Dec 2022 22:57:15 +0800</lastBuildDate>
        <category>embedded</category>
        <category>note</category>
        <category>micropython</category>
        <category>python</category>
        <category>ms-dos</category>
        <category>windows</category>
        <category>c</category>
        <category>c/c++</category>
        <category>pid</category>
        <category>qt</category>
        <category>pyqt</category>
        <category>c++</category>
        <category>数据结构</category>
        <category>堆栈</category>
        <category>队列</category>
        <category>链表</category>
        <category>树</category>
        <category>二叉树</category>
        <category>正则表达式</category>
        <category>hp</category>
        <category>chrome</category>
        <category>cc2530</category>
        <category>zigbee</category>
        <category>sscanf</category>
        <category>hex</category>
        <category>jpeg</category>
        <category>webp</category>
        <category>jpeg2000</category>
        <category>image</category>
        <category>osi</category>
        <category>markdown</category>
        <category>md5</category>
        <category>tags</category>
        <category>label</category>
        <category>category</category>
        <category>typora</category>
        <category>iap</category>
        <category>bootloader</category>
        <category>stm32</category>
        <category>usart</category>
        <category>rts</category>
        <category>cts</category>
        <category>dtr</category>
        <category>dsr</category>
        <category>ws2812</category>
        <category>spi</category>
        <category>dma</category>
        <category>makefile</category>
        <category>xip</category>
        <category>nor</category>
        <category>nand</category>
        <category>ip</category>
        <category>location</category>
        <category>api</category>
        <category>机智云</category>
        <category>android</category>
        <category>mtp</category>
        <category>pc</category>
        <category>driver</category>
        <category>kms</category>
        <category>office</category>
        <category>volume</category>
        <category>DS_Store</category>
        <category>rtf</category>
        <category>后缀</category>
        <category>character encoding</category>
        <category>gb2312</category>
        <category>utf-8</category>
        <category>蓝桥杯</category>
        <category>国赛</category>
        <category>ct117e</category>
        <category>超声波</category>
        <category>zsh</category>
        <category>shell</category>
        <category>linux</category>
        <category>ssl</category>
        <category>https</category>
        <category>ct117e-ex</category>
        <category>zip</category>
        <category>gzip</category>
        <category>bzip</category>
        <category>tar</category>
        <category>life</category>
        <category>workflow</category>
        <category>人生</category>
        <category>github</category>
        <category>hosts</category>
        <category>cad</category>
        <category>心理学</category>
        <category>cat_drive</category>
        <category>hardware</category>
        <category>lenovo</category>
        <category>disk</category>
        <category>switch</category>
        <category>nintendo</category>
        <category>game</category>
        <category>software</category>
        <category>synology</category>
        <category>dslogic</category>
        <category>逻辑分析仪</category>
        <category>pyhton</category>
        <category>decoder</category>
        <category>docker</category>
        <category>dockerfile</category>
        <category>namespace</category>
        <category>cgroup</category>
        <category>dockerhub</category>
        <category>摄影</category>
        <category>git</category>
        <category>j-link</category>
        <category>rtt</category>
        <category>serial</category>
        <category>debug</category>
        <category>jlink</category>
        <category>ps</category>
        <category>powershell</category>
        <category>rdpwrap</category>
        <category>rdp</category>
        <category>sourceinsigh</category>
        <category>si</category>
        <category>ide</category>
        <category>spacedesk</category>
        <category>投屏</category>
        <category>vscode</category>
        <category>flash</category>
        <category>j-tag</category>
        <category>commenttranslate</category>
        <category>wsl</category>
        <category>wordpress</category>
        <category>web</category>
        <category>mysql</category>
        <category>nginx</category>
        <category>tmux</category>
        <category>unit</category>
        <category>m</category>
        <category>cm</category>
        <category>mm</category>
        <category>s</category>
        <category>us</category>
        <category>cortex-a7</category>
        <category>hexo</category>
        <category>jekyll</category>
        <category>fluid</category>
        <category>cusdis</category>
        <category>twikoo</category>
        <category>blog</category>
        <category>gravatar</category>
        <category>cravatar</category>
        <category>cortex-m3</category>
        <category>alpha_mini</category>
        <category>正点原子</category>
        <category>rtx</category>
        <category>rtos</category>
        <category>keil</category>
        <category>bluetooth</category>
        <category>蓝牙</category>
        <category>modbus</category>
        <category>ucos</category>
        <category>raspberry</category>
        <category>wiringpi</category>
        <category>pwm</category>
        <category>rt-thread</category>
        <category>ap</category>
        <category>wifi</category>
        <item>
            <guid isPermalink="true">https://www.oikiou.top/2022/d911b12b/</guid>
            <title>Zsh</title>
            <link>https://www.oikiou.top/2022/d911b12b/</link>
            <category>zsh</category>
            <category>shell</category>
            <category>linux</category>
            <pubDate>Mon, 12 Dec 2022 22:57:15 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;Powerlevel10k&#34;&gt;&lt;a href=&#34;#Powerlevel10k&#34; class=&#34;headerlink&#34; title=&#34;Powerlevel10k&#34;&gt;&lt;/a&gt;Powerlevel10k&lt;/h1&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/romkatv/powerlevel10k&#34;&gt;https://github.com/romkatv/powerlevel10k&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Download these four ttf files:&lt;ul&gt;
&lt;li&gt;[MesloLGS NF Regular.ttf](&lt;a href=&#34;https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS&#34;&gt;https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS&lt;/a&gt; NF Regular.ttf)&lt;/li&gt;
&lt;li&gt;[MesloLGS NF Bold.ttf](&lt;a href=&#34;https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS&#34;&gt;https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS&lt;/a&gt; NF Bold.ttf)&lt;/li&gt;
&lt;li&gt;[MesloLGS NF Italic.ttf](&lt;a href=&#34;https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS&#34;&gt;https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS&lt;/a&gt; NF Italic.ttf)&lt;/li&gt;
&lt;li&gt;[MesloLGS NF Bold Italic.ttf](&lt;a href=&#34;https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS&#34;&gt;https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS&lt;/a&gt; NF Bold Italic.ttf)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Double-click on each file and click “Install”. This will make &lt;code&gt;MesloLGS NF&lt;/code&gt; font available to all applications on your system.&lt;/li&gt;
&lt;/ul&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://www.oikiou.top/2022/9d389561/</guid>
            <title>Tmux 终端复用器(Terminal Multiplexer)</title>
            <link>https://www.oikiou.top/2022/9d389561/</link>
            <category>linux</category>
            <category>tmux</category>
            <pubDate>Thu, 29 Sep 2022 23:57:15 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;tmux-终端复用器-terminal-multiplexer&#34;&gt;&lt;a href=&#34;#tmux-终端复用器-terminal-multiplexer&#34; class=&#34;headerlink&#34; title=&#34;tmux 终端复用器(terminal multiplexer)&#34;&gt;&lt;/a&gt;tmux 终端复用器(terminal multiplexer)&lt;/h1&gt;&lt;p&gt;☆为重要内容&lt;/p&gt;
&lt;h1 id=&#34;Tmux-简介&#34;&gt;&lt;a href=&#34;#Tmux-简介&#34; class=&#34;headerlink&#34; title=&#34;Tmux 简介&#34;&gt;&lt;/a&gt;Tmux 简介&lt;/h1&gt;&lt;p&gt;tmux 终端复用器(terminal multiplexer)&lt;/p&gt;
&lt;h2 id=&#34;tmux-能干什么&#34;&gt;&lt;a href=&#34;#tmux-能干什么&#34; class=&#34;headerlink&#34; title=&#34;tmux 能干什么&#34;&gt;&lt;/a&gt;tmux 能干什么&lt;/h2&gt;&lt;p&gt;命令行的典型使用方式是，打开一个终端窗口（terminal window，以下简称”窗口”），在里面输入命令。&lt;strong&gt;用户与计算机的这种临时的交互，称为一次”会话”（session）&lt;/strong&gt; 。&lt;/p&gt;
&lt;p&gt;会话的一个重要特点是，窗口与其中启动的进程是&lt;a href=&#34;https://www.ruanyifeng.com/blog/2016/02/linux-daemon.html&#34;&gt;连在一起&lt;/a&gt;的。打开窗口，会话开始；关闭窗口，会话结束，会话内部的进程也会随之终止，不管有没有运行完。&lt;/p&gt;
&lt;p&gt;一个典型的例子就是，&lt;a href=&#34;https://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html&#34;&gt;SSH 登录&lt;/a&gt;远程计算机，打开一个远程窗口执行一个命令例如&lt;code&gt;iperf3 -s&lt;/code&gt;。这时，关掉SSH，会发现&lt;code&gt;iperf3&lt;/code&gt;进程也被关掉了。这是因为&lt;code&gt;iperf3&lt;/code&gt;属于SSH的子进程，SSH作为父进程，如果父进程关掉了，子进程也就关掉了。&lt;/p&gt;
&lt;p&gt;为了解决这个问题，会话与窗口可以”解绑”：窗口关闭时，会话并不终止，而是继续运行，等到以后需要的时候，再让会话”绑定”其他窗口。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tmux 就是会话与窗口的”解绑”工具，将它们彻底分离。&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;它允许在单个窗口中，同时访问多个会话。这对于同时运行多个命令行程序很有用。&lt;/li&gt;
&lt;li&gt;它可以让新窗口”接入”已经存在的会话。&lt;/li&gt;
&lt;li&gt;它允许每个会话有多个连接窗口，因此可以多人实时共享会话。&lt;/li&gt;
&lt;li&gt;它还支持窗口任意的垂直和水平拆分。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;类似的终端复用器还有 GNU Screen。Tmux 与它功能相似，但是更易用，也更强大。&lt;/p&gt;
&lt;h1 id=&#34;基本使用&#34;&gt;&lt;a href=&#34;#基本使用&#34; class=&#34;headerlink&#34; title=&#34;基本使用&#34;&gt;&lt;/a&gt;基本使用&lt;/h1&gt;&lt;p&gt;Tmux 一般需要自己安装。&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Ubuntu 或 Debian&lt;/span&gt;&lt;br&gt;$ sudo apt-get install tmux&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 启动&lt;/span&gt;&lt;br&gt;$ tmux&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 退出&lt;/span&gt;&lt;br&gt;$ &lt;span class=&#34;hljs-built_in&#34;&gt;exit&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;启动后底部&lt;u&gt;左边&lt;/u&gt;是&lt;strong&gt;窗口&lt;/strong&gt;信息（编号和名称），&lt;u&gt;右侧&lt;/u&gt;是系统信息。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2022/9d389561/image-20220929235001871.png&#34; alt=&#34;image-20220929235001871&#34;&gt;&lt;/p&gt;
&lt;p&gt;按下&lt;code&gt;Ctrl+d&lt;/code&gt;或者显式输入&lt;code&gt;exit&lt;/code&gt;命令，就可以退出 Tmux 窗口。&lt;/p&gt;
&lt;h2 id=&#34;前缀键☆&#34;&gt;&lt;a href=&#34;#前缀键☆&#34; class=&#34;headerlink&#34; title=&#34;前缀键☆&#34;&gt;&lt;/a&gt;&lt;strong&gt;前缀键&lt;/strong&gt;☆&lt;/h2&gt;&lt;p&gt;Tmux 窗口有大量的快捷键。所有快捷键都要通过前缀键唤起。默认的前缀键是&lt;code&gt;Ctrl+b&lt;/code&gt;，即先按下&lt;code&gt;Ctrl+b&lt;/code&gt;，快捷键才会生效。&lt;/p&gt;
&lt;p&gt;举例来说，帮助命令的快捷键是&lt;code&gt;Ctrl+b ?&lt;/code&gt;。它的用法是，在 Tmux 窗口中，先按下&lt;code&gt;Ctrl+b&lt;/code&gt;，再按下&lt;code&gt;?&lt;/code&gt;，就会显示帮助信息。&lt;/p&gt;
&lt;p&gt;然后，按下 ESC 键或&lt;code&gt;q&lt;/code&gt;键，就可以退出帮助。&lt;/p&gt;
&lt;h2 id=&#34;会话-窗格-窗口-的概念☆&#34;&gt;&lt;a href=&#34;#会话-窗格-窗口-的概念☆&#34; class=&#34;headerlink&#34; title=&#34;会话  窗格  窗口  的概念☆&#34;&gt;&lt;/a&gt;&lt;strong&gt;会话  窗格  窗口  的概念&lt;/strong&gt;☆&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;  会话 session&lt;br&gt;  窗口 windows&lt;br&gt;  窗格 pane&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;tmux new&lt;/code&gt;的是会话, 会话可以包括多个窗口, 窗口内可以有多个窗格&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;tmux ls&lt;/code&gt; 列出的是会话&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;/2022/9d389561/image-20220930003505311.png&#34; alt=&#34;image-20220930003505311&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;会话的管理&#34;&gt;&lt;a href=&#34;#会话的管理&#34; class=&#34;headerlink&#34; title=&#34;会话的管理&#34;&gt;&lt;/a&gt;会话的管理&lt;/h1&gt;&lt;h2 id=&#34;快捷键☆&#34;&gt;&lt;a href=&#34;#快捷键☆&#34; class=&#34;headerlink&#34; title=&#34;快捷键☆&#34;&gt;&lt;/a&gt;快捷键☆&lt;/h2&gt;&lt;p&gt;下面是一些会话相关的快捷键。&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b d&lt;/code&gt;：分离当前会话。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b s&lt;/code&gt;：列出所有会话。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b $&lt;/code&gt;：重命名当前会话。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;3-1-new新建会话☆&#34;&gt;&lt;a href=&#34;#3-1-new新建会话☆&#34; class=&#34;headerlink&#34; title=&#34;3.1 new新建会话☆&#34;&gt;&lt;/a&gt;3.1 new新建会话☆&lt;/h2&gt;&lt;p&gt;第一个启动的 Tmux 窗口，编号是&lt;code&gt;0&lt;/code&gt;，第二个窗口的编号是&lt;code&gt;1&lt;/code&gt;，以此类推。这些窗口对应的会话，就是 0 号会话、1 号会话。&lt;/p&gt;
&lt;p&gt;使用编号区分会话，不太直观，更好的方法是为会话起名。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 直接新建一个&lt;/span&gt;&lt;br&gt;$ tmux&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 新建并设置一个名字&lt;/span&gt;&lt;br&gt;$ tmux new -s &amp;lt;session-name&amp;gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;p&gt;上面命令新建一个指定名称的会话。&lt;/p&gt;
&lt;p&gt;在&lt;code&gt;tmux&lt;/code&gt;内应该是无法执行这个指令的, 需要分屏参考下面的窗格操作章节.&lt;/p&gt;
&lt;h2 id=&#34;3-2-detach分离会话☆&#34;&gt;&lt;a href=&#34;#3-2-detach分离会话☆&#34; class=&#34;headerlink&#34; title=&#34;3.2 detach分离会话☆&#34;&gt;&lt;/a&gt;3.2 detach分离会话☆&lt;/h2&gt;&lt;p&gt;在 Tmux 窗口中，按下&lt;code&gt;Ctrl+b d&lt;/code&gt;或者输入&lt;code&gt;tmux detach&lt;/code&gt;命令，就会将当前会话与窗口分离。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;$ tmux detach&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;p&gt;上面命令执行后，就会退出当前 Tmux 窗口，但是会话和里面的进程仍然在后台运行。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;tmux ls&lt;/code&gt;命令可以查看当前所有的 Tmux 会话。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;$ tmux &lt;span class=&#34;hljs-built_in&#34;&gt;ls&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# or&lt;/span&gt;&lt;br&gt;$ tmux list-session&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;3-3-attach接入会话☆&#34;&gt;&lt;a href=&#34;#3-3-attach接入会话☆&#34; class=&#34;headerlink&#34; title=&#34;3.3 attach接入会话☆&#34;&gt;&lt;/a&gt;3.3 attach接入会话☆&lt;/h2&gt;&lt;p&gt;&lt;code&gt;tmux attach&lt;/code&gt;命令用于重新接入某个已存在的会话。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 使用会话编号&lt;/span&gt;&lt;br&gt;$ tmux attach -t 0&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 使用会话名称&lt;/span&gt;&lt;br&gt;$ tmux attach -t &amp;lt;session-name&amp;gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;3-4-kill-session杀死会话☆&#34;&gt;&lt;a href=&#34;#3-4-kill-session杀死会话☆&#34; class=&#34;headerlink&#34; title=&#34;3.4 kill-session杀死会话☆&#34;&gt;&lt;/a&gt;3.4 kill-session杀死会话☆&lt;/h2&gt;&lt;p&gt;&lt;code&gt;tmux kill-session&lt;/code&gt;命令用于杀死某个会话。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 使用会话编号&lt;/span&gt;&lt;br&gt;$ tmux kill-session -t 0&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 使用会话名称&lt;/span&gt;&lt;br&gt;$ tmux kill-session -t &amp;lt;session-name&amp;gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;3-5-切换会话&#34;&gt;&lt;a href=&#34;#3-5-切换会话&#34; class=&#34;headerlink&#34; title=&#34;3.5 切换会话&#34;&gt;&lt;/a&gt;3.5 切换会话&lt;/h2&gt;&lt;p&gt;&lt;code&gt;tmux switch&lt;/code&gt;命令用于切换会话。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 使用会话编号&lt;/span&gt;&lt;br&gt;$ tmux switch -t 0&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 使用会话名称&lt;/span&gt;&lt;br&gt;$ tmux switch -t &amp;lt;session-name&amp;gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;3-6-重命名会话&#34;&gt;&lt;a href=&#34;#3-6-重命名会话&#34; class=&#34;headerlink&#34; title=&#34;3.6 重命名会话&#34;&gt;&lt;/a&gt;3.6 重命名会话&lt;/h2&gt;&lt;p&gt;&lt;code&gt;tmux rename-session&lt;/code&gt;命令用于重命名会话。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;$ tmux rename-session -t 0 &amp;lt;new-name&amp;gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;p&gt;上面命令将0号会话重命名。&lt;/p&gt;
&lt;h1 id=&#34;窗格操作&#34;&gt;&lt;a href=&#34;#窗格操作&#34; class=&#34;headerlink&#34; title=&#34;窗格操作&#34;&gt;&lt;/a&gt;窗格操作&lt;/h1&gt;&lt;h2 id=&#34;快捷键☆-1&#34;&gt;&lt;a href=&#34;#快捷键☆-1&#34; class=&#34;headerlink&#34; title=&#34;快捷键☆&#34;&gt;&lt;/a&gt;快捷键☆&lt;/h2&gt;&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b %&lt;/code&gt;：划分左右两个窗格。☆&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b &amp;quot;&lt;/code&gt;：划分上下两个窗格。☆&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b &amp;lt;arrow key&amp;gt;&lt;/code&gt;：光标切换到其他窗格。&lt;code&gt;&amp;lt;arrow key&amp;gt;&lt;/code&gt;是指向要切换到的窗格的方向键，比如切换到下方窗格，就按方向键&lt;code&gt;↓&lt;/code&gt;。☆&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b ;&lt;/code&gt;：光标切换到上一个窗格。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b o&lt;/code&gt;：光标切换到下一个窗格。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b &amp;#123;&lt;/code&gt;：当前窗格与上一个窗格交换位置。☆&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b &amp;#125;&lt;/code&gt;：当前窗格与下一个窗格交换位置。☆&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b Ctrl+o&lt;/code&gt;：所有窗格向前移动一个位置，第一个窗格变成最后一个窗格。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b Alt+o&lt;/code&gt;：所有窗格向后移动一个位置，最后一个窗格变成第一个窗格。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b x&lt;/code&gt;：关闭当前窗格。☆&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b !&lt;/code&gt;：将当前窗格拆分为一个独立窗口。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b z&lt;/code&gt;：当前窗格全屏显示，再使用一次会变回原来大小。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b Ctrl+&amp;lt;arrow key&amp;gt;&lt;/code&gt;：按箭头方向调整窗格大小。☆&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b q&lt;/code&gt;：显示窗格编号。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;5-1-划分窗格&#34;&gt;&lt;a href=&#34;#5-1-划分窗格&#34; class=&#34;headerlink&#34; title=&#34;5.1 划分窗格&#34;&gt;&lt;/a&gt;5.1 划分窗格&lt;/h2&gt;&lt;p&gt;&lt;code&gt;tmux split-window&lt;/code&gt;命令用来划分窗格。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 划分上下两个窗格&lt;/span&gt;&lt;br&gt;$ tmux split-window&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 划分左右两个窗格&lt;/span&gt;&lt;br&gt;$ tmux split-window -h&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;5-2-移动光标&#34;&gt;&lt;a href=&#34;#5-2-移动光标&#34; class=&#34;headerlink&#34; title=&#34;5.2 移动光标&#34;&gt;&lt;/a&gt;5.2 移动光标&lt;/h2&gt;&lt;p&gt;&lt;code&gt;tmux select-pane&lt;/code&gt;命令用来移动光标位置。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 光标切换到上方窗格&lt;/span&gt;&lt;br&gt;$ tmux select-pane -U&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 光标切换到下方窗格&lt;/span&gt;&lt;br&gt;$ tmux select-pane -D&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 光标切换到左边窗格&lt;/span&gt;&lt;br&gt;$ tmux select-pane -L&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 光标切换到右边窗格&lt;/span&gt;&lt;br&gt;$ tmux select-pane -R&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;5-3-交换窗格位置&#34;&gt;&lt;a href=&#34;#5-3-交换窗格位置&#34; class=&#34;headerlink&#34; title=&#34;5.3 交换窗格位置&#34;&gt;&lt;/a&gt;5.3 交换窗格位置&lt;/h2&gt;&lt;p&gt;&lt;code&gt;tmux swap-pane&lt;/code&gt;命令用来交换窗格位置。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 当前窗格上移&lt;/span&gt;&lt;br&gt;$ tmux swap-pane -U&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 当前窗格下移&lt;/span&gt;&lt;br&gt;$ tmux swap-pane -D&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;窗口管理&#34;&gt;&lt;a href=&#34;#窗口管理&#34; class=&#34;headerlink&#34; title=&#34;窗口管理&#34;&gt;&lt;/a&gt;窗口管理&lt;/h1&gt;&lt;h2 id=&#34;快捷键☆-2&#34;&gt;&lt;a href=&#34;#快捷键☆-2&#34; class=&#34;headerlink&#34; title=&#34;快捷键☆&#34;&gt;&lt;/a&gt;快捷键☆&lt;/h2&gt;&lt;p&gt;下面是一些窗口操作的快捷键。&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b c&lt;/code&gt;：创建一个新窗口，状态栏会显示多个窗口的信息。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b p&lt;/code&gt;：切换到上一个窗口（按照状态栏上的顺序）。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b n&lt;/code&gt;：切换到下一个窗口。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b &amp;lt;number&amp;gt;&lt;/code&gt;：切换到指定编号的窗口，其中的&lt;code&gt;&amp;lt;number&amp;gt;&lt;/code&gt;是状态栏上的窗口编号。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b w&lt;/code&gt;：从列表中选择窗口。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+b ,&lt;/code&gt;：窗口重命名。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;6-1-新建窗口&#34;&gt;&lt;a href=&#34;#6-1-新建窗口&#34; class=&#34;headerlink&#34; title=&#34;6.1 新建窗口&#34;&gt;&lt;/a&gt;6.1 新建窗口&lt;/h2&gt;&lt;p&gt;&lt;code&gt;tmux new-window&lt;/code&gt;命令用来创建新窗口。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;$ tmux new-window&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 新建一个指定名称的窗口&lt;/span&gt;&lt;br&gt;$ tmux new-window -n &amp;lt;window-name&amp;gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;6-2-切换窗口&#34;&gt;&lt;a href=&#34;#6-2-切换窗口&#34; class=&#34;headerlink&#34; title=&#34;6.2 切换窗口&#34;&gt;&lt;/a&gt;6.2 切换窗口&lt;/h2&gt;&lt;p&gt;&lt;code&gt;tmux select-window&lt;/code&gt;命令用来切换窗口。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 切换到指定编号的窗口&lt;/span&gt;&lt;br&gt;$ tmux select-window -t &amp;lt;window-number&amp;gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 切换到指定名称的窗口&lt;/span&gt;&lt;br&gt;$ tmux select-window -t &amp;lt;window-name&amp;gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;6-3-重命名窗口&#34;&gt;&lt;a href=&#34;#6-3-重命名窗口&#34; class=&#34;headerlink&#34; title=&#34;6.3 重命名窗口&#34;&gt;&lt;/a&gt;6.3 重命名窗口&lt;/h2&gt;&lt;p&gt;&lt;code&gt;tmux rename-window&lt;/code&gt;命令用于为当前窗口起名（或重命名）。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;$ tmux rename-window &amp;lt;new-name&amp;gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;Note&#34;&gt;&lt;a href=&#34;#Note&#34; class=&#34;headerlink&#34; title=&#34;Note&#34;&gt;&lt;/a&gt;Note&lt;/h1&gt;&lt;h2 id=&#34;一些其他的快捷键&#34;&gt;&lt;a href=&#34;#一些其他的快捷键&#34; class=&#34;headerlink&#34; title=&#34;一些其他的快捷键&#34;&gt;&lt;/a&gt;一些其他的快捷键&lt;/h2&gt;&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 列出所有快捷键，及其对应的 Tmux 命令&lt;/span&gt;&lt;br&gt;$ tmux list-keys&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 列出所有 Tmux 命令及其参数&lt;/span&gt;&lt;br&gt;$ tmux list-commands&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 列出当前所有 Tmux 会话的信息&lt;/span&gt;&lt;br&gt;$ tmux info&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 重新加载当前的 Tmux 配置&lt;/span&gt;&lt;br&gt;$ tmux source-file ~/.tmux.conf&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;开启鼠标支持&#34;&gt;&lt;a href=&#34;#开启鼠标支持&#34; class=&#34;headerlink&#34; title=&#34;开启鼠标支持&#34;&gt;&lt;/a&gt;开启鼠标支持&lt;/h2&gt;&lt;p&gt;tmux2 以上版本和 tmux2 以上版本有所不同&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  查看版本&lt;code&gt;tmux -V&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;  注意大写&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;tmux2-以上&#34;&gt;&lt;a href=&#34;#tmux2-以上&#34; class=&#34;headerlink&#34; title=&#34;tmux2 以上&#34;&gt;&lt;/a&gt;tmux2 以上&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;写入配置文件&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在&lt;code&gt;~/.tmux.conf&lt;/code&gt;中加入：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Enable mouse mode (tmux 2.1 and above)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;set&lt;/span&gt; -g mouse on&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Mouse based copy&lt;/span&gt;&lt;br&gt;bind-key -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;reattach-to-user-namespace pbcopy&amp;quot;&lt;/span&gt;&lt;br&gt;bind-key -T copy-mode MouseDragEnd1Pane send -X copy-pipe-and-cancel &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;reattach-to-user-namespace pbcopy&amp;quot;&lt;/span&gt; &lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;临时使用&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;按完前缀ctrl+B后，再按冒号：进入&lt;code&gt;命令行&lt;/code&gt;模式，输入&lt;code&gt;set -g mouse on&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;tmux2-以下&#34;&gt;&lt;a href=&#34;#tmux2-以下&#34; class=&#34;headerlink&#34; title=&#34;tmux2 以下&#34;&gt;&lt;/a&gt;tmux2 以下&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;写入配置文件&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在&lt;code&gt;~/.tmux.conf&lt;/code&gt;中加入：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;setw -g mouse-resize-pane on&lt;br&gt;setw -g mouse-select-pane on&lt;br&gt;setw -g mouse-select-window on&lt;br&gt;setw -g mode-mouse on&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;blockquote&gt;
&lt;p&gt;  这几行的作用分别是:&lt;br&gt;  开启用鼠标拖动调节pane的大小（拖动位置是pane之间的分隔线）&lt;br&gt;  开启用鼠标点击pane来激活该pane&lt;br&gt;  开启用鼠标点击来切换活动window（点击位置是状态栏的窗口名称）&lt;br&gt;  开启window&amp;#x2F;pane里面的鼠标支持（也即可以用鼠标滚轮回滚显示窗口内容，此时还可以用鼠标选取文本）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;参考&#34;&gt;&lt;a href=&#34;#参考&#34; class=&#34;headerlink&#34; title=&#34;参考&#34;&gt;&lt;/a&gt;参考&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.hamvocke.com/blog/a-quick-and-easy-guide-to-tmux/&#34;&gt;A Quick and Easy Guide to tmux&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://danielmiessler.com/study/tmux/&#34;&gt;Tactical tmux: The 10 Most Important Commands&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://linuxize.com/post/getting-started-with-tmux/&#34;&gt;Getting started with Tmux&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.ruanyifeng.com/blog/2019/10/tmux.html&#34;&gt;阮一峰&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://www.oikiou.top/2022/eae787f0/</guid>
            <title>CatDrive猫盘</title>
            <link>https://www.oikiou.top/2022/eae787f0/</link>
            <category>linux</category>
            <category>cat_drive</category>
            <pubDate>Fri, 21 Jan 2022 22:57:15 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;刷机&#34;&gt;&lt;a href=&#34;#刷机&#34; class=&#34;headerlink&#34; title=&#34;刷机&#34;&gt;&lt;/a&gt;刷机&lt;/h1&gt;&lt;p&gt;刷机教程很多很多，这边就不赘述了&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.jianshu.com/p/77e529fb35f9&#34;&gt;https://www.jianshu.com/p/77e529fb35f9&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.huakings.cn/post/283.html&#34;&gt;https://www.huakings.cn/post/283.html&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;建议备好串口刷砖必备&lt;/li&gt;
&lt;li&gt;猫盘ssh 用户名 &lt;strong&gt;root&lt;/strong&gt; 密码 &lt;strong&gt;Etech12&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;变砖刷机&#34;&gt;&lt;a href=&#34;#变砖刷机&#34; class=&#34;headerlink&#34; title=&#34;变砖刷机&#34;&gt;&lt;/a&gt;变砖刷机&lt;/h1&gt;&lt;h2 id=&#34;参考资料&#34;&gt;&lt;a href=&#34;#参考资料&#34; class=&#34;headerlink&#34; title=&#34;参考资料&#34;&gt;&lt;/a&gt;参考资料&lt;/h2&gt;&lt;p&gt;&lt;a href=&#34;https://www.bilibili.com/video/av73492887&#34;&gt;https://www.bilibili.com/video/av73492887&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.huakings.cn/post/186.html&#34;&gt;https://www.huakings.cn/post/186.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://wiki.espressobin.net/tiki-index.php?page=Bootloader+recovery+via+UART&#34;&gt;http://wiki.espressobin.net/tiki-index.php?page=Bootloader+recovery+via+UART&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;背景知识&#34;&gt;&lt;a href=&#34;#背景知识&#34; class=&#34;headerlink&#34; title=&#34;背景知识&#34;&gt;&lt;/a&gt;背景知识&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;猫盘引导过程&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2022/eae787f0/image-20211225204417854.png&#34; alt=&#34;image-20211225204417854&#34;&gt;&lt;/p&gt;
&lt;p&gt;从 A3720 机器引导，再到SPI FLASH引导，再到SATA硬盘或者EMMC启动&lt;/p&gt;
&lt;p&gt;出现&lt;code&gt;&amp;gt;E&lt;/code&gt;就是SPI引导没了，需要用厂商工具把SPI引导刷一遍。&lt;/p&gt;
&lt;h2 id=&#34;步骤&#34;&gt;&lt;a href=&#34;#步骤&#34; class=&#34;headerlink&#34; title=&#34;步骤&#34;&gt;&lt;/a&gt;步骤&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;/2022/eae787f0/image-20211225203501999.png&#34; alt=&#34;image-20211225203501999&#34;&gt;&lt;/p&gt;
&lt;p&gt;发现出现&lt;code&gt;&amp;gt;E&lt;/code&gt;，这就说明猫盘SPI引导没了，需要重新刷入uboot，进行救砖。&lt;/p&gt;
&lt;p&gt;首先，需要预装VM启用厂商的Linux环境(ezremaster.iso)，安装VM这步跳过。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;创建虚拟机的时候操作系统可以选择Linux 2.2.x内核，&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;串口的USB设备加到VM内，然后开机。&lt;/p&gt;
&lt;p&gt;输入如下代码，回车运行后会让输入port，&lt;code&gt;/dev/ttyUSB0&lt;/code&gt;一般是&lt;code&gt;0&lt;/code&gt;输入0回车就会开始刷SPI，然后会出现++++++++，在此期间可以按几下回车。&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;sudo sh /wtpd/shua.sh&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;img src=&#34;/2022/eae787f0/image-20211225204613427.png&#34; alt=&#34;image-20211225204613427&#34;&gt;&lt;/p&gt;
&lt;p&gt;等一段时间就会出现&lt;code&gt;marvell&amp;gt;&amp;gt;&lt;/code&gt;，至此就已经救砖成功。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2022/eae787f0/image-20211225205017895.png&#34; alt=&#34;image-20211225205017895&#34;&gt;&lt;/p&gt;
&lt;p&gt;接下来就可以用&lt;code&gt;bubt&lt;/code&gt;命令正常刷SPI引导了。&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;bubt full.bin spi usb&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h1 id=&#34;Note&#34;&gt;&lt;a href=&#34;#Note&#34; class=&#34;headerlink&#34; title=&#34;Note&#34;&gt;&lt;/a&gt;Note&lt;/h1&gt;&lt;h2 id=&#34;LED-FAN-控制脚本&#34;&gt;&lt;a href=&#34;#LED-FAN-控制脚本&#34; class=&#34;headerlink&#34; title=&#34;LED FAN 控制脚本&#34;&gt;&lt;/a&gt;LED FAN 控制脚本&lt;/h2&gt;&lt;p&gt;参考: &lt;a href=&#34;https://bbs.nas66.com/thread-9007-1-1.html&#34;&gt;https://bbs.nas66.com/thread-9007-1-1.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;参考: &lt;a href=&#34;https://bbs.nas66.com/thread-13810-1-1.html&#34;&gt;https://bbs.nas66.com/thread-13810-1-1.html&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;72&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;mkdir -p /a_usr&lt;br&gt;cat &amp;gt; /a_usr/ledfan.sh &amp;lt;&amp;lt;EOF&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;!/bin/sh&lt;/span&gt;&lt;br&gt;if [ ! -d /sys/class/gpio/gpio450 ] ; then&lt;br&gt;echo 450 &amp;gt; /sys/class/gpio/export&lt;br&gt;fi&lt;br&gt;echo out &amp;gt; /sys/class/gpio/gpio450/direction&lt;br&gt;i2cset -y -f 0 0x45 0x00 0x55&lt;br&gt;i2cset -y -f 0 0x45 0x01 0x01&lt;br&gt;i2cset -y -f 0 0x45 0x30 0x07 &lt;br&gt;rm -r /tmp/led/&lt;br&gt;mkdir /tmp/led/&lt;br&gt;echo 1 &amp;gt; /tmp/led/leds.flag&lt;br&gt;while true&lt;br&gt;do&lt;br&gt;sata_temp=&amp;quot;\$(smartctl -a /dev/hda -d ata | sed -n &amp;#x27;/Temperature_Celsius/p&amp;#x27; | awk &amp;#x27;&amp;#123;print $10&amp;#125;&amp;#x27;)&amp;quot;&lt;br&gt;sata=&amp;quot;\$(hdparm -C /dev/sda |grep &amp;#x27;drive&amp;#x27;|awk &amp;#x27;&amp;#123;print \$4&amp;#125;&amp;#x27;)&amp;quot;&lt;br&gt;ledss=&amp;quot;\$(cat /tmp/led/leds.flag)&amp;quot;&lt;br&gt;if [ \$sata = standby ];then&lt;br&gt;led=&amp;quot;0x03&amp;quot;&lt;br&gt;leds=&amp;quot;0&amp;quot;&lt;br&gt;fi&lt;br&gt;if [ \$sata = active/idle ];then&lt;br&gt;led=&amp;quot;0x73&amp;quot;&lt;br&gt;leds=&amp;quot;1&amp;quot;&lt;br&gt;fi&lt;br&gt;if [ \$sata_temp -ge 55 ];then&lt;br&gt;if [ -f &amp;quot;/tmp/led/led31.flag&amp;quot; ] &amp;amp;&amp;amp; [ \$ledss = \$leds ];then &lt;br&gt;sleep 15&lt;br&gt;continue&lt;br&gt;fi&lt;br&gt;i2cset -y -f 0 0x45 0x32 0x00&lt;br&gt;i2cset -y -f 0 0x45 0x33 0x00&lt;br&gt;i2cset -y -f 0 0x45 0x31 \$&amp;#123;led&amp;#125;&lt;br&gt;i2cset -y -f 0 0x45 0x34 255&lt;br&gt;echo 1 &amp;gt; /sys/class/gpio/gpio450/value&lt;br&gt;rm -rf /tmp/led/led*.flag&lt;br&gt;touch /tmp/led/led31.flag&lt;br&gt;echo \$&amp;#123;leds&amp;#125; &amp;gt; /tmp/led/leds.flag&lt;br&gt;fi&lt;br&gt;if [ \$sata_temp -ge 45 ] &amp;amp;&amp;amp; [ \$sata_temp -lt 55 ];then&lt;br&gt;if [ -f &amp;quot;/tmp/led/led33.flag&amp;quot; ] &amp;amp;&amp;amp; [ \$ledss = \$leds ];then&lt;br&gt;sleep 15 &lt;br&gt;continue&lt;br&gt;fi&lt;br&gt;i2cset -y -f 0 0x45 0x31 0x00&lt;br&gt;i2cset -y -f 0 0x45 0x32 0x00&lt;br&gt;i2cset -y -f 0 0x45 0x33 \$&amp;#123;led&amp;#125;&lt;br&gt;i2cset -y -f 0 0x45 0x36 255&lt;br&gt;echo 1 &amp;gt; /sys/class/gpio/gpio450/value&lt;br&gt;rm -rf /tmp/led/led*.flag&lt;br&gt;touch /tmp/led/led33.flag&lt;br&gt;echo \$&amp;#123;leds&amp;#125; &amp;gt; /tmp/led/leds.flag&lt;br&gt;fi&lt;br&gt;if [ \$sata_temp -lt 45 ];then&lt;br&gt;if [ -f &amp;quot;/tmp/led/led32.flag&amp;quot; ] &amp;amp;&amp;amp; [ \$ledss = \$leds ];then&lt;br&gt;sleep 15 &lt;br&gt;continue&lt;br&gt;fi&lt;br&gt;i2cset -y -f 0 0x45 0x31 0x00&lt;br&gt;i2cset -y -f 0 0x45 0x33 0x00&lt;br&gt;i2cset -y -f 0 0x45 0x32 \$&amp;#123;led&amp;#125;&lt;br&gt;i2cset -y -f 0 0x45 0x35 255&lt;br&gt;echo 0 &amp;gt; /sys/class/gpio/gpio450/value&lt;br&gt;rm -rf /tmp/led/led*.flag&lt;br&gt;touch /tmp/led/led32.flag&lt;br&gt;echo \$&amp;#123;leds&amp;#125; &amp;gt; /tmp/led/leds.flag&lt;br&gt;fi&lt;br&gt;sleep 15&lt;br&gt;done&lt;br&gt;EOF&lt;br&gt;bash /a_usr/ledfan.sh&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&#34;修改SN半白脚本&#34;&gt;&lt;a href=&#34;#修改SN半白脚本&#34; class=&#34;headerlink&#34; title=&#34;修改SN半白脚本&#34;&gt;&lt;/a&gt;修改SN半白脚本&lt;/h2&gt;&lt;p&gt;下面的&lt;code&gt;00:11:32:12:34:56&lt;/code&gt;最好改成壳子上自己的MAC&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;cd ~ &amp;amp;&amp;amp; wget -N --no-check-certificate https://www.huakings.cn/mp202003/macsn.sh &amp;amp;&amp;amp; chmod +x macsn.sh &amp;amp;&amp;amp; bash macsn.sh 00:11:32:12:34:56 1860ABCDE1860 &amp;amp;&amp;amp; rm -f /root/macsn.sh&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;macsn.sh脚本详细内容如下&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;87&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;macstr=$1&lt;br&gt;sn=$2&lt;br&gt;mac=($&amp;#123;macstr//:/ &amp;#125;)&lt;br&gt;if [ $&amp;#123;#mac[@]&amp;#125; != 6 ];&lt;br&gt;then&lt;br&gt;echo mac address error!&lt;br&gt;exit&lt;br&gt;fi&lt;br&gt;for var in $&amp;#123;mac[@]&amp;#125;&lt;br&gt;do&lt;br&gt;if echo $var | grep -q &amp;#x27;[^0-9A-F]&amp;#x27;&lt;br&gt;then &lt;br&gt;echo mac address error!&lt;br&gt;exit&lt;br&gt;fi &lt;br&gt;if  [[ $&amp;#123;#var&amp;#125; != 2  ]] &lt;br&gt;then&lt;br&gt;echo mac address error!!&lt;br&gt;exit&lt;br&gt;fi&lt;br&gt;done&lt;br&gt;if  [[ $&amp;#123;#sn&amp;#125; != 13  ]] &lt;br&gt;then&lt;br&gt;echo sn error:The SN Length must be 13&lt;br&gt;exit&lt;br&gt;fi&lt;br&gt;&lt;br&gt;for((i=0;i&amp;lt;6;i++));&lt;br&gt;do &lt;br&gt;declare -i macchecksum+=0x$&amp;#123;mac[i]&amp;#125;&lt;br&gt;done&lt;br&gt;declare -i macchecksum=$macchecksum%256&lt;br&gt;for((i=0;i&amp;lt;13;i++));&lt;br&gt;do &lt;br&gt;declare -i checksum+=$(printf &amp;#x27;%d&amp;#x27; &amp;quot;&amp;#x27;$&amp;#123;sn:$i:1&amp;#125;&amp;quot;)&lt;br&gt;done&lt;br&gt;if [ $&amp;#123;#checksum&amp;#125; == 3 ];&lt;br&gt;then&lt;br&gt;echo -e -n &amp;quot;\x$&amp;#123;mac[0]&amp;#125;\x$&amp;#123;mac[1]&amp;#125;\x$&amp;#123;mac[2]&amp;#125;\x$&amp;#123;mac[3]&amp;#125;\x$&amp;#123;mac[4]&amp;#125;\x$&amp;#123;mac[5]&amp;#125;\&lt;br&gt;\x$(printf &amp;#x27;%x&amp;#x27; $macchecksum)\x0\&lt;br&gt;\x0\x0\x0\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x0\x0\x0\x0&amp;quot;\&lt;br&gt;\SN=$sn&amp;quot;,CHK=&amp;quot;$checksum\&lt;br&gt;&amp;quot;\x0\x0\x0\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x3C\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x1\x1\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x1\x1\x1\x1\&lt;br&gt;\x0\x1\x0\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x1\x1\x1\x1\&lt;br&gt;\x1\x0\x1\x1\x1\x1\x1\x0\&lt;br&gt;\x1\x1\x1\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x1\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x0\x0\x0\x0\x0\x0\x0\x0&amp;quot; &amp;gt; vender.bin&lt;br&gt;else&lt;br&gt;echo -e -n &amp;quot;\x$&amp;#123;mac[0]&amp;#125;\x$&amp;#123;mac[1]&amp;#125;\x$&amp;#123;mac[2]&amp;#125;\x$&amp;#123;mac[3]&amp;#125;\x$&amp;#123;mac[4]&amp;#125;\x$&amp;#123;mac[5]&amp;#125;\&lt;br&gt;\x$(printf &amp;#x27;%x&amp;#x27; $macchecksum)\x0\&lt;br&gt;\x0\x0\x0\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x0\x0\x0\x0&amp;quot;\&lt;br&gt;\SN=$sn&amp;quot;,CHK=&amp;quot;$checksum\&lt;br&gt;&amp;quot;\x0\x0\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x3C\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x1\x1\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x1\x1\x1\x1\&lt;br&gt;\x0\x1\x0\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x1\x1\x1\x1\&lt;br&gt;\x1\x0\x1\x1\x1\x1\x1\x0\&lt;br&gt;\x1\x1\x1\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x1\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x0\x0\x0\x0\&lt;br&gt;\x0\x0\x0\x0\x0\x0\x0\x0\x0\x0\x0\x0&amp;quot; &amp;gt; vender.bin&lt;br&gt;fi&lt;br&gt;dd if=vender.bin of=/dev/mtdblock3&lt;br&gt;rm vender.bin&lt;br&gt;echo Update Success! MAC:$macstr SN:$sn&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;





&lt;h2 id=&#34;解决猫盘掉ip问题&#34;&gt;&lt;a href=&#34;#解决猫盘掉ip问题&#34; class=&#34;headerlink&#34; title=&#34;解决猫盘掉ip问题&#34;&gt;&lt;/a&gt;解决猫盘掉ip问题&lt;/h2&gt;&lt;h3 id=&#34;最蠢的办法，检查无IP重启&#34;&gt;&lt;a href=&#34;#最蠢的办法，检查无IP重启&#34; class=&#34;headerlink&#34; title=&#34;最蠢的办法，检查无IP重启&#34;&gt;&lt;/a&gt;最蠢的办法，检查无IP重启&lt;/h3&gt;&lt;p&gt;将下面脚本添加到，群晖的开机启动&lt;/p&gt;
&lt;p&gt;控制面板-任务计划-新增-触发的任务-用户自定义脚本-开机启动&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;!/bin/bash&lt;/span&gt;&lt;br&gt;dt=`date &amp;#x27;+%d/%m/%Y %H:%M:%S&amp;#x27;`&lt;br&gt;echo &amp;quot;$dt&amp;quot;&lt;br&gt;sleep 60&lt;br&gt;num=`ping -c20 223.5.5.5 | tail -2 | head -1 | cut -f 3 -d&amp;quot;,&amp;quot; | cut -f 1 -d&amp;quot;%&amp;quot; | cut -f 2 -d&amp;quot; &amp;quot;`&lt;br&gt;echo $num&lt;br&gt;echo $?&lt;br&gt;if [ $? -eq 0 -a $num -eq 0 ]; then&lt;br&gt;echo &amp;quot;$dt ok&amp;quot; &amp;gt;&amp;gt; /result.txt&lt;br&gt;else&lt;br&gt;echo &amp;quot;$dt noip loss $num reboot&amp;quot; &amp;gt;&amp;gt; /result.txt&lt;br&gt;reboot&lt;br&gt;fi&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;其它办法&#34;&gt;&lt;a href=&#34;#其它办法&#34; class=&#34;headerlink&#34; title=&#34;其它办法&#34;&gt;&lt;/a&gt;其它办法&lt;/h3&gt;&lt;p&gt;&lt;a href=&#34;https://bbs.nas66.com/thread-17505-1-1.html&#34;&gt;https://bbs.nas66.com/thread-17505-1-1.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://bbs.nas66.com/thread-16639-1-1.html&#34;&gt;https://bbs.nas66.com/thread-16639-1-1.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://bbs.nas66.com/thread-7843-1-1.html&#34;&gt;https://bbs.nas66.com/thread-7843-1-1.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://bbs.nas66.com/thread-9350-1-1.html&#34;&gt;https://bbs.nas66.com/thread-9350-1-1.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://bbs.nas66.com/thread-4593-5-3.html&#34;&gt;https://bbs.nas66.com/thread-4593-5-3.html&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;群晖回退x3p&#34;&gt;&lt;a href=&#34;#群晖回退x3p&#34; class=&#34;headerlink&#34; title=&#34;群晖回退x3p&#34;&gt;&lt;/a&gt;群晖回退x3p&lt;/h2&gt;&lt;p&gt;&lt;a href=&#34;https://bbs.nas66.com/forum.php?mod=viewthread&amp;tid=2661&#34;&gt;https://bbs.nas66.com/forum.php?mod=viewthread&amp;amp;tid=2661&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;主要就是刷x3p的UBOOT，插U盘，U盘放x3p的自动安装镜像&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://www.oikiou.top/2021/784ee20b/</guid>
            <title>WSL</title>
            <link>https://www.oikiou.top/2021/784ee20b/</link>
            <category>windows</category>
            <category>linux</category>
            <category>wsl</category>
            <pubDate>Mon, 29 Nov 2021 13:12:15 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;安装&#34;&gt;&lt;a href=&#34;#安装&#34; class=&#34;headerlink&#34; title=&#34;安装&#34;&gt;&lt;/a&gt;安装&lt;/h1&gt;&lt;p&gt;若要检查 Windows 版本及内部版本号，选择 Windows 徽标键 + R，然后键入“winver”，选择“确定”。更新到“设置”菜单中的&lt;a href=&#34;ms-settings:windowsupdate&#34;&gt;最新 Windows 版本&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;IF&lt;/strong&gt;&lt;/em&gt; (Windows 10 版本 2004 及更高版本（内部版本 19041 及更高版本）或 Windows 11)&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://docs.microsoft.com/zh-cn/windows/wsl/install&#34;&gt;一键自动安装 WSL&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;ELSE&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://docs.microsoft.com/zh-cn/windows/wsl/install-manual&#34;&gt;旧版 WSL 的手动安装步骤(可以更改WSL系统的存放位置)&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;手动安装&#34;&gt;&lt;a href=&#34;#手动安装&#34; class=&#34;headerlink&#34; title=&#34;手动安装&#34;&gt;&lt;/a&gt;手动安装&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;   手动安装的优点是避免Linux的镜像文件(&lt;code&gt;ext4.vhdx&lt;/code&gt;)存放在C盘, 存放&lt;code&gt;ext4.vhdx&lt;/code&gt;的位置可以自定义.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;以下指令需要在&lt;strong&gt;管理员&lt;/strong&gt;下的 powershell 运行&lt;/p&gt;
&lt;figure class=&#34;highlight awk&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs awk&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 1 开启Microsoft-Windows-Subsystem-Linux&lt;/span&gt;&lt;br&gt;dism.exe &lt;span class=&#34;hljs-regexp&#34;&gt;/online /&lt;/span&gt;enable-feature &lt;span class=&#34;hljs-regexp&#34;&gt;/featurename:Microsoft-Windows-Subsystem-Linux /&lt;/span&gt;all /norestart&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 2 开启VirtualMachinePlatform&lt;/span&gt;&lt;br&gt;dism.exe &lt;span class=&#34;hljs-regexp&#34;&gt;/online /&lt;/span&gt;enable-feature &lt;span class=&#34;hljs-regexp&#34;&gt;/featurename:VirtualMachinePlatform /&lt;/span&gt;all /norestart&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 3 重启&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# reboot&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 4 安装WLS2内核更新包&lt;/span&gt;&lt;br&gt;https:&lt;span class=&#34;hljs-regexp&#34;&gt;//&lt;/span&gt;wslstorestorage.blob.core.windows.net&lt;span class=&#34;hljs-regexp&#34;&gt;/wslblob/&lt;/span&gt;wsl_update_x64.msi&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 5 将WSL2设为默认&lt;/span&gt;&lt;br&gt;wsl --set-default-version &lt;span class=&#34;hljs-number&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 6 下载离线包(可以避免将WSL的系统装在C盘)&lt;/span&gt;&lt;br&gt;https:&lt;span class=&#34;hljs-regexp&#34;&gt;//&lt;/span&gt;docs.microsoft.com&lt;span class=&#34;hljs-regexp&#34;&gt;/zh-cn/&lt;/span&gt;windows&lt;span class=&#34;hljs-regexp&#34;&gt;/wsl/i&lt;/span&gt;nstall-manual&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# example&lt;/span&gt;&lt;br&gt;https:&lt;span class=&#34;hljs-regexp&#34;&gt;//&lt;/span&gt;aka.ms/wslubuntu2004&lt;br&gt;https:&lt;span class=&#34;hljs-regexp&#34;&gt;//&lt;/span&gt;aka.ms/wsl-ubuntu-&lt;span class=&#34;hljs-number&#34;&gt;1804&lt;/span&gt;&lt;br&gt;https:&lt;span class=&#34;hljs-regexp&#34;&gt;//&lt;/span&gt;aka.ms/wsl-debian-gnulinux&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 离线包下载完成后解压缩 运行目录内的ubuntu.exe&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 会提示输入用户名和密码&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 7 (可选)安装 windows终端&lt;/span&gt;&lt;br&gt;https:&lt;span class=&#34;hljs-regexp&#34;&gt;//&lt;/span&gt;docs.microsoft.com&lt;span class=&#34;hljs-regexp&#34;&gt;/en-us/&lt;/span&gt;windows&lt;span class=&#34;hljs-regexp&#34;&gt;/terminal/g&lt;/span&gt;et-started 可选 &lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h1 id=&#34;Note&#34;&gt;&lt;a href=&#34;#Note&#34; class=&#34;headerlink&#34; title=&#34;Note&#34;&gt;&lt;/a&gt;Note&lt;/h1&gt;&lt;h2 id=&#34;U盘挂载&#34;&gt;&lt;a href=&#34;#U盘挂载&#34; class=&#34;headerlink&#34; title=&#34;U盘挂载&#34;&gt;&lt;/a&gt;U盘挂载&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;1 新建文件夹g&lt;/span&gt;&lt;br&gt;sudo mkdir /mnt/g&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;2 挂载盘符g&lt;/span&gt;&lt;br&gt;sudo mount -t drvfs g: /mnt/g&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;大功告成。进入/mnt/g即可操作&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;弹出移动硬盘，这样才能在windows下正常弹出，否则是会一直占用的。&lt;/span&gt;&lt;br&gt;sudo umount /mnt/g&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;映射wsl文件系统&#34;&gt;&lt;a href=&#34;#映射wsl文件系统&#34; class=&#34;headerlink&#34; title=&#34;映射wsl文件系统&#34;&gt;&lt;/a&gt;映射wsl文件系统&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;/2021/784ee20b/image-20211129131237501.png&#34; alt=&#34;image-20211129131237501&#34;&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight gams&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs gams&#34;&gt;\\wsl&lt;span class=&#34;hljs-symbol&#34;&gt;$&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;通过 &lt;code&gt;\\wsl$&lt;/code&gt; 访问 Linux 文件时将使用 WSL 分发版的默认用户。 因此，任何访问 Linux 文件的 Windows 应用都具有与默认用户相同的权限。&lt;/p&gt;
&lt;h2 id=&#34;wsl关机&#34;&gt;&lt;a href=&#34;#wsl关机&#34; class=&#34;headerlink&#34; title=&#34;wsl关机&#34;&gt;&lt;/a&gt;wsl关机&lt;/h2&gt;&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;wsl --shutdown&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;wsl-配置文件&#34;&gt;&lt;a href=&#34;#wsl-配置文件&#34; class=&#34;headerlink&#34; title=&#34;wsl 配置文件&#34;&gt;&lt;/a&gt;wsl 配置文件&lt;/h2&gt;&lt;figure class=&#34;highlight ini&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs ini&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Settings apply across all Linux distros running on WSL 2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-section&#34;&gt;[wsl2]&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Limits VM memory to use no more than 4 GB, this can be set as whole numbers using GB or MB&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-attr&#34;&gt;memory&lt;/span&gt;=&lt;span class=&#34;hljs-number&#34;&gt;4&lt;/span&gt;GB &lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Sets the VM to use two virtual processors&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-attr&#34;&gt;processors&lt;/span&gt;=&lt;span class=&#34;hljs-number&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Specify a custom Linux kernel to use with your installed distros. The default kernel used can be found at https://github.com/microsoft/WSL2-Linux-Kernel&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-attr&#34;&gt;kernel&lt;/span&gt;=C:\\temp\\myCustomKernel&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Sets additional kernel parameters, in this case enabling older Linux base images such as Centos 6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-attr&#34;&gt;kernelCommandLine&lt;/span&gt; = vsyscall=emulate&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Sets amount of swap storage space to 8GB, default is 25% of available RAM&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 虚拟内存&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-attr&#34;&gt;swap&lt;/span&gt;=&lt;span class=&#34;hljs-number&#34;&gt;8&lt;/span&gt;GB&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Sets swapfile path location, default is %USERPROFILE%\AppData\Local\Temp\swap.vhdx&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-attr&#34;&gt;swapfile&lt;/span&gt;=C:\\temp\\wsl-swap.vhdx&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Disable page reporting so WSL retains all allocated memory claimed from Windows and releases none back when free&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-attr&#34;&gt;pageReporting&lt;/span&gt;=&lt;span class=&#34;hljs-literal&#34;&gt;false&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Turn off default connection to bind WSL 2 localhost to Windows localhost&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-attr&#34;&gt;localhostforwarding&lt;/span&gt;=&lt;span class=&#34;hljs-literal&#34;&gt;true&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Disables nested virtualization&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-attr&#34;&gt;nestedVirtualization&lt;/span&gt;=&lt;span class=&#34;hljs-literal&#34;&gt;false&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Turns on output console showing contents of dmesg when opening a WSL 2 distro for debugging&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-attr&#34;&gt;debugConsole&lt;/span&gt;=&lt;span class=&#34;hljs-literal&#34;&gt;true&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;打开powershell输入&lt;code&gt;~&lt;/code&gt;切换目录&lt;/p&gt;
&lt;p&gt;&lt;code&gt;code .wslconfig&lt;/code&gt;编辑配置&lt;/p&gt;
&lt;figure class=&#34;highlight ini&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs ini&#34;&gt;&lt;span class=&#34;hljs-section&#34;&gt;[wsl2]&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-attr&#34;&gt;memory&lt;/span&gt;=&lt;span class=&#34;hljs-number&#34;&gt;2&lt;/span&gt;GB&lt;br&gt;&lt;span class=&#34;hljs-attr&#34;&gt;swap&lt;/span&gt;=&lt;span class=&#34;hljs-number&#34;&gt;2&lt;/span&gt;GB&lt;br&gt;&lt;span class=&#34;hljs-attr&#34;&gt;localhostForwarding&lt;/span&gt;=&lt;span class=&#34;hljs-literal&#34;&gt;true&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;WSL-配置代理&#34;&gt;&lt;a href=&#34;#WSL-配置代理&#34; class=&#34;headerlink&#34; title=&#34;WSL 配置代理&#34;&gt;&lt;/a&gt;WSL 配置代理&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;获取主机 IP      主机 IP 保存在 &amp;#x2F;etc&amp;#x2F;resolv.conf 中&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;export&lt;/span&gt; hostip=$(&lt;span class=&#34;hljs-built_in&#34;&gt;cat&lt;/span&gt; /etc/resolv.conf |grep -oP &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;(?&amp;lt;=nameserver\ ).*&amp;#x27;&lt;/span&gt;)&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;export&lt;/span&gt; https_proxy=&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;http://&lt;span class=&#34;hljs-variable&#34;&gt;$&amp;#123;hostip&amp;#125;&lt;/span&gt;:10881&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;export&lt;/span&gt; http_proxy=&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;http://&lt;span class=&#34;hljs-variable&#34;&gt;$&amp;#123;hostip&amp;#125;&lt;/span&gt;:10881&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;export&lt;/span&gt; http_proxy=&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;socks5://&lt;span class=&#34;hljs-variable&#34;&gt;$&amp;#123;hostip&amp;#125;&lt;/span&gt;:7890&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;export&lt;/span&gt; https_proxy=&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;socks5://&lt;span class=&#34;hljs-variable&#34;&gt;$&amp;#123;hostip&amp;#125;&lt;/span&gt;:7890&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;export&lt;/span&gt; all_proxy=&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;socks5://&lt;span class=&#34;hljs-variable&#34;&gt;$&amp;#123;hostip&amp;#125;&lt;/span&gt;:10880&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;export&lt;/span&gt; all_proxy=&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;http://&lt;span class=&#34;hljs-variable&#34;&gt;$&amp;#123;hostip&amp;#125;&lt;/span&gt;:10881&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;ul&gt;
&lt;li&gt;在wsl尝试用&lt;code&gt;export all_proxy&lt;/code&gt;socks5做代理感觉总是调不通, 换成http就好了  不知道是为啥&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;wsl-conf-wslconfig配置文件&#34;&gt;&lt;a href=&#34;#wsl-conf-wslconfig配置文件&#34; class=&#34;headerlink&#34; title=&#34;wsl.conf .wslconfig配置文件&#34;&gt;&lt;/a&gt;wsl.conf .wslconfig配置文件&lt;/h2&gt;&lt;p&gt;参考文档:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://docs.microsoft.com/zh-cn/windows/wsl/wsl-config&#34;&gt;WSL 中的高级设置配置&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;h2 id=&#34;wsl-conf&#34;&gt;&lt;a href=&#34;#wsl-conf&#34; class=&#34;headerlink&#34; title=&#34;wsl.conf&#34;&gt;&lt;/a&gt;wsl.conf&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;以 &lt;code&gt;/etc&lt;/code&gt; unix 文件的形式存储在分发目录中。&lt;/li&gt;
&lt;li&gt;用于按分布配置设置。 此文件中配置的设置将仅应用于包含存储此文件的目录的特定 Linux 分发版。&lt;/li&gt;
&lt;li&gt;可用于版本、WSL 1 或 WSL 2 运行的分发版。&lt;/li&gt;
&lt;li&gt;若要访问已安装的发行版的 &lt;code&gt;/etc&lt;/code&gt; 目录，请使用发行版的命令行和 &lt;code&gt;cd /&lt;/code&gt; 访问根目录，然后使用 &lt;code&gt;ls&lt;/code&gt; 列出文件或使用 &lt;code&gt;explorer.exe .&lt;/code&gt; 在 Windows 文件资源管理器中查看。 目录路径应如下所示： &lt;code&gt;/etc/wsl.conf&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;wslconfig&#34;&gt;&lt;a href=&#34;#wslconfig&#34; class=&#34;headerlink&#34; title=&#34;.wslconfig&#34;&gt;&lt;/a&gt;.wslconfig&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;存储在目录中 &lt;code&gt;%UserProfile%&lt;/code&gt; 。&lt;/li&gt;
&lt;li&gt;用于跨作为 WSL 2 版本运行的所有已安装 Linux 分发版全局配置设置。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;只能用于 WSL 2 运行的分发&lt;/strong&gt;版。 作为 WSL 1 运行的分发版不会受到此配置的影响，因为它们未作为虚拟机运行。&lt;/li&gt;
&lt;li&gt;要访问 &lt;code&gt;%UserProfile%&lt;/code&gt; 目录，请在 PowerShell 中使用 &lt;code&gt;cd ~&lt;/code&gt; 访问主目录（通常是用户配置文件 &lt;code&gt;C:\Users\&amp;lt;UserName&amp;gt;&lt;/code&gt;），或者可以打开 Windows 文件资源管理器并在地址栏中输入 &lt;code&gt;%UserProfile%&lt;/code&gt;。 目录路径应如下所示： &lt;code&gt;C:\Users\&amp;lt;UserName&amp;gt;\.wslconfig&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;wsl-conf-的配置-unix&#34;&gt;&lt;a href=&#34;#wsl-conf-的配置-unix&#34; class=&#34;headerlink&#34; title=&#34;wsl.conf 的配置 (unix )&#34;&gt;&lt;/a&gt;wsl.conf 的配置 (unix )&lt;/h3&gt;&lt;p&gt;wsl.conf 文件支持四个部分：&lt;code&gt;automount&lt;/code&gt;、&lt;code&gt;network&lt;/code&gt;、&lt;code&gt;interop&lt;/code&gt;、&lt;code&gt;user&lt;/code&gt; 、&lt;code&gt;[boot]&lt;/code&gt;。 &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;配置文件示例&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Automatically mount Windows drive when the distribution is launched&lt;/span&gt;&lt;br&gt;[automount]&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Set to true will automount fixed drives (C:/ or D:/) with DrvFs under the root directory set above. Set to false means drives won&amp;#x27;t be mounted automatically, but need to be mounted manually or with fstab.&lt;/span&gt;&lt;br&gt;enabled = &lt;span class=&#34;hljs-literal&#34;&gt;true&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Sets the directory where fixed drives will be automatically mounted. This example changes the mount location, so your C-drive would be /c, rather than the default /mnt/c. &lt;/span&gt;&lt;br&gt;root = /&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# DrvFs-specific options can be specified.  &lt;/span&gt;&lt;br&gt;options = &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;metadata,uid=1003,gid=1003,umask=077,fmask=11,case=off&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Sets the `/etc/fstab` file to be processed when a WSL distribution is launched.&lt;/span&gt;&lt;br&gt;mountFsTab = &lt;span class=&#34;hljs-literal&#34;&gt;true&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Network host settings that enable the DNS server used by WSL 2. This example changes the hostname, sets generateHosts to false, preventing WSL from the default behavior of auto-generating /etc/hosts, and sets generateResolvConf to false, preventing WSL from auto-generating /etc/resolv.conf, so that you can create your own (ie. nameserver 1.1.1.1).&lt;/span&gt;&lt;br&gt;[network]&lt;br&gt;hostname = DemoHost&lt;br&gt;generateHosts = &lt;span class=&#34;hljs-literal&#34;&gt;false&lt;/span&gt;&lt;br&gt;generateResolvConf = &lt;span class=&#34;hljs-literal&#34;&gt;false&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Set whether WSL supports interop process like launching Windows apps and adding path variables. Setting these to false will block the launch of Windows processes and block adding $PATH environment variables.&lt;/span&gt;&lt;br&gt;[interop]&lt;br&gt;enabled = &lt;span class=&#34;hljs-literal&#34;&gt;false&lt;/span&gt;&lt;br&gt;appendWindowsPath = &lt;span class=&#34;hljs-literal&#34;&gt;false&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Set the user when launching a distribution with WSL.&lt;/span&gt;&lt;br&gt;[user]&lt;br&gt;default = DemoUser&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Set a command to run when a new WSL instance launches. This example starts the Docker container service.&lt;/span&gt;&lt;br&gt;[boot]&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;command&lt;/span&gt; = service docker start&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&#34;自动装载设置-automount&#34;&gt;&lt;a href=&#34;#自动装载设置-automount&#34; class=&#34;headerlink&#34; title=&#34;自动装载设置 automount&#34;&gt;&lt;/a&gt;自动装载设置 automount&lt;/h4&gt;&lt;p&gt;节标签：&lt;code&gt;[automount]&lt;/code&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;key&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;值&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;enabled&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;boolean&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;是&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;true&lt;/code&gt; 导致固定驱动器（即 &lt;code&gt;C:/&lt;/code&gt; 或 &lt;code&gt;D:/&lt;/code&gt;）自动装载到 DrvFs 中的 &lt;code&gt;/mnt&lt;/code&gt; 下。 &lt;code&gt;false&lt;/code&gt; 表示驱动器不会自动装载，但你仍可以手动或通过 &lt;code&gt;fstab&lt;/code&gt; 装载驱动器。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;mountFsTab&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;boolean&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;是&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;true&lt;/code&gt; 设置启动 WSL 时要处理的 &lt;code&gt;/etc/fstab&lt;/code&gt;。 &amp;#x2F;etc&amp;#x2F;fstab 是可在其中声明其他文件系统的文件，类似于 SMB 共享。 因此，在启动时，可以在 WSL 中自动装载这些文件系统。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;root&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;string&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;/mnt/&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;设置固定驱动器要自动装载到的目录。 默认情况下，此设置设置为 &lt;code&gt;/mnt/&lt;/code&gt;，因此 Windows 文件系统 C 驱动器已装载到 &lt;code&gt;/mnt/c/&lt;/code&gt;。 如果更改为&lt;code&gt;/mnt/``/windir/&lt;/code&gt;，应会看到已装载到&lt;code&gt;/windir/c&lt;/code&gt;的固定 C 驱动器。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;选项&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;逗号分隔的值列表，例如 uid、gid 等，请参阅下面的自动装载选项&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;空字符串&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;下面列出了自动装载选项值，并追加到默认 DrvFs 装载选项字符串。 &lt;strong&gt;只能指定特定于 DrvFs 的选项。&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h4 id=&#34;网络设置-network&#34;&gt;&lt;a href=&#34;#网络设置-network&#34; class=&#34;headerlink&#34; title=&#34;网络设置 network&#34;&gt;&lt;/a&gt;网络设置 network&lt;/h4&gt;&lt;p&gt;节标签：&lt;code&gt;[network]&lt;/code&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;key&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;值&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;generateHosts&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;boolean&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;true&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;true&lt;/code&gt; 将 WSL 设置为生成 &lt;code&gt;/etc/hosts&lt;/code&gt;。 &lt;code&gt;hosts&lt;/code&gt; 文件包含主机名对应的 IP 地址的静态映射。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;generateResolvConf&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;boolean&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;true&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;true&lt;/code&gt; 将 WSL 设置为生成 &lt;code&gt;/etc/resolv.conf&lt;/code&gt;。 &lt;code&gt;resolv.conf&lt;/code&gt; 包含能够将给定主机名解析为其 IP 地址的 DNS 列表。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;hostname&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;string&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Windows 主机名&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;设置要用于 WSL 分发的主机名。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h4 id=&#34;互操作设置-interop&#34;&gt;&lt;a href=&#34;#互操作设置-interop&#34; class=&#34;headerlink&#34; title=&#34;互操作设置 interop&#34;&gt;&lt;/a&gt;互操作设置 interop&lt;/h4&gt;&lt;p&gt;节标签：&lt;code&gt;[interop]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这些选项在预览体验成员内部版本 17713 和更高版本中可用。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;key&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;值&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;enabled&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;boolean&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;true&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;设置此键可确定 WSL 是否支持启动 Windows 进程。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;appendWindowsPath&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;boolean&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;true&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;设置此键可确定 WSL 是否会将 Windows 路径元素添加到 $PATH 环境变量。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h4 id=&#34;用户设置-user&#34;&gt;&lt;a href=&#34;#用户设置-user&#34; class=&#34;headerlink&#34; title=&#34;用户设置 user&#34;&gt;&lt;/a&gt;用户设置 user&lt;/h4&gt;&lt;p&gt;节标签：&lt;code&gt;[user]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这些选项在版本 18980 及更高版本中可用。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;key&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;值&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;default&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;字符串&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;首次运行时创建的初始用户名&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;设置此键指定在首次启动 WSL 会话时以哪个用户身份运行。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h4 id=&#34;启动设置-boot&#34;&gt;&lt;a href=&#34;#启动设置-boot&#34; class=&#34;headerlink&#34; title=&#34;启动设置 boot&#34;&gt;&lt;/a&gt;启动设置 boot&lt;/h4&gt;&lt;p&gt;启动设置仅适用于 Windows 11 和 Server 2022。&lt;/p&gt;
&lt;p&gt;节标签：&lt;code&gt;[boot]&lt;/code&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;key&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;值&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;命令&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;string&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;“”&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;你希望在 WSL 实例启动时运行的命令字符串。 此命令以根用户身份运行。 例如： &lt;code&gt;service docker start&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h3 id=&#34;wslconfig-的配置-windows&#34;&gt;&lt;a href=&#34;#wslconfig-的配置-windows&#34; class=&#34;headerlink&#34; title=&#34;.wslconfig 的配置 (windows)&#34;&gt;&lt;/a&gt;.wslconfig 的配置 (windows)&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;  全局 &lt;code&gt;.wslconfig&lt;/code&gt; 配置选项仅适用于在 Windows 内部版本 19041 及更高版本中作为 WSL 2 运行的分发版。 请记住，可能需要运行 &lt;code&gt;wsl --shutdown&lt;/code&gt; 来关闭 WSL 2 VM，然后重启 WSL 实例以使这些更改生效。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;配置文件示例&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Settings apply across all Linux distros running on WSL 2&lt;/span&gt;&lt;br&gt;[wsl2]&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Limits VM memory to use no more than 4 GB, this can be set as whole numbers using GB or MB&lt;/span&gt;&lt;br&gt;memory=4GB &lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Sets the VM to use two virtual processors&lt;/span&gt;&lt;br&gt;processors=2&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Specify a custom Linux kernel to use with your installed distros. The default kernel used can be found at https://github.com/microsoft/WSL2-Linux-Kernel&lt;/span&gt;&lt;br&gt;kernel=C:\\temp\\myCustomKernel&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Sets additional kernel parameters, in this case enabling older Linux base images such as Centos 6&lt;/span&gt;&lt;br&gt;kernelCommandLine = vsyscall=&lt;span class=&#34;hljs-built_in&#34;&gt;emulate&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Sets amount of swap storage space to 8GB, default is 25% of available RAM&lt;/span&gt;&lt;br&gt;swap=8GB&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Sets swapfile path location, default is %USERPROFILE%\AppData\Local\Temp\swap.vhdx&lt;/span&gt;&lt;br&gt;swapfile=C:\\temp\\wsl-swap.vhdx&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Disable page reporting so WSL retains all allocated memory claimed from Windows and releases none back when free&lt;/span&gt;&lt;br&gt;pageReporting=&lt;span class=&#34;hljs-literal&#34;&gt;false&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Turn off default connection to bind WSL 2 localhost to Windows localhost&lt;/span&gt;&lt;br&gt;localhostforwarding=&lt;span class=&#34;hljs-literal&#34;&gt;true&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Disables nested virtualization&lt;/span&gt;&lt;br&gt;nestedVirtualization=&lt;span class=&#34;hljs-literal&#34;&gt;false&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Turns on output console showing contents of dmesg when opening a WSL 2 distro for debugging&lt;/span&gt;&lt;br&gt;debugConsole=&lt;span class=&#34;hljs-literal&#34;&gt;true&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;节标签：&lt;code&gt;[wsl2]&lt;/code&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;key&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;值&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;内核 (kernel)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;字符串&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Microsoft 内置内核提供的收件箱&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;自定义 Linux 内核的绝对 Windows 路径。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;内存&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;大小&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Windows 上总内存的 50% 或 8GB，以较小者为准；在 20175 之前的版本上：Windows 上总内存的 80%&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;要分配给 WSL 2 VM 的内存量。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;处理器&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;数字&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Windows 上相同数量的处理器&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;要分配给 WSL 2 VM 的处理器数量。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;localhostForwarding&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;boolean&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;true&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;一个布尔值，用于指定绑定到 WSL 2 VM 中的通配符或 localhost 的端口是否应可通过 &lt;code&gt;localhost:port&lt;/code&gt; 从主机连接。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;kernelCommandLine&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;字符串&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;空白&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;其他内核命令行参数。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;swap&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;大小&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Windows 上 25% 的内存大小四舍五入到最接近的 GB&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;要向 WSL 2 VM 添加的交换空间量，0 表示无交换文件。 交换存储是基于磁盘的 RAM，当内存需求超过硬件设备的限制时使用。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;swapFile&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;字符串&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;%USERPROFILE%\AppData\Local\Temp\swap.vhdx&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;交换虚拟硬盘的绝对 Windows 路径。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;pageReporting&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;boolean&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;true&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;默认设置 &lt;code&gt;true&lt;/code&gt; 使 Windows 能够回收分配给 WSL 2 虚拟机的未使用的内存。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;guiApplications&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;boolean*&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;true&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;一个布尔值，用于在 WSL 中打开或关闭对 GUI 应用程序 (&lt;a href=&#34;https://github.com/microsoft/wslg&#34;&gt;WSLg&lt;/a&gt;) 的支持。 仅适用于Windows 11。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;debugConsole&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;boolean*&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;false&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;一个布尔值，用于在 WSL 2 发行版实例启动时打开显示 &lt;code&gt;dmesg&lt;/code&gt; 内容的输出控制台窗口。 仅适用于Windows 11。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;nestedVirtualization&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;boolean*&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;true&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;用于打开或关闭嵌套虚拟化的布尔值，使其他嵌套 VM 能够在 WSL 2 中运行。 仅适用于Windows 11。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;vmIdleTimeout&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;number*&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;60000&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;VM 在关闭之前处于空闲状态的毫秒数。 仅适用于Windows 11。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;具有 &lt;code&gt;path&lt;/code&gt; 值的条目必须是带有转义反斜杠的 Windows 路径，例如：&lt;code&gt;C:\\Temp\\myCustomKernel&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;具有 &lt;code&gt;size&lt;/code&gt; 值的条目必须是后跟单位的大小，例如 &lt;code&gt;8GB&lt;/code&gt; 或 &lt;code&gt;512MB&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;值类型后具有 * 的条目仅在Windows 11可用。&lt;/p&gt;
&lt;h2 id=&#34;WSL导出与迁移&#34;&gt;&lt;a href=&#34;#WSL导出与迁移&#34; class=&#34;headerlink&#34; title=&#34;WSL导出与迁移&#34;&gt;&lt;/a&gt;WSL导出与迁移&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;   我们可以选择手动安装wsl, 这样我们可以避免将wsl安装在c盘, 手动安装的时候, 将下载下来的&lt;code&gt;&amp;lt;distro&amp;gt;.appx&lt;/code&gt;文件直接解压, 例如将&lt;code&gt;Ubuntu_1604.2019.523.0_x64.appx&lt;/code&gt;解压, 解压出来的文件夹内就包含了&lt;code&gt;ubuntu1604.exe&lt;/code&gt;, 运行他就可以启动wsl, 这样可以避免wsl的迁移.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;查看WSL分发版本&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在&lt;code&gt;Windows PowerShell&lt;/code&gt;中输入如下命令, 查看当前子系统的状态和版本信息.&lt;/p&gt;
&lt;figure class=&#34;highlight ada&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs ada&#34;&gt;wsl -l &lt;span class=&#34;hljs-comment&#34;&gt;--all  -v&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;结果如下:&lt;/p&gt;
&lt;figure class=&#34;highlight crmsh&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs crmsh&#34;&gt;  NAME      STATE           &lt;span class=&#34;hljs-keyword&#34;&gt;VERSION&lt;/span&gt;&lt;br&gt;* Ubuntu    Running         &lt;span class=&#34;hljs-number&#34;&gt;2&lt;/span&gt;&lt;br&gt;  Debian    &lt;span class=&#34;hljs-literal&#34;&gt;Stopped&lt;/span&gt;         &lt;span class=&#34;hljs-number&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;导出分发版为tar文件&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;递归创建文件夹&lt;/span&gt;&lt;br&gt;mkdir -p d:\system\wsl\ubuntu20.04\&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;进入文件夹&lt;/span&gt;&lt;br&gt;cd d:\system\wsl\ubuntu20.04\&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;导出tar包 到当前目录&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;(如果显示的子系统的`NAME`是带有版本号的话需要注意的是这里第二个参数就要带上参数, 例如`Ubuntu-20.04`)&lt;/span&gt;&lt;br&gt;wsl --export Ubuntu .\ubuntu20.04.tar&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;blockquote&gt;
  &lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;--export &amp;lt;发行版&amp;gt; &amp;lt;FileName&amp;gt; [选项]&lt;br&gt;        将发行版导出为 tar 文件。&lt;br&gt;        对于标准输出，文件名可以为 -。&lt;br&gt;&lt;br&gt;        选项:&lt;br&gt;            --vhd&lt;br&gt;                指定该发行版应导出为 .vhdx 文件。&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;注销当前分发版&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;wsl --unregister Ubuntu&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;重新导入并安装WSL&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;wsl --import Ubuntu .\ .\ubuntu20.04.tar --version 2&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;blockquote&gt;
  &lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;--import &amp;lt;发行版&amp;gt; &amp;lt;InstallLocation&amp;gt; &amp;lt;FileName&amp;gt; [选项]&lt;br&gt;        将指定的 tar 文件作为新发行版导入。&lt;br&gt;        对于标准输入，文件名可以为 -。&lt;br&gt;&lt;br&gt;        选项:&lt;br&gt;            --version &amp;lt;版本&amp;gt;&lt;br&gt;                指定新发行版要使用的版本。&lt;br&gt;&lt;br&gt;            --vhd&lt;br&gt;                指定提供的文件是 .vhdx 文件，而不是 tar 文件。&lt;br&gt;                此操作会在指定的安装位置复制 .vhdx 文件。&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;设置默认登陆用户为安装时用户名&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  (如果显示的子系统的&lt;code&gt;NAME&lt;/code&gt;是带有版本号的话需要注意的是这里第二个参数就要带上参数, 例如&lt;code&gt;Ubuntu-20.04&lt;/code&gt;)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;ubuntu config --default-user Username&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;删除tar文件(可选)&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;rm .\ubuntu20.04.tar&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://www.oikiou.top/2021/ee60585b/</guid>
            <title>Synology 群晖</title>
            <link>https://www.oikiou.top/2021/ee60585b/</link>
            <category>linux</category>
            <category>synology</category>
            <pubDate>Mon, 18 Oct 2021 22:57:15 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;群晖&#34;&gt;&lt;a href=&#34;#群晖&#34; class=&#34;headerlink&#34; title=&#34;群晖&#34;&gt;&lt;/a&gt;群晖&lt;/h1&gt;&lt;h1 id=&#34;安装&#34;&gt;&lt;a href=&#34;#安装&#34; class=&#34;headerlink&#34; title=&#34;安装&#34;&gt;&lt;/a&gt;安装&lt;/h1&gt;&lt;h2 id=&#34;资源及参考链接&#34;&gt;&lt;a href=&#34;#资源及参考链接&#34; class=&#34;headerlink&#34; title=&#34;资源及参考链接&#34;&gt;&lt;/a&gt;资源及参考链接&lt;/h2&gt;&lt;p&gt;&lt;a href=&#34;https://www.openos.org/threads/dsm-6-2-3-2020-12-27.29/&#34;&gt;https://www.openos.org/threads/dsm-6-2-3-2020-12-27.29/&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;准备工作&#34;&gt;&lt;a href=&#34;#准备工作&#34; class=&#34;headerlink&#34; title=&#34;准备工作&#34;&gt;&lt;/a&gt;准备工作&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;引导系统装哪里？&lt;/strong&gt;&lt;br&gt;非常关键的问题，DSM采用系统和数据相分离的结构，也就是说引导系统需要独立安装在一个设备上，通常是U盘&amp;#x2F;SD&amp;#x2F;TF卡、或者SSD硬盘上。数据需要额外安装独立的硬盘上。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;引导系统安装盘 (U盘&amp;#x2F;USB flash drive&amp;#x2F;随身碟)&lt;/strong&gt;&lt;br&gt;无论是U盘还是TF卡，其实128MB或以上就足够了，USB 2.0&amp;#x2F;3.0都可以。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;数据存储硬盘 (硬盘)&lt;/strong&gt;&lt;br&gt;机械硬盘或者固态硬盘都可以，这个没有限制，容量当然越大越好。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;一般来说安装黑群晖至少需要两个文件, 一个是黑群晖的引导文件, 一个是群晖DSM的系统文件.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;步骤&#34;&gt;&lt;a href=&#34;#步骤&#34; class=&#34;headerlink&#34; title=&#34;步骤&#34;&gt;&lt;/a&gt;步骤&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;  黑群晖系统: DSM 6.2.0–6.2.3&lt;br&gt;  引导版本: 1.04b (首选推荐版本)&lt;br&gt;  针对机型: DS918+&lt;br&gt;  引导方式: 传统BIOS和UEFI&lt;br&gt;  引导下载地址&lt;br&gt;  &lt;a href=&#34;https://www.openos.org/downloads/synology-dsm-6-2-1-loader-v1-04b.15/&#34;&gt;https://www.openos.org/downloads/synology-dsm-6-2-1-loader-v1-04b.15/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;  DS918+ DSM 6.2.3-25426 Update2 系统&lt;br&gt;  &lt;a href=&#34;https://global.download.synology.com/download/DSM/release/6.2.3/25426/DSM_DS918+_25426.pat&#34;&gt;https://global.download.synology.com/download/DSM/release/6.2.3/25426/DSM_DS918+_25426.pat&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;  其他DSM系统版本请看这里&lt;br&gt;  &lt;a href=&#34;https://archive.synology.com/download&#34;&gt;https://archive.synology.com/download&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;下载群晖的引导文件, 推荐下载&lt;code&gt;v1.04b.for.dms.6.2.1.synoboot-ds918.zip&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;http://down.nas2x.com/synology/dsm/6.2/synoboot/&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 里面有三个文件&lt;/span&gt;&lt;br&gt;dsm.6.2.synoboot_ds3615xs.1.03b.zip                02-Aug-2018 10:43     17M&lt;br&gt;dsm.6.2.synoboot_ds3617xs.1.03b.zip                02-Aug-2018 10:42     20M&lt;br&gt;v1.04b.for.dms.6.2.1.synoboot-ds918.zip            25-Jan-2019 18:30     21M&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;下载群晖的系统, 根据上面的引导下载系统, 上面选的是&lt;code&gt;DS918+&lt;/code&gt;的话, 这里下载&lt;code&gt;DS918+&lt;/code&gt;就好.&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# DS918+&lt;/span&gt;&lt;br&gt;https://global.download.synology.com/download/DSM/release/6.2.3/25426/DSM_DS918+_25426.pat&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 其他DSM系统&lt;/span&gt;&lt;br&gt;https://archive.synology.com/download&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;修改引导程序配置文件,&lt;/p&gt;
&lt;p&gt;使用&lt;code&gt;ChipEasy&lt;/code&gt;或者&lt;code&gt;ChipGenius&lt;/code&gt;查找到U盘的VID和PID。&lt;/p&gt;
&lt;p&gt;以下图为例，这个U盘的VID是0930，PID是6544。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;请记录好这两个值。下面修改配置文件需要用到。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2021/ee60585b/07.png&#34; alt=&#34;[IMG]&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;编辑配置文件grub.cfg.&lt;/p&gt;
&lt;p&gt;打开DiskGenius, 在顶部选择硬盘-打开虚拟硬盘文件, 选择刚刚下载的&lt;code&gt;.img&lt;/code&gt;引导文件并打开.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2021/ee60585b/kc6jjxmd.png&#34; alt=&#34;[IMG]&#34;&gt;&lt;/p&gt;
&lt;p&gt;在左边找到刚刚打开的img文件, 点击展开&lt;code&gt;ESP-&amp;gt;grub&lt;/code&gt;, 在右边找到&lt;code&gt;grub.cfg&lt;/code&gt;, 选择复制到桌面.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2021/ee60585b/kccTMt.md.png&#34; alt=&#34;[IMG]&#34;&gt;&lt;/p&gt;
&lt;p&gt;使用文本编辑器修改&lt;code&gt;line22-line25&lt;/code&gt;的数据,&lt;/p&gt;
&lt;p&gt;需要注意的是&lt;code&gt;VID&lt;/code&gt;和&lt;code&gt;PID&lt;/code&gt;必须要和U盘的数值匹配好.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SN&lt;/code&gt;和&lt;code&gt;MAC1&lt;/code&gt;是在洗半白的时候需要修改的数值, 是非必须修改的.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;set vid&amp;#x3D;0x058f U盘的VID 实体机必须修改，虚拟机无需修改&lt;br&gt;set pid&amp;#x3D;0x6387 U盘的PID 实体机必须修改，虚拟机无需修改&lt;br&gt;set sn&amp;#x3D;A8ODN02468 序列号 可以不修改&lt;br&gt;set mac1&amp;#x3D;0011322CA603 mac地址 可以不修改&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;注意:vid和pid的0x是十六进制的意思是不要删除掉的，只需要修改后面的4位.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2021/ee60585b/06.png&#34; alt=&#34;[IMG]&#34;&gt;&lt;/p&gt;
&lt;p&gt;回到DiskGenius内将原来的&lt;code&gt;grub.cfg&lt;/code&gt;文件替换掉, 我这里是先将&lt;code&gt;img&lt;/code&gt;镜像里面的&lt;code&gt;grub.cfg&lt;/code&gt;文件删除, 再右键选择新增文件将编辑好的&lt;code&gt;grub.cfg&lt;/code&gt;文件放入其中.&lt;/p&gt;
&lt;p&gt;关闭DiskGenius完成&lt;code&gt;img&lt;/code&gt;引导的修改.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;制作引导U盘&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;使用&lt;code&gt;Win32 Disk Imager&lt;/code&gt;磁盘映像工具将&lt;code&gt;img&lt;/code&gt;引导文件写入U盘内.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  下载地址:&lt;a href=&#34;https://sourceforge.net/projects/win32diskimager/&#34;&gt;https://sourceforge.net/projects/win32diskimager/&lt;/a&gt;&lt;br&gt;  中文版:&lt;a href=&#34;https://www.openos.org/downloads/win32-disk-imager.2/&#34;&gt;https://www.openos.org/downloads/win32-disk-imager.2/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;先在软件界面右侧设备(Device) 部分选择U盘的盘符。&lt;br&gt;（建议在操作前移除所有其他的USB存储设备，以防选择错误导致其他U盘或移动硬盘数据丢失）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;再点击软件界面 映像文件(Image File)右侧蓝色文件夹图标，选择之前下载的synoboot.img文件。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;最后再点击写入(Write)。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;/2021/ee60585b/w11.png&#34; alt=&#34;[IMG]&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;安装群晖系统&lt;/p&gt;
&lt;p&gt;插入U盘，并且在主板上设置默认从U盘启动&lt;/p&gt;
&lt;p&gt;默认选择从U盘启动后选择第1个选项&lt;code&gt;DS3617xs 6.1 Baremetal with Jun&amp;#39;s Mod v1.02-alpha&lt;/code&gt;按回车。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2021/ee60585b/2017041711.png&#34; alt=&#34;[IMG]&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;找到设备IP地址&lt;/p&gt;
&lt;p&gt;这里需要稍微等一等提示&lt;code&gt;Please open [http://find.synology.com](http://find.synology.com/) to continue&lt;/code&gt;后等个1-2分钟在浏览器里面输入&lt;a href=&#34;http://find.synology.com/&#34;&gt;http://find.synology.com/&lt;/a&gt; ，搜索DSM，如果没有找到，那么使用SynologyAssistant查找. &lt;a href=&#34;https://cndl.synology.cn/download/Tools/Assistant/6.1-15030/Windows/synology-assistant-6.1-15030.exe&#34;&gt;点击下载Windows版本&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;能进路由器管理页面的, 较好的方案是看一下群晖获取的IP是多少, 浏览器直接进去这个&lt;code&gt;IP:5000&lt;/code&gt;的网页即可, 免去搜寻的麻烦.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  若多次测试还是无法搜索到群晖，那可能是网卡不支持,&lt;br&gt;  详情请查看DSM黑群晖网卡支持列表&lt;br&gt;  &lt;a href=&#34;https://www.openos.org/threads/dsm-6-1-supported-drivers.42/&#34;&gt;https://www.openos.org/threads/dsm-6-1-supported-drivers.42/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;/2021/ee60585b/201704zoz.png&#34; alt=&#34;[IMG]&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;上传系统文件.&lt;/p&gt;
&lt;p&gt;根据提示继续，点击&lt;code&gt;手动安装&lt;/code&gt;后选择之前下载的pat文件，然后再点击&lt;code&gt;立即安装&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2021/ee60585b/201704opo.png&#34; alt=&#34;[IMG]&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2021/ee60585b/201704ada.png&#34; alt=&#34;[IMG]&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;安装之后完成一些配置后就可以进入系统界面了.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;安装后的注意事项&#34;&gt;&lt;a href=&#34;#安装后的注意事项&#34; class=&#34;headerlink&#34; title=&#34;安装后的注意事项&#34;&gt;&lt;/a&gt;安装后的注意事项&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;  &lt;strong&gt;安装完成后的基本设置和注意事项&lt;/strong&gt;&lt;br&gt;  1,不要升级，不要升级，不要升级。可以去控制面板下面的-更新和还原里面设置。&lt;br&gt;  2,还是不要升级，去计划任何里面关闭DSM自动更新选项。&lt;br&gt;  3,在存储空间管理员里面设置存储空间后才可以进行其他的操作，如共享文件夹或安装其他套件。&lt;br&gt;  4,DSM 6.x配置文件grub.cfg修改: &lt;a href=&#34;https://www.openos.org/threads/dsm-6-x-grub-cfg-mac-sn.36/&#34;&gt;https://www.openos.org/threads/dsm-6-x-grub-cfg-mac-sn.36/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;  群辉Synology DSM 添加硬盘&amp;#x2F;存储空间的方法&lt;br&gt;  &lt;a href=&#34;https://www.openos.org/threads/synology-dsm-hdd.30/&#34;&gt;https://www.openos.org/threads/synology-dsm-hdd.30/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;  6.1驱动支持列表&lt;br&gt;  &lt;a href=&#34;https://www.openos.org/threads/dsm-6-1-supported-drivers.42/&#34;&gt;https://www.openos.org/threads/dsm-6-1-supported-drivers.42/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;  经过测试，引导文件支持DSM 6.1.1-15101&lt;br&gt;  但是不支持从老版本升级升级，仅限全新安装&lt;br&gt;  安装后更新到update 2没有问题&lt;br&gt;  &lt;a href=&#34;https://www.openos.org/downloads/xpenology-dsm-6-1-1.8/history&#34;&gt;https://www.openos.org/downloads/xpenology-dsm-6-1-1.8/history&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;  安装完成后可以下载一些相关的手机端应用&lt;br&gt;  DS Finder&lt;br&gt;  DS File&lt;br&gt;  DS photo&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;Note&#34;&gt;&lt;a href=&#34;#Note&#34; class=&#34;headerlink&#34; title=&#34;Note&#34;&gt;&lt;/a&gt;Note&lt;/h1&gt;&lt;h2 id=&#34;SSH访问启动盘&#34;&gt;&lt;a href=&#34;#SSH访问启动盘&#34; class=&#34;headerlink&#34; title=&#34;SSH访问启动盘&#34;&gt;&lt;/a&gt;SSH访问启动盘&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;mkdir /mnt/boot&lt;br&gt;cd /dev&lt;br&gt;sudo mount -t vfat synoboot1 /mnt/boot&lt;br&gt;cd /mnt/boot&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;半洗白-SN&#34;&gt;&lt;a href=&#34;#半洗白-SN&#34; class=&#34;headerlink&#34; title=&#34;半洗白 SN&#34;&gt;&lt;/a&gt;半洗白 SN&lt;/h2&gt;&lt;h3 id=&#34;前言&#34;&gt;&lt;a href=&#34;#前言&#34; class=&#34;headerlink&#34; title=&#34;前言&#34;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;全黑版本的群晖VideoStation不能离线转码，PhotoStation和Moments的略缩图和人像识别也会有问题&lt;/li&gt;
&lt;li&gt;半洗白就是转码和缩略图一类的可用&lt;/li&gt;
&lt;li&gt;全白就是多了QC，这个就没必要了(白嫖个系统就好了,就不要去嫖别人的服务器了)&lt;/li&gt;
&lt;li&gt;主要通过Docker+DDSM来获得SN&lt;/li&gt;
&lt;li&gt;群辉新版的Docker 18.09.0-0506已经关闭了DDSM安装，可下载17.05.0版本的Docker&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;步骤-1&#34;&gt;&lt;a href=&#34;#步骤-1&#34; class=&#34;headerlink&#34; title=&#34;步骤&#34;&gt;&lt;/a&gt;步骤&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;下载17.05.0的Docker，可以在&lt;a href=&#34;https://archive.synology.com/download/Package/Docker/17.05.0-0401&#34;&gt;群晖官网下载&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;下载DDSM，可在&lt;a href=&#34;https://archive.synology.com/download/Os/DSM/6.2.3-25426&#34;&gt;群晖官网下载&lt;/a&gt;，注意要对应自己DSM的版本。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;首先在套件中心点手动安装把第一步下载的17.05.0的Docker放进去。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;打开Docker-左侧DSM-点击新增-下一步-下一步-下一步-手动上传，把刚刚下载的DDSM放进去，等待他安装完成。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;安装完成后，进入DDSM群晖的控制面板。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在信息栏可看到SN和MAC，复制DDSM的SN和MAC保存下来。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;SSH接入DSM群晖，挂载启动盘BOOT，修改&lt;code&gt;/grub/grub.cfg&lt;/code&gt;文件。&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;挂载启动盘BOOT&lt;/span&gt;&lt;br&gt;mkdir /mnt/boot&lt;br&gt;cd /dev&lt;br&gt;sudo mount -t vfat synoboot1 /mnt/boot&lt;br&gt;cd /mnt/boot&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;重启。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;/2021/ee60585b/image-20211018141146176.png&#34; alt=&#34;image-20211018141146176&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;半洗白后moments人脸识别不出来&#34;&gt;&lt;a href=&#34;#半洗白后moments人脸识别不出来&#34; class=&#34;headerlink&#34; title=&#34;半洗白后moments人脸识别不出来&#34;&gt;&lt;/a&gt;半洗白后moments人脸识别不出来&lt;/h2&gt;&lt;h3 id=&#34;原因&#34;&gt;&lt;a href=&#34;#原因&#34; class=&#34;headerlink&#34; title=&#34;原因&#34;&gt;&lt;/a&gt;原因&lt;/h3&gt;&lt;p&gt;当群晖系统升级到6.22-24922以后，Moments也升级到了1.3.X，新的bug也随着版本升级来了”人物或者主题经常识别不出来“，经查日志后发现是Moments1.3插件有bug引导的，有问题的插件为“&lt;strong&gt;libsynophoto-plugin-detection.so&lt;/strong&gt;”，经测试该插件在Moments1.2版本中是正常的。&lt;/p&gt;
&lt;h3 id=&#34;步骤-2&#34;&gt;&lt;a href=&#34;#步骤-2&#34; class=&#34;headerlink&#34; title=&#34;步骤&#34;&gt;&lt;/a&gt;步骤&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;群晖上启用SSH，并将moments停用&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;MobaXterm连接群晖，启用root登录&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;sudo -i&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;vi /etc/ssh/sshd_config&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;找到#PermitRootLogin prohibit password，这一行最后，按回车，然后输入 &lt;code&gt;PermitRootLogin yes&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;修改root密码&lt;code&gt;synouser --setpw root 你的密码&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;重启&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;用root重新登录，将libsynophoto-plugin-detection.so插件替换掉&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;找到目录：&amp;#x2F;var&amp;#x2F;packages&amp;#x2F;SynologyMoments&amp;#x2F;target&amp;#x2F;usr&amp;#x2F;lib&amp;#x2F;libsynophoto-plugin-detection.so&lt;/li&gt;
&lt;li&gt;将原文件先备份一下&lt;/li&gt;
&lt;li&gt;用现有新文件将他替换掉&lt;/li&gt;
&lt;li&gt;新文件权限修改一下&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;将moments启用，问题解决&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;参考资料&#34;&gt;&lt;a href=&#34;#参考资料&#34; class=&#34;headerlink&#34; title=&#34;参考资料&#34;&gt;&lt;/a&gt;参考资料&lt;/h3&gt;&lt;p&gt;&lt;a href=&#34;https://www.zhihu.com/question/428454266/answer/1681110862?ivk_sa=1024320u&#34;&gt;https://www.zhihu.com/question/428454266/answer/1681110862?ivk_sa=1024320u&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/weixin_36059505/article/details/112766321&#34;&gt;https://blog.csdn.net/weixin_36059505/article/details/112766321&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;群晖安装-ipkg-包管理&#34;&gt;&lt;a href=&#34;#群晖安装-ipkg-包管理&#34; class=&#34;headerlink&#34; title=&#34;群晖安装 ipkg 包管理&#34;&gt;&lt;/a&gt;群晖安装 ipkg 包管理&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;仅适用于x86平台，ARM平台需要修改链接&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;以 root 用户执行&lt;/span&gt;&lt;br&gt;sudo -i&lt;br&gt;cd /volume1/@tmp&lt;br&gt;wget http://ipkg.nslu2-linux.org/feeds/optware/syno-i686/cross/unstable/syno-i686-bootstrap_1.2-7_i686.xsh&lt;br&gt;chmod +x syno-i686-bootstrap_1.2-7_i686.xsh&lt;br&gt;sh syno-i686-bootstrap_1.2-7_i686.xsh&lt;br&gt;rm syno-i686-bootstrap_1.2-7_i686.xsh&lt;br&gt;ipkg update&lt;br&gt;reboot&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&#34;CPU频率调整&#34;&gt;&lt;a href=&#34;#CPU频率调整&#34; class=&#34;headerlink&#34; title=&#34;CPU频率调整&#34;&gt;&lt;/a&gt;CPU频率调整&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Linux的&amp;#x2F;sys&amp;#x2F;devices&amp;#x2F;system&amp;#x2F;cpu&amp;#x2F;cpu*&amp;#x2F;cpufreq目录存储着第*个CPU的一些参数，例如最小最大平均频率，bios限制频率。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;使用如下命令可以查看支持的工作模式：&lt;/p&gt;
 &lt;figure class=&#34;highlight awk&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs awk&#34;&gt;cat &lt;span class=&#34;hljs-regexp&#34;&gt;/sys/&lt;/span&gt;devices&lt;span class=&#34;hljs-regexp&#34;&gt;/system/&lt;/span&gt;cpu&lt;span class=&#34;hljs-regexp&#34;&gt;/cpu0/&lt;/span&gt;cpufreq/scaling_available_governors&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;模式&lt;/th&gt;
&lt;th&gt;介绍&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;powersave&lt;/td&gt;
&lt;td&gt;只会保持最低频率，节能省电&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;userspace&lt;/td&gt;
&lt;td&gt;自定义频率&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ondemand&lt;/td&gt;
&lt;td&gt;一有cpu计算量的任务，就会立即达到最大频率运行，等执行完毕就立即回到最低频率&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;conservative&lt;/td&gt;
&lt;td&gt;根据负载状态自动在频率上下限调整&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;performance&lt;/td&gt;
&lt;td&gt;保持以最大频率运行&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;通过下面指令可以看第*个CPU核心的工作状态，&lt;/p&gt;
 &lt;figure class=&#34;highlight awk&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs awk&#34;&gt;cat &lt;span class=&#34;hljs-regexp&#34;&gt;/sys/&lt;/span&gt;devices&lt;span class=&#34;hljs-regexp&#34;&gt;/system/&lt;/span&gt;cpu&lt;span class=&#34;hljs-regexp&#34;&gt;/cpu*/&lt;/span&gt;cpufreq/scaling_governor&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;安装cpufreq-info：&lt;/p&gt;
&lt;figure class=&#34;highlight cmake&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs cmake&#34;&gt;ipkg update&lt;br&gt;ipkg &lt;span class=&#34;hljs-keyword&#34;&gt;install&lt;/span&gt; cpufrequtils&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;查看CPU频率和模式&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;cpufreq-info&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;修改模式：&lt;/p&gt;
&lt;figure class=&#34;highlight dos&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs dos&#34;&gt;cpufreq-&lt;span class=&#34;hljs-built_in&#34;&gt;set&lt;/span&gt; -c * -g &lt;span class=&#34;hljs-built_in&#34;&gt;MODE&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;例如将四个核心全部ondemand：&lt;/p&gt;
&lt;figure class=&#34;highlight gams&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs gams&#34;&gt;cpufreq-&lt;span class=&#34;hljs-keyword&#34;&gt;set&lt;/span&gt; -c &lt;span class=&#34;hljs-comment&#34;&gt;0 -g ondemand&lt;/span&gt;&lt;br&gt;cpufreq-&lt;span class=&#34;hljs-keyword&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;hljs-comment&#34;&gt;-c 1 -g ondemand&lt;/span&gt;&lt;br&gt;cpufreq-&lt;span class=&#34;hljs-keyword&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;hljs-comment&#34;&gt;-c 2 -g ondemand&lt;/span&gt;&lt;br&gt;cpufreq-&lt;span class=&#34;hljs-keyword&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;hljs-comment&#34;&gt;-c 3 -g ondemand&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;为了下次开机也自动生效，可以手动添加启动脚本。将其存成.sh，开启启动即可&lt;/p&gt;
&lt;figure class=&#34;highlight gradle&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs gradle&#34;&gt;#&lt;span class=&#34;hljs-regexp&#34;&gt;/bin/&lt;/span&gt;bash&lt;br&gt;&lt;span class=&#34;hljs-regexp&#34;&gt;/opt/&lt;/span&gt;bin/cpufreq-set -c &lt;span class=&#34;hljs-number&#34;&gt;0&lt;/span&gt; -g ondemand&lt;br&gt;&lt;span class=&#34;hljs-regexp&#34;&gt;/opt/&lt;/span&gt;bin/cpufreq-set -c &lt;span class=&#34;hljs-number&#34;&gt;1&lt;/span&gt; -g ondemand&lt;br&gt;&lt;span class=&#34;hljs-regexp&#34;&gt;/opt/&lt;/span&gt;bin/cpufreq-set -c &lt;span class=&#34;hljs-number&#34;&gt;2&lt;/span&gt; -g ondemand&lt;br&gt;&lt;span class=&#34;hljs-regexp&#34;&gt;/opt/&lt;/span&gt;bin/cpufreq-set -c &lt;span class=&#34;hljs-number&#34;&gt;3&lt;/span&gt; -g ondemand&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&#34;lm-sensors-风扇控制&#34;&gt;&lt;a href=&#34;#lm-sensors-风扇控制&#34; class=&#34;headerlink&#34; title=&#34;lm-sensors 风扇控制&#34;&gt;&lt;/a&gt;lm-sensors 风扇控制&lt;/h2&gt;&lt;p&gt;执行安装命令&lt;/p&gt;
&lt;figure class=&#34;highlight cmake&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs cmake&#34;&gt;ipkg &lt;span class=&#34;hljs-keyword&#34;&gt;install&lt;/span&gt; lm-sensors&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;查看温度&lt;/p&gt;
&lt;figure class=&#34;highlight ebnf&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs ebnf&#34;&gt;&lt;span class=&#34;hljs-attribute&#34;&gt;sensors&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;配置风扇控制，这块主要的目的只检测风扇在那一路，一般主板会涉及到多个风扇，但不一定都会安装，所以通过pwmconfig来检测与测试风扇的转速控制。&lt;/p&gt;
&lt;figure class=&#34;highlight ebnf&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs ebnf&#34;&gt;&lt;span class=&#34;hljs-attribute&#34;&gt;sudo pwmconfig&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;使用fancontrol自动控制风扇转速，他的原理就是定时执行脚本，监控CPU温度、根据不同的温度区间控制PWM值，从而改变风扇的转速。&lt;br&gt;当转速降低了后，噪音自然就解决了。&lt;/p&gt;
&lt;p&gt;fancontrol会依赖pwmconfig命令生成的配置文件。&lt;/p&gt;
&lt;figure class=&#34;highlight awk&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs awk&#34;&gt;&lt;span class=&#34;hljs-regexp&#34;&gt;/etc/&lt;/span&gt;fancontrol&lt;br&gt;&lt;br&gt;-----------配置内容如下--------------&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Configuration file generated by pwmconfig, changes will be lost&lt;/span&gt;&lt;br&gt;INTERVAL=&lt;span class=&#34;hljs-number&#34;&gt;10&lt;/span&gt;&lt;br&gt;DEVPATH=hwmon0=devices&lt;span class=&#34;hljs-regexp&#34;&gt;/platform/&lt;/span&gt;coretemp.&lt;span class=&#34;hljs-number&#34;&gt;0&lt;/span&gt; hwmon1=devices&lt;span class=&#34;hljs-regexp&#34;&gt;/platform/i&lt;/span&gt;t87.&lt;span class=&#34;hljs-number&#34;&gt;2624&lt;/span&gt;&lt;br&gt;DEVNAME=hwmon0=coretemp hwmon1=it8772&lt;br&gt;FCTEMPS=hwmon1&lt;span class=&#34;hljs-regexp&#34;&gt;/device/&lt;/span&gt;pwm2=hwmon0&lt;span class=&#34;hljs-regexp&#34;&gt;/device/&lt;/span&gt;temp3_input&lt;br&gt;FCFANS= hwmon1&lt;span class=&#34;hljs-regexp&#34;&gt;/device/&lt;/span&gt;pwm2=hwmon1&lt;span class=&#34;hljs-regexp&#34;&gt;/device/&lt;/span&gt;fan2_input&lt;br&gt;MINTEMP=hwmon1&lt;span class=&#34;hljs-regexp&#34;&gt;/device/&lt;/span&gt;pwm2=&lt;span class=&#34;hljs-number&#34;&gt;20&lt;/span&gt;&lt;br&gt;MAXTEMP=hwmon1&lt;span class=&#34;hljs-regexp&#34;&gt;/device/&lt;/span&gt;pwm2=&lt;span class=&#34;hljs-number&#34;&gt;60&lt;/span&gt;&lt;br&gt;MINSTART=hwmon1&lt;span class=&#34;hljs-regexp&#34;&gt;/device/&lt;/span&gt;pwm2=&lt;span class=&#34;hljs-number&#34;&gt;150&lt;/span&gt;&lt;br&gt;MINSTOP=hwmon1&lt;span class=&#34;hljs-regexp&#34;&gt;/device/&lt;/span&gt;pwm2=&lt;span class=&#34;hljs-number&#34;&gt;100&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;默认生成的配置基本能够满足需求，经过测试风扇在2000转左右噪音相对能够接受。&lt;/p&gt;
&lt;h2 id=&#34;VideoStation&#34;&gt;&lt;a href=&#34;#VideoStation&#34; class=&#34;headerlink&#34; title=&#34;VideoStation&#34;&gt;&lt;/a&gt;VideoStation&lt;/h2&gt;&lt;p&gt;参考：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/357332211&#34;&gt;关于群晖NAS video station TMDB连接测试失败及搜刮结果下载失败的解决方案&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/152351243&#34;&gt;（群晖）关于Video Station内电影及电视剧封面简介为空白的处理方法&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;步骤-3&#34;&gt;&lt;a href=&#34;#步骤-3&#34; class=&#34;headerlink&#34; title=&#34;步骤&#34;&gt;&lt;/a&gt;步骤&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;TMDB的图片服务器被屏蔽需要修改hosts 加上 api.themoviedb.org 的ip&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;修改hosts后即可测试，已经连通&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;搜刮信息会出现下载失败，主要是下载图片的url需要切换一下&lt;/p&gt;
&lt;p&gt;  编辑 util_themoviedb.php 文件&lt;/p&gt;
  &lt;figure class=&#34;highlight text&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs text&#34;&gt;cd /var/packages/VideoStation/target/plugins&lt;br&gt;vi util_themoviedb.php&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
  &lt;figure class=&#34;highlight text&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs text&#34;&gt;# 找到下面的语句&lt;br&gt;define(&amp;#x27;API_URL&amp;#x27;, &amp;#x27;https://api.themoviedb.org/3/&amp;#x27;);&lt;br&gt;define(&amp;#x27;BANNER_URL&amp;#x27;, &amp;#x27;https://image.tmdb.org/t/p/w500&amp;#x27;);&lt;br&gt;define(&amp;#x27;BACKDROUP_URL&amp;#x27;, &amp;#x27;https://image.tmdb.org/t/p/original&amp;#x27;);&lt;br&gt;&lt;br&gt;# 我们只需要把改为&lt;br&gt;image.tmdb.org&lt;br&gt;# 改为&lt;br&gt;www.themoviedb.org&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;Gogs&#34;&gt;&lt;a href=&#34;#Gogs&#34; class=&#34;headerlink&#34; title=&#34;Gogs&#34;&gt;&lt;/a&gt;Gogs&lt;/h2&gt;&lt;h3 id=&#34;参考&#34;&gt;&lt;a href=&#34;#参考&#34; class=&#34;headerlink&#34; title=&#34;参考&#34;&gt;&lt;/a&gt;参考&lt;/h3&gt;&lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/cfan927/article/details/100862989&#34;&gt;【工具】群晖利用docker安装Gogs代码管理平台&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;步骤-4&#34;&gt;&lt;a href=&#34;#步骤-4&#34; class=&#34;headerlink&#34; title=&#34;步骤&#34;&gt;&lt;/a&gt;步骤&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;打开“Docker”-&amp;gt;”注册表”，搜索Gogs并“右键”-&amp;gt;“下载此映像”&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2021/ee60585b/watermark.png&#34; alt=&#34;在这里插入图片描述&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在”映像“页面中安装Gogs容器后，切换到”容器“页面，然后双击打开Gogs详情页&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;设定容器的本地端口&lt;/li&gt;
&lt;li&gt;设定桌面快捷方式&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Gogs配置&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Windows中用ssh登录群晖服务器，cd到mariaDB目录下：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;cd /volume1/@appstore/MariaDB10/usr/local/mariadb10/bin/&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;输入命令 &lt;code&gt;./mysql -u root -p&lt;/code&gt;，然后输入密码，连接数据库&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;输入命令 &lt;code&gt;use mysql&lt;/code&gt;切换到mysql数据库&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;创建数据库gogs&lt;br&gt; &lt;code&gt;CREATE DATABASE IF NOT EXISTS gogs;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;输入下面的命令获取数据库远程访问权限 ：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;GRANT ALL PRIVILEGES ON gogs.* TO &amp;#39;user&amp;#39;@&amp;#39;%&amp;#39; IDENTIFIED BY &amp;#39;password&amp;#39; WITH GRANT OPTION;&lt;/code&gt;&lt;br&gt;其中user为用户名&lt;br&gt;password为用户密码&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;然后用&lt;code&gt;show databases;&lt;/code&gt;命令查看一下结果&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;gogs:port 设定相关参数即可&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;着重需要说明的是：&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;tips&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;删除数据库  &lt;code&gt;DROP DATABASE gogs;&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;Note-1&#34;&gt;&lt;a href=&#34;#Note-1&#34; class=&#34;headerlink&#34; title=&#34;Note&#34;&gt;&lt;/a&gt;Note&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;gogs 的配置保存在&lt;code&gt;/data/gogs/conf/app.ini&lt;/code&gt; 参考下图&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;/2021/ee60585b/image-20211103161058734.png&#34; alt=&#34;image-20211103161058734&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;注意&lt;/strong&gt; MariaDB的port默认是不开的，需要去套件里面打开。&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Domain&lt;/strong&gt; 填写Docker宿主机的物理IP地址，或者域名地址,注意这里是不带 http的 如： 192.168.137.140 或 git.mydomain.com&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SSH port&lt;/strong&gt; 假如Docker映射的端口是 10022:22 那么这里就填写宿主机开放的端口 10022&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HTTP port&lt;/strong&gt; 假如Docker映射的端口是 10080:3000 这里要填容器内的监听端口 3000&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Application URL&lt;/strong&gt; 这里要填写的格式为 http(s)?&amp;#x2F; + Domain + HTTP port ，比如：&lt;a href=&#34;http://git.mydomain.com/10080&#34;&gt;http://git.mydomain.com/10080&lt;/a&gt; 。还需要注意的一点是，如果你用了nginx来映射宿主机的 10080 端口，这里要去掉后面的端口，即 &lt;a href=&#34;http://git.mydomain.com/%EF%BC%8C%E8%AF%B4%E7%99%BD%E4%BA%86%E5%B0%B1%E6%98%AF%E4%BD%A0%E5%9C%A8%E5%A4%96%E9%83%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%8A%E8%AE%BF%E9%97%AE%E7%9A%84%E5%9C%B0%E5%9D%80%E3%80%82&#34;&gt;http://git.mydomain.com/，说白了就是你在外部浏览器上访问的地址。&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;注意&lt;/strong&gt;非标准port的ssh需要注意clone地址是否正确&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;备份&#34;&gt;&lt;a href=&#34;#备份&#34; class=&#34;headerlink&#34; title=&#34;备份&#34;&gt;&lt;/a&gt;备份&lt;/h4&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/gogs/gogs/discussions/6876&#34;&gt;https://github.com/gogs/gogs/discussions/6876&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;数据备份&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;因为容器内的 &lt;code&gt;/data&lt;/code&gt; 目录是直接挂载到宿主机的，我们把容器内备份目录设置为 &lt;code&gt;/data&lt;/code&gt; ， 方便宿主机将备份文件同步到远程备份服务器。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;docker container exec gogs su - git -s /bin/ash \&lt;br&gt;-c &amp;quot;/app/gogs/gogs backup \&lt;br&gt;--config=/data/gogs/conf/app.ini \&lt;br&gt;--target=/gogs&amp;quot;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;注意挂载目录的权限&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;数据恢复&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;用docker完成gogs部署之后，进入容器，执行下面命令&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;docker container exec -it gogs su - git -s /bin/ash \&lt;br&gt;-c &amp;quot;/app/gogs/gogs restore \&lt;br&gt;--config=/data/gogs/conf/app.ini \&lt;br&gt;--tempdir=/data \&lt;br&gt;--from=/data/gogs-backup-20211230091744.zip&amp;quot;&lt;br&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;注意：&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;备份和恢复时，使用的 gogs 版本必须是一致的&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;备份和恢复时，使用的 mysql 版本必须是一致的&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;自述文档&#34;&gt;&lt;a href=&#34;#自述文档&#34; class=&#34;headerlink&#34; title=&#34;自述文档&#34;&gt;&lt;/a&gt;自述文档&lt;/h4&gt;&lt;p&gt;Create a plain text file then move to directory &lt;code&gt;custom/conf/readme/README&lt;/code&gt; and &lt;strong&gt;restart Gogs.&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;&amp;#123;Name&amp;#125;&lt;/code&gt;: Repository name&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;#123;Description&amp;#125;&lt;/code&gt;: Repository description&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;#123;CloneURL.SSH&amp;#125;&lt;/code&gt;: Repository SSH clone address&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;#123;CloneURL.HTTPS&amp;#125;&lt;/code&gt;: Repository HTTP&amp;#x2F;HTTPS clone address&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&amp;#123;Name&amp;#125;&lt;/span&gt;&lt;br&gt;&amp;#123;Name&amp;#125; Repository&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Tip&lt;/span&gt;&lt;/span&gt;&lt;br&gt;You can get the development version of this repo via&lt;br&gt;**git clone &amp;#123;CloneURL.SSH&amp;#125;**&lt;br&gt;or&lt;br&gt;**git clone &amp;#123;CloneURL.HTTPS&amp;#125;**&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Bref&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&amp;#123;Description&amp;#125;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Details&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&#34;zerotier&#34;&gt;&lt;a href=&#34;#zerotier&#34; class=&#34;headerlink&#34; title=&#34;zerotier&#34;&gt;&lt;/a&gt;zerotier&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;img name&lt;/th&gt;
&lt;th&gt;last version&lt;/th&gt;
&lt;th&gt;notes&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;henrist-zerotier-one1&lt;/td&gt;
&lt;td&gt;1.6.6&lt;/td&gt;
&lt;td&gt;没有自动配置路由&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;bltavares zerotier&lt;/td&gt;
&lt;td&gt;1.6.6&lt;/td&gt;
&lt;td&gt;网络不通&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;zyclonite&amp;#x2F;zerotier&amp;#x2F;&lt;/td&gt;
&lt;td&gt;1.8.4&lt;/td&gt;
&lt;td&gt;没有自动配置路由 配置路由后正常&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;spikhalskiy-zerotier1&lt;/td&gt;
&lt;td&gt;1.8.2&lt;/td&gt;
&lt;td&gt;运行会报错&lt;code&gt;zerotier-cli: /usr/lib/libstdc++.so.6: no version information available (required by zerotier-cli)&lt;/code&gt;, 没有自动配置路由 配置路由后正常&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;zerotier-zerotier-synology&lt;/td&gt;
&lt;td&gt;1.8.4&lt;/td&gt;
&lt;td&gt;没有自动配置路由 配置路由后正常&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;figure class=&#34;highlight livescript&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs livescript&#34;&gt;docker run &lt;span class=&#34;hljs-string&#34;&gt;\&lt;/span&gt;&lt;br&gt;  -d &lt;span class=&#34;hljs-string&#34;&gt;\&lt;/span&gt;&lt;br&gt;  --restart always &lt;span class=&#34;hljs-string&#34;&gt;\&lt;/span&gt;&lt;br&gt;  --name zerotier-one &lt;span class=&#34;hljs-string&#34;&gt;\&lt;/span&gt;&lt;br&gt;  --device /dev/net/tun &lt;span class=&#34;hljs-string&#34;&gt;\&lt;/span&gt;&lt;br&gt;  --net host &lt;span class=&#34;hljs-string&#34;&gt;\&lt;/span&gt;&lt;br&gt;  --cap-add NET_ADMIN &lt;span class=&#34;hljs-string&#34;&gt;\&lt;/span&gt;&lt;br&gt;  --cap-add SYS_ADMIN &lt;span class=&#34;hljs-string&#34;&gt;\&lt;/span&gt;&lt;br&gt;  -v /&lt;span class=&#34;hljs-keyword&#34;&gt;var&lt;/span&gt;/lib/zerotier-one:/&lt;span class=&#34;hljs-keyword&#34;&gt;var&lt;/span&gt;/lib/zerotier-one &lt;span class=&#34;hljs-string&#34;&gt;\&lt;/span&gt;&lt;br&gt;  zerotier/zerotier-synology&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&#34;第三方套件&#34;&gt;&lt;a href=&#34;#第三方套件&#34; class=&#34;headerlink&#34; title=&#34;第三方套件&#34;&gt;&lt;/a&gt;第三方套件&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;矿神&lt;/span&gt;&lt;br&gt;https://spk.imnks.com/&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&#34;群晖的备份-还原&#34;&gt;&lt;a href=&#34;#群晖的备份-还原&#34; class=&#34;headerlink&#34; title=&#34;群晖的备份 还原&#34;&gt;&lt;/a&gt;群晖的备份 还原&lt;/h2&gt;&lt;p&gt;晖硬盘接到电脑上使用diskgenius查看，有三个分区：系统、swap交换分区、数据存储区，所有的硬盘都有这三个分区。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  交换分区，英文是swap，意思是“交换”、“实物交易”。 它的功能就是在内存不够的情况下，操作系统先把内存中暂时不用的数据，存到硬盘的交换空间，腾出内存来让别的程序运行，和Windows的虚拟内存（pagefile.sys）的作用是一样的。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;/2021/ee60585b/image-20220918161100014.png&#34; alt=&#34;image-20220918161100014&#34;&gt;&lt;/p&gt;
&lt;p&gt;弄清楚这三个分区是做什么的就很简单了, 我们备份和还原自然也就是备份和还原第一个系统分区了.&lt;/p&gt;
&lt;p&gt;需要注意的是群晖的系统存在于任何一块硬盘内, &lt;strong&gt;所以还原分区的时候需要将分区还原到每一块硬盘内才行&lt;/strong&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  如果只还原一块后，开机进入系统，系统会提示修复，虽然也能成功但是并不建议这么做&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;群晖-硬盘扩容-硬盘升级&#34;&gt;&lt;a href=&#34;#群晖-硬盘扩容-硬盘升级&#34; class=&#34;headerlink&#34; title=&#34;群晖 硬盘扩容 硬盘升级&#34;&gt;&lt;/a&gt;群晖 硬盘扩容 硬盘升级&lt;/h2&gt;&lt;p&gt;紧跟上面, 如果我们需要进行硬盘扩容, 比如原来的硬盘128G, 现在购入一块新硬盘256G, 我们需要用256去替换原来的硬盘, 但是现有设备上盘位已经插满了或者是属于单盘位的机器, 这时候就要把硬盘拆下来手动将数据进行转移.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  我的大致思路是使用DG全盘拷贝到256G硬盘上(当时尝试的时候没有找到这方面的文章, 不知道该怎么样操作, 担心数据出问题所以就用了全盘拷贝), 然后上电开机SSH登录上去扩容一下分区就好.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;克隆数据&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;首先打开&lt;code&gt;DiskGenius&lt;/code&gt;软件 选择 -&amp;gt; &lt;code&gt;工具&lt;/code&gt; -&amp;gt; &lt;code&gt;克隆磁盘&lt;/code&gt; 我这里选的是按扇区全盘克隆.&lt;/p&gt;
&lt;p&gt;讲道理来说将&lt;code&gt;系统区&lt;/code&gt;、&lt;code&gt;数据存储区&lt;/code&gt;拷贝过去, 再划分出&lt;code&gt;swap交换分区&lt;/code&gt;应该也是可以的.&lt;/p&gt;
&lt;p&gt;等待克隆完成.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;扩容分区&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;磁盘克隆完成后, 旧的硬盘先不能格式化掉, 需要先留着以防万一.&lt;/p&gt;
&lt;p&gt;将新的硬盘安装回群晖, 并上电开机, 开机一切正常, 查看存储管理器会发现, 256的磁盘只显示了128G, 这个时候我们就需要登录SSH进行下一步操作了.&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 首先查看一下新放进去的盘的挂载位置&lt;/span&gt;&lt;br&gt;$ fdisk -l&lt;br&gt;Disk /dev/sda: 232.9 GiB, 250059350016 bytes, 488397168 sectors&lt;br&gt;Units: sectors of 1 * 512 = 512 bytes&lt;br&gt;Sector size (logical/physical): 512 bytes / 512 bytes&lt;br&gt;I/O size (minimum/optimal): 512 bytes / 512 bytes&lt;br&gt;Disklabel &lt;span class=&#34;hljs-built_in&#34;&gt;type&lt;/span&gt;: dos&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 上面可以看到 设备在`/dev/sda` 这里的sda里面的a是按顺序来的 第二个第三个盘就是sdb sdc 类推&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 输入命令后它会让我们输入结束地址, 我们这里直接回车, 设定地址为最末尾&lt;/span&gt;&lt;br&gt;$ parted /dev/sda resizepart 3&lt;br&gt;End?  [250GB]?&lt;br&gt;Information: You may need to update /etc/fstab.&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 这里运行的时候报错了, 但是时间有点久没有记录下来给忘记了, 哎这些东西还是不能拖, 要立刻记录下来才行&lt;/span&gt;&lt;br&gt;$ resize2fs -f /dev/sda3 &lt;br&gt;resize2fs 1.42.6 (21-Sep-2012)&lt;br&gt;.....&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 再次查看扩容完成&lt;/span&gt;&lt;br&gt;$ fdisk -l&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;参考:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://imnks.com/389.html&#34;&gt;群晖升级硬盘 磁盘克隆后的简单扩容教程&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;群晖安装USB网卡驱动-AX88179A-6-2-3&#34;&gt;&lt;a href=&#34;#群晖安装USB网卡驱动-AX88179A-6-2-3&#34; class=&#34;headerlink&#34; title=&#34;群晖安装USB网卡驱动 AX88179A 6.2.3&#34;&gt;&lt;/a&gt;群晖安装USB网卡驱动 AX88179A 6.2.3&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;/2021/ee60585b/image-20220926214605083.png&#34; alt=&#34;image-20220926214605083&#34;&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;将USB网卡插入群晖&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;下载驱动程序 &lt;a href=&#34;%E7%BE%A4%E6%99%96/ax88179_178a.ko.zip&#34;&gt;ax88179_178a.ko.zip&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;解压后将&lt;code&gt;ax88179_178a.ko&lt;/code&gt;文件复制到群晖的&lt;code&gt;/lib/modules/&lt;/code&gt;目录下&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;cp&lt;/span&gt; /volume......./ax88179_178a.ko /lib/modules&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;使用命令 &lt;code&gt;chmod 644 ax88179_178a.ko&lt;/code&gt;修改文件权限为&lt;code&gt;-rw-r--r--&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;加载驱动&lt;code&gt;insmod /lib/modules/ax88179_178a.ko &lt;/code&gt; &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;我这里当时报错了, 但是似乎并没有什么影响&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;insmod: ERROR: could not insert module /lib/modules/ax88179_178a.ko: Invalid module format&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;拓展一下&lt;/p&gt;
&lt;blockquote&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 获取已加载的驱动列表&lt;/span&gt;&lt;br&gt;lsmod&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 卸载驱动&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 参数为lsmod获取到的驱动名称，而不是路径&lt;/span&gt;&lt;br&gt;rmmod ax88179_178a&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;启用网卡 &lt;code&gt;ifconfig eth1 up&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;重新启动&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;  网上很多blog写需要添加启动项, 但是我这里并没有添加 看起来也没有什么问题.&lt;/p&gt;
&lt;p&gt;  添加启动项的操作是在群晖的&lt;code&gt;设置&lt;/code&gt;里面 添加一个&lt;code&gt;任务计划&lt;/code&gt;开机触发执行下面这个脚本&lt;/p&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;insmod /lib/modules/ax88179_178a.ko&lt;br&gt;ifconfig eth1 up&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;/blockquote&gt;
&lt;h2 id=&#34;PC通过群晖的网卡桥接上网&#34;&gt;&lt;a href=&#34;#PC通过群晖的网卡桥接上网&#34; class=&#34;headerlink&#34; title=&#34;PC通过群晖的网卡桥接上网&#34;&gt;&lt;/a&gt;PC通过群晖的网卡桥接上网&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt;:首先需要确定Open vSwitch是开启的. 控制面板-&amp;gt;网络-&amp;gt;网络界面-&amp;gt;管理，打开Open vSwitch（如果使用了VMM套件会自动开启，而且提示无法禁用）.&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 路径图&lt;/span&gt;&lt;br&gt;网关(路由器) &amp;lt;-eth0-&amp;gt; 群晖 &amp;lt;-eth1-&amp;gt; PC&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;装了群晖的Virtual Machine Manager后一个接口会多出来一块网卡, 其中&lt;code&gt;eth0&lt;/code&gt;是物理网卡, &lt;code&gt;ovs_eth0&lt;/code&gt;是Open vSwitch这个网络管理工具虚拟出来的网卡.&lt;/p&gt;
&lt;p&gt;一般来说&lt;code&gt;eth0&lt;/code&gt;会空闲, 流量都是通过&lt;code&gt;ovs_eth0&lt;/code&gt;这个虚拟网卡, 其中&lt;code&gt;eth0&lt;/code&gt;会被配置成与&lt;code&gt;ovs_eth0&lt;/code&gt;桥接&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;修改配置文件&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;如你的电脑接在群晖的第一个网口&lt;code&gt;eth0&lt;/code&gt;就修改&lt;code&gt;ifcfg-eth0&lt;/code&gt;，接的是第二个网口&lt;code&gt;eth1&lt;/code&gt;就修改&lt;code&gt;ifcfg-eth1&lt;/code&gt;(本例)。&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 编辑&lt;/span&gt;&lt;br&gt;vim /etc/sysconfig/network-scripts/ifcfg-eth1&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 将BRIDGE 改成ovs_eth0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 原BRIDGE=ovs_eth1&lt;/span&gt;&lt;br&gt;BRIDGE=ovs_eth0&lt;br&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;blockquote&gt;
&lt;p&gt;   &lt;code&gt;/etc/sysconfig/network-scripts/ifcfg-eth1&lt;/code&gt;文件参数简介&lt;/p&gt;
&lt;p&gt;  &lt;img src=&#34;/2021/ee60585b/1841273-20191019215624473-1921771223.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;命令修改&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;查看当前网桥 可以看到有两个网桥 ovs_eth0 和 ovs_eth1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;ovs-vsctl show&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;我们将网桥 ovs_eth1 删除, 并将 eth1 加入到 网桥ovs_eth0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;ovs-vsctl del-br ovs_eth1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;ovs-vsctl add-port ovs_eth0 eth1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;再次查看网桥状态&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;ovs-vsctl show&lt;/span&gt;&lt;br&gt;Bridge &amp;quot;ovs_eth0&amp;quot;&lt;br&gt;        Port &amp;quot;eth1&amp;quot;&lt;br&gt;            Interface &amp;quot;eth1&amp;quot;&lt;br&gt;        Port &amp;quot;eth0&amp;quot;&lt;br&gt;            Interface &amp;quot;eth0&amp;quot;&lt;br&gt;        Port &amp;quot;ovs_eth0&amp;quot;&lt;br&gt;            Interface &amp;quot;ovs_eth0&amp;quot;&lt;br&gt;                type: internal&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;此时eth0和eth1全部在ovs_eth0内，即两个网口处于同一个交换机内。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;将eth1和电脑相连，发现电脑可以正常从路由器获取IP地址，并正常上网&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;PC通过群晖的网卡NAT上网&#34;&gt;&lt;a href=&#34;#PC通过群晖的网卡NAT上网&#34; class=&#34;headerlink&#34; title=&#34;PC通过群晖的网卡NAT上网&#34;&gt;&lt;/a&gt;PC通过群晖的网卡NAT上网&lt;/h2&gt;&lt;p&gt;这里主要是利用&lt;code&gt;iptable&lt;/code&gt;路由流量.&lt;/p&gt;
&lt;p&gt;首先补个&lt;code&gt;iptable&lt;/code&gt;的教程&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://wooyun.js.org/drops/Iptables%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B.html&#34;&gt;Iptables入门教程&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;我们需要先给&lt;code&gt;局域网2 eth1&lt;/code&gt;设置一个静态ip &lt;code&gt;192.168.88.1/24 gw 192.168.88.1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;然后在DHCP服务器端开启&lt;code&gt;局域网2 eth1&lt;/code&gt;的DHCP服务, 网关填&lt;code&gt;192.168.88.1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;然后配置&lt;code&gt;iptable&lt;/code&gt;开启网口转发&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;/2021/ee60585b/image-20221121215936519.png&#34; alt=&#34;image-20221121215936519&#34;&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;开启群晖的转发功能&lt;/span&gt;&lt;br&gt;echo &amp;quot;1&amp;quot; &amp;gt; /proc/sys/net/ipv4/ip_forward&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;为PC添加 去往群晖的 路由表 群晖开了对应接口的DHCP就不需要了&lt;/span&gt;&lt;br&gt;route add -net 192.168.88.0/24 gw 192.168.88.1&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;在群晖中添加iptable 策略&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;配置 NAT 服务器，执行命令&lt;/span&gt;&lt;br&gt;iptables -t nat -A POSTROUTING -s 192.168.88.0/24 -o ovs_eth0 -j MASQUERADE&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-t 表名&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-A 在指定链的末尾添加（--append）一条新的规则&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-s 指定数据包的源地址参数，可以使IP地址、网络地址、主机名&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;   192.168.88.0 表示 192.168.88.x 的整个网络。&lt;/span&gt; &lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-o 输出接口&lt;/span&gt; &lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-j 目标动作或跳转&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;   MASQUERADE 则表示从 NAT 服务器的网卡上自动获取当前的 IP 地址来做端口转发。否则，基于目标的网络地址转换模式（即 DNAT）需要在每次 NAT 服务器连接外网的 IP 地址变更的时候重新配置端口转发。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;也可以使用源地址目标转换模式（即 SNAT），命令是&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;** 这里和上面选其一即可 **&lt;/span&gt;&lt;br&gt;iptables -t nat -A POSTROUTING -s 192.168.88.0/24 -o ovs_eth0 -j SNAT --to-source 192.168.20.2&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;显然这种方式也会依赖命令中指定的通向外网的 IP 地址，所以仍然不够灵活。推荐使用第一种方式。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;允许端口转发&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;此命令将允许经过 eth1 网卡（连接内网）的所有数据包通向外网的转发。&lt;/span&gt;&lt;br&gt;iptables -A FORWARD -i eth1 -j ACCEPT&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;或者 仅允许转发192.168.88.0/24段的报文&lt;/span&gt;&lt;br&gt;iptables -A FORWARD -s 192.168.88.0/24 -j ACCEPT&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;参考&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/liuzhanchun/article/details/106819839&#34;&gt;Linux 内部路由实现及网口转发之理论篇&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/luozhen07/article/details/48051005&#34;&gt;Linux 系统双网卡实现内网端口转发&lt;/a&gt;&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://www.oikiou.top/2021/9b4105ad/</guid>
            <title>LinuxAlphaMini</title>
            <link>https://www.oikiou.top/2021/9b4105ad/</link>
            <category>linux</category>
            <category>alpha_mini</category>
            <category>正点原子</category>
            <pubDate>Wed, 07 Jul 2021 14:46:15 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;汇编基础&#34;&gt;&lt;a href=&#34;#汇编基础&#34; class=&#34;headerlink&#34; title=&#34;汇编基础&#34;&gt;&lt;/a&gt;汇编基础&lt;/h1&gt;&lt;figure class=&#34;highlight css&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs css&#34;&gt;&lt;span class=&#34;hljs-selector-tag&#34;&gt;label&lt;/span&gt;： instruction @ comment &lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;label 即标号&lt;/strong&gt;，表示地址位置，有些指令前面可能会有标号，这样就可以通过这个标号得到指令的地址，标号也可以用来表示数据地址。注意 label 后面的“：”，任何以“：”结尾的标识符都会被识别为一个标号。&lt;br&gt;&lt;strong&gt;instruction 即指令&lt;/strong&gt;，也就是汇编指令或伪指令。&lt;br&gt;&lt;strong&gt;@符号&lt;/strong&gt;，表示后面的是注释&lt;br&gt;&lt;strong&gt;comment&lt;/strong&gt; 就是注释内容。&lt;/p&gt;
&lt;p&gt;例:&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs asm&#34;&gt;add:&lt;br&gt;MOVS R0, #0X12 @设置 R0=0X12&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;注意！ ARM 中的指令、伪指令、伪操作、寄存器名等可以全部使用大写，也可以全部使用小写，但是不能大小写混用。&lt;/strong&gt;  &lt;/p&gt;
&lt;figure class=&#34;highlight jboss-cli&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs jboss-cli&#34;&gt;&lt;span class=&#34;hljs-string&#34;&gt;.section&lt;/span&gt; &lt;span class=&#34;hljs-string&#34;&gt;.testsection&lt;/span&gt; @定义一个 testsetcion 段 &lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ul&gt;
&lt;li&gt;.text 表示代码段。  &lt;/li&gt;
&lt;li&gt;.data 初始化的数据段。&lt;/li&gt;
&lt;li&gt;.bss 未初始化的数据段。&lt;/li&gt;
&lt;li&gt;.rodata 只读数据段。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;伪操作:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;.byte 定义单字节数据，比如.byte 0x12。&lt;/li&gt;
&lt;li&gt;.short 定义双字节数据，比如.short 0x1234。&lt;/li&gt;
&lt;li&gt;.long 定义一个 4 字节数据，比如.long 0x12345678。&lt;/li&gt;
&lt;li&gt;.equ 赋值语句，格式为： .equ 变量名，表达式，比如.equ num, 0x12，表示 num&amp;#x3D;0x12。&lt;/li&gt;
&lt;li&gt;.align 数据字节对齐，比如： .align 4 表示 4 字节对齐。&lt;/li&gt;
&lt;li&gt;.end 表示源文件结束。&lt;/li&gt;
&lt;li&gt;.global 定义一个全局符号，格式为： .global symbol，比如： .global _start(汇编程序的默认入口标号是_start  )。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;函数:&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight makefile&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs makefile&#34;&gt;&lt;span class=&#34;hljs-section&#34;&gt;函数名:&lt;/span&gt;&lt;br&gt;	函数体&lt;br&gt;	返回语句&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs asm&#34;&gt;/* SVC 中断 */&lt;br&gt;SVC_Handler:&lt;br&gt;    ldr r0, =SVC_Handler&lt;br&gt;    bx r0					@跳转&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&#34;常用汇编指令&#34;&gt;&lt;a href=&#34;#常用汇编指令&#34; class=&#34;headerlink&#34; title=&#34;常用汇编指令&#34;&gt;&lt;/a&gt;常用汇编指令&lt;/h2&gt;&lt;h3 id=&#34;处理器内部数据传输指令-mov-mrs-msr&#34;&gt;&lt;a href=&#34;#处理器内部数据传输指令-mov-mrs-msr&#34; class=&#34;headerlink&#34; title=&#34;处理器内部数据传输指令 mov mrs msr&#34;&gt;&lt;/a&gt;处理器内部数据传输指令 mov mrs msr&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;指令&lt;/th&gt;
&lt;th&gt;目的&lt;/th&gt;
&lt;th&gt;源&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;MOV&lt;/td&gt;
&lt;td&gt;R0&lt;/td&gt;
&lt;td&gt;R1&lt;/td&gt;
&lt;td&gt;将 R1 里面的数据复制到 R0 中。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;MRS&lt;/td&gt;
&lt;td&gt;R0&lt;/td&gt;
&lt;td&gt;CPSR&lt;/td&gt;
&lt;td&gt;将特殊寄存器 CPSR 里面的数据复制到 R0 中。&lt;br/&gt;&lt;strong&gt;(特殊寄存器只能由这个指令 读 )&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;MSR&lt;/td&gt;
&lt;td&gt;CPSR&lt;/td&gt;
&lt;td&gt;R1&lt;/td&gt;
&lt;td&gt;将 R1 里面的数据复制到特殊寄存器 CPSR 里中。&lt;br/&gt;&lt;strong&gt;(特殊寄存器只能由这个指令 写 )&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h3 id=&#34;存储器访问指令-ldr-str&#34;&gt;&lt;a href=&#34;#存储器访问指令-ldr-str&#34; class=&#34;headerlink&#34; title=&#34;存储器访问指令 ldr str&#34;&gt;&lt;/a&gt;存储器访问指令 ldr str&lt;/h3&gt;&lt;p&gt;I.MX6UL中的RAM,寄存器都需要这个指令访问。&lt;/p&gt;
&lt;p&gt;LDR和STR是按照字进行读取和写入的，LDRB和STRB是按字节，LDRH和STRH是按半字操作。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;指令&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;LDR Rd, [Rn , #offset]&lt;/td&gt;
&lt;td&gt;从存储器 Rn+offset 的位置读取数据存放到 Rd 中。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;STR Rd, [Rn, #offset]&lt;/td&gt;
&lt;td&gt;将 Rd 中的数据写入到存储器中的 Rn+offset 位置。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h4 id=&#34;LDR&#34;&gt;&lt;a href=&#34;#LDR&#34; class=&#34;headerlink&#34; title=&#34;LDR&#34;&gt;&lt;/a&gt;LDR&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;读取寄存器值&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;加载立即数到寄存器&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs asm&#34;&gt;@加载立即数&lt;br&gt;LDR R0, =0X0209C004 @将寄存器地址 0X0209C004 加载到 R0 中，即 R0=0X0209C004&lt;br&gt;@读取寄存器值&lt;br&gt;LDR R1, [R0] @读取地址 0X0209C004 中的数据到 R1 寄存器中&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&#34;STR&#34;&gt;&lt;a href=&#34;#STR&#34; class=&#34;headerlink&#34; title=&#34;STR&#34;&gt;&lt;/a&gt;STR&lt;/h4&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs asm&#34;&gt;LDR R0, =0X0209C004 @将寄存器地址 0X0209C004 加载到 R0 中，即 R0=0X0209C004&lt;br&gt;LDR R1, =0X12345678 @R1 保存要写入到寄存器的值，即 R1=0X12345678&lt;br&gt;STR R1, [R0] @将 R1 中的值写入到 R0 中的地址上&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h3 id=&#34;压栈出栈指令-push-pop&#34;&gt;&lt;a href=&#34;#压栈出栈指令-push-pop&#34; class=&#34;headerlink&#34; title=&#34;压栈出栈指令 push pop&#34;&gt;&lt;/a&gt;压栈出栈指令 push pop&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;指令&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;PUSH &amp;lt;reg list&amp;gt;&lt;/td&gt;
&lt;td&gt;将寄存器列表存入栈中。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;POP &amp;lt;reg list&amp;gt;&lt;/td&gt;
&lt;td&gt;从栈中恢复寄存器列表。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs asm&#34;&gt;@处理器的堆栈是向下增长的 见下图&lt;br&gt;PUSH &amp;#123;R0~R3, R12&amp;#125; @将 R0~R3 和 R12 压栈&lt;br&gt;PUSH &amp;#123;LR&amp;#125; @将 LR 进行压栈&lt;br&gt;&lt;br&gt;POP &amp;#123;LR&amp;#125; @先恢复 LR&lt;br&gt;POP &amp;#123;R0~R3,R12&amp;#125; @在恢复 R0~R3,R12&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;img src=&#34;/2021/9b4105ad/image-20210707144653945.png&#34; alt=&#34;image-20210707144653945&#34;&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs asm&#34;&gt;@这个和上面的是等同的&lt;br&gt;STMFD SP!,&amp;#123;R0~R3, R12&amp;#125; @R0~R3,R12 入栈&lt;br&gt;STMFD SP!,&amp;#123;LR&amp;#125; @LR 入栈&lt;br&gt;&lt;br&gt;LDMFD SP!, &amp;#123;LR&amp;#125; @先恢复 LR&lt;br&gt;LDMFD SP!, &amp;#123;R0~R3, R12&amp;#125; @再恢复 R0~R3, R12&lt;br&gt;&lt;br&gt;&lt;br&gt;LDMFD = LDM + FD&lt;br&gt;STMFD = STM + FD&lt;br&gt;LDM(多个) -&amp;gt; LDR(单个)&lt;br&gt;STM(多个) -&amp;gt; STR(单个)&lt;br&gt;FD = Full Descending 即满递减的意思(根据 ATPCS 规则,ARM 使用的 FD 类型的堆栈， SP 指向最后一个入栈的数值，堆栈是由高地址向下增长的，也就是前面说的向下增长的堆栈，)&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h3 id=&#34;跳转指令-b-bx-bl-blx&#34;&gt;&lt;a href=&#34;#跳转指令-b-bx-bl-blx&#34; class=&#34;headerlink&#34; title=&#34;跳转指令 b bx bl blx&#34;&gt;&lt;/a&gt;跳转指令 b bx bl blx&lt;/h3&gt;&lt;p&gt;跳转操作的方法  &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;直接使用跳转指令 B、 BL、 BX 等&lt;/li&gt;
&lt;li&gt;直接向 PC 寄存器里面写入数据。&lt;/li&gt;
&lt;/ol&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;指令&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;B &amp;lt;label&amp;gt;&lt;/td&gt;
&lt;td&gt;跳转到 label，如果跳转范围超过了+&amp;#x2F;-2KB，&lt;br/&gt;可以指定 B.W &amp;lt;label&amp;gt;使用 32 位版本的跳转指令， 这样可以得到较大范围的 跳转&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;BX &amp;lt;Rm&amp;gt;&lt;/td&gt;
&lt;td&gt;间接跳转，跳转到存放于 Rm 中的地址处，并且切换指令集&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;BL &amp;lt;label&amp;gt;&lt;/td&gt;
&lt;td&gt;跳转到标号地址，并将返回地址保存在 LR 中。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;BLX &amp;lt;Rm&amp;gt;&lt;/td&gt;
&lt;td&gt;结合 BX 和 BL 的特点，跳转到 Rm 指定的地址，并将返回地 址保存在 LR 中，切换指令集。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h4 id=&#34;B指令&#34;&gt;&lt;a href=&#34;#B指令&#34; class=&#34;headerlink&#34; title=&#34;B指令&#34;&gt;&lt;/a&gt;B指令&lt;/h4&gt;&lt;p&gt;这是最简单的跳转指令， B 指令会将 PC 寄存器的值设置为跳转目标地址， 一旦执行 B 指令， ARM 处理器就会立即跳转到指定的目标地址。&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs asm&#34;&gt;_start:&lt;br&gt;    ldr sp,=0X80200000 @设置栈指针&lt;br&gt;    b main @跳转到 main 函数&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;上述代码就是典型的在汇编中初始化 C 运行环境，然后跳转到 C 文件的 main 函数中运行 ，上述代码只是初始化了 SP 指针，有些处理器还需要做其他的初始化，比如初始化 DDR 等等。因为跳转到 C 文件以后再也不会回到汇编了，所以在第 4 行使用了 B 指令来完成跳转  。&lt;/p&gt;
&lt;h4 id=&#34;BL指令&#34;&gt;&lt;a href=&#34;#BL指令&#34; class=&#34;headerlink&#34; title=&#34;BL指令&#34;&gt;&lt;/a&gt;BL指令&lt;/h4&gt;&lt;p&gt;BL 指令相比 B 指令，在跳转之前会在寄存器 LR(R14)中保存当前 PC 寄存器值，所以可以通过将 LR 寄存器中的值重新加载到 PC 中来继续从跳转之前的代码处运行，这是子程序调用一个基本但常用的手段。  &lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs asm&#34;&gt;push &amp;#123;r0, r1&amp;#125; 			@保存 r0,r1&lt;br&gt;cps #0x13 				@进入 SVC 模式，允许其他中断再次进去&lt;br&gt;&lt;br&gt;bl system_irqhandler	@加载 C 语言中断处理函数到 r2 寄存器中&lt;br&gt;&lt;br&gt;cps #0x12 				@进入 IRQ 模式&lt;br&gt;pop &amp;#123;r0, r1&amp;#125;&lt;br&gt;str r0, [r1, #0X10] 	@中断执行完成，写 EOIR&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;上述代码中第 5 行就是执行 C 语言版的中断处理函数，当处理完成以后是需要返回来继续执行下面的程序，所以使用了 BL 指令。  &lt;/p&gt;
&lt;h3 id=&#34;算术运算指令&#34;&gt;&lt;a href=&#34;#算术运算指令&#34; class=&#34;headerlink&#34; title=&#34;算术运算指令&#34;&gt;&lt;/a&gt;算术运算指令&lt;/h3&gt;&lt;p&gt;汇编中也可以进行算术运算， 比如加减乘除，常用的运算指令用法如表 7.2.5.1 所示：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;指令&lt;/th&gt;
&lt;th&gt;计算公式&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;ADD Rd, Rn, Rm&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn + Rm&lt;/td&gt;
&lt;td&gt;加法运算，指令为 ADD&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ADD Rd, Rn, #immed&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn + #immed&lt;/td&gt;
&lt;td&gt;加法运算，指令为 ADD&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ADC Rd, Rn, Rm&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn + Rm + 进位&lt;/td&gt;
&lt;td&gt;带进位的加法运算，指令为 ADC&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ADC Rd, Rn, #immed&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn + #immed +进位&lt;/td&gt;
&lt;td&gt;带进位的加法运算，指令为 ADC&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SUB Rd, Rn, Rm&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn – Rm&lt;/td&gt;
&lt;td&gt;减法&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SUB Rd, #immed&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rd - #immed&lt;/td&gt;
&lt;td&gt;减法&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SUB Rd, Rn, #immed&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn - #immed&lt;/td&gt;
&lt;td&gt;减法&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SBC Rd, Rn, #immed&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn - #immed – 借位&lt;/td&gt;
&lt;td&gt;带借位的减法&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SBC Rd, Rn ,Rm&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn – Rm – 借位&lt;/td&gt;
&lt;td&gt;带借位的减法&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;MUL Rd, Rn, Rm&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn * Rm&lt;/td&gt;
&lt;td&gt;乘法(32 位)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;UDIV Rd, Rn, Rm&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn &amp;#x2F; Rm&lt;/td&gt;
&lt;td&gt;无符号除法&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SDIV Rd, Rn, Rm&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn &amp;#x2F; Rm&lt;/td&gt;
&lt;td&gt;有符号除法&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h3 id=&#34;逻辑运算指令&#34;&gt;&lt;a href=&#34;#逻辑运算指令&#34; class=&#34;headerlink&#34; title=&#34;逻辑运算指令&#34;&gt;&lt;/a&gt;逻辑运算指令&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;指令&lt;/th&gt;
&lt;th&gt;计算公式&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;AND Rd, Rn&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rd &amp;amp;Rn&lt;/td&gt;
&lt;td&gt;按位与&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;AND Rd, Rn, #immed&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn &amp;amp;#immed&lt;/td&gt;
&lt;td&gt;按位与&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;AND Rd, Rn, Rm&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn &amp;amp; Rm&lt;/td&gt;
&lt;td&gt;按位与&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ORR Rd, Rn&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rd | Rn&lt;/td&gt;
&lt;td&gt;按位或&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ORR Rd, Rn, #immed&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn | #immed&lt;/td&gt;
&lt;td&gt;按位或&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ORR Rd, Rn, Rm&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn | Rm&lt;/td&gt;
&lt;td&gt;按位或&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;BIC Rd, Rn&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rd &amp;amp; (~Rn)&lt;/td&gt;
&lt;td&gt;位清除&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;BIC Rd, Rn, #immed&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn &amp;amp; (~#immed)&lt;/td&gt;
&lt;td&gt;位清除&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;BIC Rd, Rn , Rm&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn &amp;amp; (~Rm)&lt;/td&gt;
&lt;td&gt;位清除&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ORN Rd, Rn, #immed&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn | (#immed)&lt;/td&gt;
&lt;td&gt;按位或非&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ORN Rd, Rn, Rm&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn | (Rm)&lt;/td&gt;
&lt;td&gt;按位或非&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;EOR Rd, Rn&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rd ^ Rn&lt;/td&gt;
&lt;td&gt;按位异或&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;EOR Rd, Rn, #immed&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn ^ #immed&lt;/td&gt;
&lt;td&gt;按位异或&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;EOR Rd, Rn, Rm&lt;/td&gt;
&lt;td&gt;Rd &amp;#x3D; Rn ^ Rm&lt;/td&gt;
&lt;td&gt;按位异或&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h1 id=&#34;启动方式&#34;&gt;&lt;a href=&#34;#启动方式&#34; class=&#34;headerlink&#34; title=&#34;启动方式&#34;&gt;&lt;/a&gt;启动方式&lt;/h1&gt;&lt;h2 id=&#34;BOOT&#34;&gt;&lt;a href=&#34;#BOOT&#34; class=&#34;headerlink&#34; title=&#34;BOOT&#34;&gt;&lt;/a&gt;BOOT&lt;/h2&gt;&lt;p&gt;OOT_MODE[1:0]的值是可以改变的，有两种方式，一种是改写 eFUSE(熔丝)，一种是修改相应的 GPIO 高低电平。  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;BOOT_MODE1 和 BOOT_MODE0 在芯片内部是有 100KΩ下拉电阻的 ，所以默认是0。&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;BOOT_MODE[1:0]&lt;/th&gt;
&lt;th&gt;BOOT 类型&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;00&lt;/td&gt;
&lt;td&gt;从 FUSE 启动&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;01&lt;/td&gt;
&lt;td&gt;串行下载&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;内部 BOOT 模式&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;11&lt;/td&gt;
&lt;td&gt;保留&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h3 id=&#34;串行下载&#34;&gt;&lt;a href=&#34;#串行下载&#34; class=&#34;headerlink&#34; title=&#34;串行下载&#34;&gt;&lt;/a&gt;串行下载&lt;/h3&gt;&lt;p&gt;串行下载的意思就是可以通过 USB 或者 UART 将代码下载到板子上的外置存储设备中，我们可以使用 OTG1 这个 USB口向开发板上的 SD&amp;#x2F;EMMC、 NAND 等存储设备下载代码。  &lt;/p&gt;
&lt;h3 id=&#34;内部-BOOT-模式&#34;&gt;&lt;a href=&#34;#内部-BOOT-模式&#34; class=&#34;headerlink&#34; title=&#34;内部 BOOT 模式&#34;&gt;&lt;/a&gt;内部 BOOT 模式&lt;/h3&gt;&lt;p&gt;芯片会执行内部的 boot ROM 代码，代码会进行硬件初始化(一部分外设)，然后从 boot 设备(就是存放代码的设备、比如 SD&amp;#x2F;EMMC、 NAND)中&lt;strong&gt;将代码拷贝出来复制到指定的 RAM 中，一般是 DDR。&lt;/strong&gt;  &lt;/p&gt;
&lt;h2 id=&#34;BOOT模式-启动设备&#34;&gt;&lt;a href=&#34;#BOOT模式-启动设备&#34; class=&#34;headerlink&#34; title=&#34;BOOT模式 启动设备&#34;&gt;&lt;/a&gt;BOOT模式 启动设备&lt;/h2&gt;&lt;p&gt;当 BOOT_MODE 设置为内部 BOOT 模式以后，可以从以下设备中启动：&lt;br&gt;①、接到 EIM 接口的 CS0 上的 16 位 NOR Flash。&lt;br&gt;②、接到 EIM 接口的 CS0 上的 OneNAND Flash。&lt;br&gt;③、接到 GPMI 接口上的 MLC&amp;#x2F;SLC NAND Flash， NAND Flash 页大小支持 2KByte、 4KByte和 8KByte， 8 位宽。&lt;br&gt;④、 Quad SPI Flash。&lt;br&gt;⑤、接到 USDHC 接口上的 SD&amp;#x2F;MMC&amp;#x2F;eSD&amp;#x2F;SDXC&amp;#x2F;eMMC 等设备。&lt;br&gt;⑥、 SPI 接口的 EEPROM。  &lt;/p&gt;
&lt;p&gt;启动设备是通过  BOOT_CFG1[7:0]、 BOOT_CFG2[7:0]和 BOOT_CFG4[7:0]这 24 个配置 IO配置，这 24 个配置 IO 刚好对应着 LCD 的 24 根数据线 LCD_DATA0~LCDDATA23，&lt;strong&gt;当启动完成以后这 24 个 IO 就可以作为 LCD 的数据线使用。&lt;/strong&gt;  &lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;boot1&lt;/th&gt;
&lt;th&gt;boot0&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;启动设备&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;x&lt;/td&gt;
&lt;td&gt;x&lt;/td&gt;
&lt;td&gt;x&lt;/td&gt;
&lt;td&gt;x&lt;/td&gt;
&lt;td&gt;x&lt;/td&gt;
&lt;td&gt;x&lt;/td&gt;
&lt;td&gt;串行下载，可以通过 USB 烧写镜像文件。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;SD 卡启动。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;EMMC 启动。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;NAND FLASH 启动。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h2 id=&#34;烧写镜像&#34;&gt;&lt;a href=&#34;#烧写镜像&#34; class=&#34;headerlink&#34; title=&#34;烧写镜像&#34;&gt;&lt;/a&gt;烧写镜像&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;imxdownload 会在 led.bin前面添加一些头信息，重新生成一个叫做 load.imx 的文件，头部信息包含以下&lt;/strong&gt;  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Image vector table，简称 IVT， IVT 里面包含了一系列的地址信息，这些地址信息在ROM 中按照固定的地址存放着。 &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Boot data，启动数据，包含了镜像要拷贝到哪个地址，拷贝的大小是多少等等。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Device configuration data，简称 DCD，设备配置信息，重点是 DDR3 的初始化配置。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;用户代码可执行文件，比如 led.bin。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最终烧写到 I.MX6U 中的程序其组成为： IVT+Boot data+DCD+.bin 。(3KByte 的 IVT+Boot Data+DCD)&lt;/p&gt;
&lt;p&gt;.bin是从0x87800000这个地方开始，往前推load.imx就是从0x877FF400开始的。&lt;/p&gt;
&lt;h1 id=&#34;点灯&#34;&gt;&lt;a href=&#34;#点灯&#34; class=&#34;headerlink&#34; title=&#34;点灯&#34;&gt;&lt;/a&gt;点灯&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;Makefile&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight makefile&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs makefile&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 定义了一个变量 objs， objs 包含着要生成 ledc.bin 所需的材料： start.o 和 main.o&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 这里要注意 start.o 一定要放到最前面！因为在后面链接的时候 start.o 要在最前面，因为 start.o 是最先要执行的文件！&lt;/span&gt;&lt;br&gt;objs := start.o main.o&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 使用依赖文件(objs:=start.o main.o),生成目标可执行文件ledc.bin&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-section&#34;&gt;ledc.bin:&lt;span class=&#34;hljs-variable&#34;&gt;$(objs)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;	&lt;span class=&#34;hljs-comment&#34;&gt;# 使用编译器 arm-linux-gnueabihf-ld 进行连接,-Ttext指定起始地址是0X87800000&lt;/span&gt;&lt;br&gt;	&lt;span class=&#34;hljs-comment&#34;&gt;# $^ 是所有依赖文件的集合,也就是变量objs的值(start.o main.o)&lt;/span&gt;&lt;br&gt;	&lt;span class=&#34;hljs-comment&#34;&gt;# 展开等价 arm-linux-gnueabihf-ld -Ttext 0X87800000 -o ledc.elf start.o main.o&lt;/span&gt;&lt;br&gt;	arm-linux-gnueabihf-ld -Ttext 0X87800000 -o ledc.elf &lt;span class=&#34;hljs-variable&#34;&gt;$^&lt;/span&gt;&lt;br&gt;	&lt;span class=&#34;hljs-comment&#34;&gt;# 将ledc.elf转换成ledc.bin文件&lt;/span&gt;&lt;br&gt;	&lt;span class=&#34;hljs-comment&#34;&gt;# $@ 的意思是目标集合，在这里就是 ledc.bin&lt;/span&gt;&lt;br&gt;	&lt;span class=&#34;hljs-comment&#34;&gt;# 展开等价 arm-linux-gnueabihf-objcopy -O binary -S ledc.elf ledc.bin&lt;/span&gt;&lt;br&gt;	arm-linux-gnueabihf-objcopy -O binary -S ledc.elf &lt;span class=&#34;hljs-variable&#34;&gt;$@&lt;/span&gt;&lt;br&gt;	&lt;span class=&#34;hljs-comment&#34;&gt;# 反汇编，生成 ledc.dis 文件&lt;/span&gt;&lt;br&gt;	arm-linux-gnueabihf-objdump -D -m arm ledc.elf &amp;gt; ledc.dis&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 下面规则展开等价 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# start.o:start.s&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;#	arm-linux-gnueabihf-gcc -Wall -nostdlib -c -O2 -o start.o start.s&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# %匹配任意字符&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-section&#34;&gt;%.o:%.s&lt;/span&gt;&lt;br&gt;	&lt;span class=&#34;hljs-comment&#34;&gt;# $@ 的意思是目标集合，在这里就是 %.o&lt;/span&gt;&lt;br&gt;	&lt;span class=&#34;hljs-comment&#34;&gt;# $&amp;lt; 所有依赖文件的集合，在这就是 %.s&lt;/span&gt;&lt;br&gt;	arm-linux-gnueabihf-gcc -Wall -nostdlib -c -o &lt;span class=&#34;hljs-variable&#34;&gt;$@&lt;/span&gt; &lt;span class=&#34;hljs-variable&#34;&gt;$&amp;lt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-section&#34;&gt;%.o:%.S&lt;/span&gt;&lt;br&gt;	arm-linux-gnueabihf-gcc -Wall -nostdlib -c -o &lt;span class=&#34;hljs-variable&#34;&gt;$@&lt;/span&gt; &lt;span class=&#34;hljs-variable&#34;&gt;$&amp;lt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-section&#34;&gt;%.o:%.c&lt;/span&gt;&lt;br&gt;	arm-linux-gnueabihf-gcc -Wall -nostdlib -c -o &lt;span class=&#34;hljs-variable&#34;&gt;$@&lt;/span&gt; &lt;span class=&#34;hljs-variable&#34;&gt;$&amp;lt;&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-section&#34;&gt;clean:&lt;/span&gt;&lt;br&gt;	rm -rf *.o ledc.bin ledc.elf ledc.dis&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;Makefile&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight makefile&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs makefile&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 类似于上面的只是用到了变量&lt;/span&gt;&lt;br&gt;CROSS_COMPILE	?= arm-linux-gnueabihf-&lt;br&gt;NAME 			?= ledc&lt;br&gt;&lt;br&gt;CC 				:= &lt;span class=&#34;hljs-variable&#34;&gt;$(CROSS_COMPILE)&lt;/span&gt;gcc&lt;br&gt;LD 				:= &lt;span class=&#34;hljs-variable&#34;&gt;$(CROSS_COMPILE)&lt;/span&gt;ld&lt;br&gt;OBJCOPY 		:= &lt;span class=&#34;hljs-variable&#34;&gt;$(CROSS_COMPILE)&lt;/span&gt;objcopy&lt;br&gt;OBJDUMP 		:= &lt;span class=&#34;hljs-variable&#34;&gt;$(CROSS_COMPILE)&lt;/span&gt;objdump&lt;br&gt;OBJS 			:= start.o main.o&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$(NAME)&lt;/span&gt;.bin:&lt;span class=&#34;hljs-variable&#34;&gt;$(OBJS)&lt;/span&gt;&lt;br&gt;	&lt;span class=&#34;hljs-variable&#34;&gt;$(LD)&lt;/span&gt; -Timx6ul.lds -o &lt;span class=&#34;hljs-variable&#34;&gt;$(NAME)&lt;/span&gt;.elf &lt;span class=&#34;hljs-variable&#34;&gt;$^&lt;/span&gt;&lt;br&gt;	&lt;span class=&#34;hljs-variable&#34;&gt;$(OBJCOPY)&lt;/span&gt; -O binary -S &lt;span class=&#34;hljs-variable&#34;&gt;$(NAME)&lt;/span&gt;.elf &lt;span class=&#34;hljs-variable&#34;&gt;$@&lt;/span&gt;&lt;br&gt;	&lt;span class=&#34;hljs-variable&#34;&gt;$(OBJDUMP)&lt;/span&gt; -D -m arm &lt;span class=&#34;hljs-variable&#34;&gt;$(NAME)&lt;/span&gt;.elf &amp;gt; &lt;span class=&#34;hljs-variable&#34;&gt;$(NAME)&lt;/span&gt;.dis&lt;br&gt;    &lt;br&gt;&lt;span class=&#34;hljs-section&#34;&gt;%.o:%.s&lt;/span&gt;&lt;br&gt;	&lt;span class=&#34;hljs-variable&#34;&gt;$(CC)&lt;/span&gt; -Wall -nostdlib -c -O2 -o &lt;span class=&#34;hljs-variable&#34;&gt;$@&lt;/span&gt; &lt;span class=&#34;hljs-variable&#34;&gt;$&amp;lt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-section&#34;&gt;%.o:%.S&lt;/span&gt;&lt;br&gt;	&lt;span class=&#34;hljs-variable&#34;&gt;$(CC)&lt;/span&gt; -Wall -nostdlib -c -O2 -o &lt;span class=&#34;hljs-variable&#34;&gt;$@&lt;/span&gt; &lt;span class=&#34;hljs-variable&#34;&gt;$&amp;lt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-section&#34;&gt;%.o:%.c&lt;/span&gt;&lt;br&gt;	&lt;span class=&#34;hljs-variable&#34;&gt;$(CC)&lt;/span&gt; -Wall -nostdlib -c -O2 -o &lt;span class=&#34;hljs-variable&#34;&gt;$@&lt;/span&gt; &lt;span class=&#34;hljs-variable&#34;&gt;$&amp;lt;&lt;/span&gt;&lt;br&gt;	&lt;br&gt;&lt;span class=&#34;hljs-section&#34;&gt;clean:&lt;/span&gt;&lt;br&gt;	rm -rf *.o &lt;span class=&#34;hljs-variable&#34;&gt;$(NAME)&lt;/span&gt;.bin &lt;span class=&#34;hljs-variable&#34;&gt;$(NAME)&lt;/span&gt;.elf &lt;span class=&#34;hljs-variable&#34;&gt;$(NAME)&lt;/span&gt;.dis&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;Makefile&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight makefile&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;61&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs makefile&#34;&gt;CROSS_COMPILE	?= arm-linux-gnueabihf-&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 编译后 目标名&lt;/span&gt;&lt;br&gt;TARGET			?= bsp&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 编译器相关&lt;/span&gt;&lt;br&gt;CC				:= &lt;span class=&#34;hljs-variable&#34;&gt;$(CROSS_COMPILE)&lt;/span&gt;gcc&lt;br&gt;LD				:= &lt;span class=&#34;hljs-variable&#34;&gt;$(CROSS_COMPILE)&lt;/span&gt;ld&lt;br&gt;OBJCOPY			:= &lt;span class=&#34;hljs-variable&#34;&gt;$(CROSS_COMPILE)&lt;/span&gt;objcopy&lt;br&gt;OBJDUMP			:= &lt;span class=&#34;hljs-variable&#34;&gt;$(CROSS_COMPILE)&lt;/span&gt;objdump&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# include dir&lt;/span&gt;&lt;br&gt;INCDIRS			:=  imx6ul  \&lt;br&gt;					bsp/clk \&lt;br&gt;					bsp/led \&lt;br&gt;					bsp/delay&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# sourc dir&lt;/span&gt;&lt;br&gt;SRCDIRS 		:=  project \&lt;br&gt;					bsp/clk \&lt;br&gt;					bsp/led \&lt;br&gt;					bsp/delay&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 这里用到了 patsubst 函数 通过这个函数给 INCDIRS 前面加了一个 -I&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 展开 INCLUDE := -I imx6ul -I bsp/clk -I bsp/led -I bsp/delay&lt;/span&gt;&lt;br&gt;INCLUDE 		:= &lt;span class=&#34;hljs-variable&#34;&gt;$(&lt;span class=&#34;hljs-built_in&#34;&gt;patsubst&lt;/span&gt; %, -I %, &lt;span class=&#34;hljs-variable&#34;&gt;$(INCDIRS)&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 这里用到了 foreach 和 wildcard 函数&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 展开 SFILES := project/start.S&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 展开 CFILES := project/main.c bsp/clk/bsp_clk.c bsp/led/bsp_led.c bsp/delay/bsp_delay.c&lt;/span&gt;&lt;br&gt;SFILES 			:= &lt;span class=&#34;hljs-variable&#34;&gt;$(&lt;span class=&#34;hljs-built_in&#34;&gt;foreach&lt;/span&gt; &lt;span class=&#34;hljs-built_in&#34;&gt;dir&lt;/span&gt;, &lt;span class=&#34;hljs-variable&#34;&gt;$(SRCDIRS)&lt;/span&gt;, $(&lt;span class=&#34;hljs-built_in&#34;&gt;wildcard&lt;/span&gt; &lt;span class=&#34;hljs-variable&#34;&gt;$(dir)&lt;/span&gt;/*.S)&lt;/span&gt;)&lt;br&gt;CFILES 			:= &lt;span class=&#34;hljs-variable&#34;&gt;$(&lt;span class=&#34;hljs-built_in&#34;&gt;foreach&lt;/span&gt; &lt;span class=&#34;hljs-built_in&#34;&gt;dir&lt;/span&gt;, &lt;span class=&#34;hljs-variable&#34;&gt;$(SRCDIRS)&lt;/span&gt;, $(&lt;span class=&#34;hljs-built_in&#34;&gt;wildcard&lt;/span&gt; &lt;span class=&#34;hljs-variable&#34;&gt;$(dir)&lt;/span&gt;/*.c)&lt;/span&gt;)&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 这里用到了 notdir 函数 除去路径函数&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 展开 SFILENDIR := start.S&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 展开 CFILENDIR := main.c bsp_clk.c bsp_led.c bsp_delay.c&lt;/span&gt;&lt;br&gt;SFILENDIR 		:= &lt;span class=&#34;hljs-variable&#34;&gt;$(&lt;span class=&#34;hljs-built_in&#34;&gt;notdir&lt;/span&gt; &lt;span class=&#34;hljs-variable&#34;&gt;$(SFILES)&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;CFILENDIR 		:= &lt;span class=&#34;hljs-variable&#34;&gt;$(&lt;span class=&#34;hljs-built_in&#34;&gt;notdir&lt;/span&gt; &lt;span class=&#34;hljs-variable&#34;&gt;$(CFILES)&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 展开 SOBJS := obj/start.o&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 展开 COBJS := obj/main.o obj/bsp_clk.o obj/bsp_led.o obj/bsp_delay.o&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 展开 OBJS  := obj/start.o obj/main.o obj/bsp_clk.o obj/bsp_led.o obj/bsp_delay.o&lt;/span&gt;&lt;br&gt;SOBJS 			:= &lt;span class=&#34;hljs-variable&#34;&gt;$(&lt;span class=&#34;hljs-built_in&#34;&gt;patsubst&lt;/span&gt; %, obj/%, $(SFILENDIR:.S=.o)&lt;/span&gt;)&lt;br&gt;COBJS 			:= &lt;span class=&#34;hljs-variable&#34;&gt;$(&lt;span class=&#34;hljs-built_in&#34;&gt;patsubst&lt;/span&gt; %, obj/%, $(CFILENDIR:.c=.o)&lt;/span&gt;)&lt;br&gt;OBJS 			:= &lt;span class=&#34;hljs-variable&#34;&gt;$(SOBJS)&lt;/span&gt; &lt;span class=&#34;hljs-variable&#34;&gt;$(COBJS)&lt;/span&gt;&lt;br&gt;&lt;br&gt;VPATH 			:= &lt;span class=&#34;hljs-variable&#34;&gt;$(SRCDIRS)&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;.PHONY&lt;/span&gt;: clean&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$(TARGET)&lt;/span&gt;.bin : &lt;span class=&#34;hljs-variable&#34;&gt;$(OBJS)&lt;/span&gt;&lt;br&gt;	&lt;span class=&#34;hljs-variable&#34;&gt;$(LD)&lt;/span&gt; -Timx6ul.lds -o &lt;span class=&#34;hljs-variable&#34;&gt;$(TARGET)&lt;/span&gt;.elf &lt;span class=&#34;hljs-variable&#34;&gt;$^&lt;/span&gt;&lt;br&gt;	&lt;span class=&#34;hljs-variable&#34;&gt;$(OBJCOPY)&lt;/span&gt; -O binary -S &lt;span class=&#34;hljs-variable&#34;&gt;$(TARGET)&lt;/span&gt;.elf &lt;span class=&#34;hljs-variable&#34;&gt;$@&lt;/span&gt;&lt;br&gt;	&lt;span class=&#34;hljs-variable&#34;&gt;$(OBJDUMP)&lt;/span&gt; -D -m arm &lt;span class=&#34;hljs-variable&#34;&gt;$(TARGET)&lt;/span&gt;.elf &amp;gt; &lt;span class=&#34;hljs-variable&#34;&gt;$(TARGET)&lt;/span&gt;.dis&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$(SOBJS)&lt;/span&gt; : obj/%.o : %.S&lt;br&gt;	&lt;span class=&#34;hljs-variable&#34;&gt;$(CC)&lt;/span&gt; -Wall -nostdlib -c -O2 &lt;span class=&#34;hljs-variable&#34;&gt;$(INCLUDE)&lt;/span&gt; -o &lt;span class=&#34;hljs-variable&#34;&gt;$@&lt;/span&gt; &lt;span class=&#34;hljs-variable&#34;&gt;$&amp;lt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$(COBJS)&lt;/span&gt; : obj/%.o : %.c&lt;br&gt;	&lt;span class=&#34;hljs-variable&#34;&gt;$(CC)&lt;/span&gt; -Wall -nostdlib -c -O2 &lt;span class=&#34;hljs-variable&#34;&gt;$(INCLUDE)&lt;/span&gt; -o &lt;span class=&#34;hljs-variable&#34;&gt;$@&lt;/span&gt; &lt;span class=&#34;hljs-variable&#34;&gt;$&amp;lt;&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-section&#34;&gt;clean:&lt;/span&gt;&lt;br&gt;	rm -rf &lt;span class=&#34;hljs-variable&#34;&gt;$(TARGET)&lt;/span&gt;.elf &lt;span class=&#34;hljs-variable&#34;&gt;$(TARGET)&lt;/span&gt;.dis &lt;span class=&#34;hljs-variable&#34;&gt;$(TARGET)&lt;/span&gt;.bin &lt;span class=&#34;hljs-variable&#34;&gt;$(COBJS)&lt;/span&gt; &lt;span class=&#34;hljs-variable&#34;&gt;$(SOBJS)&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://www.oikiou.top/2020/d4436089/</guid>
            <title>Linux 杂乱学习笔记</title>
            <link>https://www.oikiou.top/2020/d4436089/</link>
            <category>linux</category>
            <pubDate>Thu, 29 Oct 2020 13:12:15 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;前言&#34;&gt;&lt;a href=&#34;#前言&#34; class=&#34;headerlink&#34; title=&#34;前言&#34;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;Uboot、根文件系统、Linux&lt;/li&gt;
&lt;li&gt;Linux驱动分为三大类，字符设备驱动、块设备驱动、网络设备驱动&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;linux入门操作&#34;&gt;&lt;a href=&#34;#linux入门操作&#34; class=&#34;headerlink&#34; title=&#34;linux入门操作&#34;&gt;&lt;/a&gt;linux入门操作&lt;/h1&gt;&lt;h2 id=&#34;基础&#34;&gt;&lt;a href=&#34;#基础&#34; class=&#34;headerlink&#34; title=&#34;基础&#34;&gt;&lt;/a&gt;基础&lt;/h2&gt;&lt;p&gt;&lt;code&gt;user@machine: ~$&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$ 代表当前用户是普通用户&lt;/li&gt;
&lt;li&gt;# 代表当前用户是root&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;系统目录&#34;&gt;&lt;a href=&#34;#系统目录&#34; class=&#34;headerlink&#34; title=&#34;系统目录&#34;&gt;&lt;/a&gt;系统目录&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;  &lt;strong&gt;&amp;#x2F;bin&lt;/strong&gt;&lt;br&gt;  存储一些二进制可执行命令文件，&amp;#x2F;usr&amp;#x2F;bin也存放了一些基于用户的命令文件。一般用户可用, 启动可能会用到的命令.&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;&amp;#x2F;sbin&lt;/strong&gt;&lt;br&gt;  存储了很多系统命令，  &amp;#x2F;usr&amp;#x2F;sbin也存储了许多系统命令。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;&amp;#x2F;root&lt;/strong&gt;&lt;br&gt;  超级用户 root的根目录文件。 &lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;&amp;#x2F;home&lt;/strong&gt;&lt;br&gt;  普通用户默认目录，在该目录下，每个用户都有一以本名命的文件夹。 &lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;&amp;#x2F;boot&lt;/strong&gt;&lt;br&gt;  存放 Ubuntu系统&lt;strong&gt;内核和启动&lt;/strong&gt;文件。 &lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;&amp;#x2F;mnt&lt;/strong&gt;&lt;br&gt;  通常包括系统引导后被挂载的文件点。 通常包括系统引导后被挂载的文件点。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;&amp;#x2F;dev&lt;/strong&gt;&lt;br&gt;  存放设备文件，我们后面学习 Linux驱动主要是跟这个文件夹打交道的。 &lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;&amp;#x2F;etc&lt;/strong&gt;&lt;br&gt;  保存系统管理所需的&lt;strong&gt;配置文件&lt;/strong&gt;和目录。 &lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;&amp;#x2F;lib&lt;/strong&gt;&lt;br&gt;  保存系统程序运行所需的库文件， &amp;#x2F;usr&amp;#x2F;lib下存放了一些用于普通户的库文件。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;&amp;#x2F;lost+found&lt;/strong&gt;&lt;br&gt;  一般为空，当系统非正常关机以后此文件夹会保存些零散文件。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;&amp;#x2F;var&lt;/strong&gt; (variable 可变动的)&lt;br&gt;  存储一些不断变化的文件 ，比如日志文件 。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;&amp;#x2F;usr&lt;/strong&gt;  (Unix Software Resource)&lt;br&gt;  包括与系统用户直接有关的文件和目录，比如应程序所需库。 &lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;&amp;#x2F;media&lt;/strong&gt;&lt;br&gt;  存放 Ubuntu系统自动挂载的设备文件。 &lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;&amp;#x2F;proc&lt;/strong&gt;&lt;br&gt;  虚拟目录，不实际存储在磁盘上通常用来保系统信息和进程。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;&amp;#x2F;tmp&lt;/strong&gt;&lt;br&gt;  存储系统和用户的临时文件，该夹对所有都提供读写权限。 &lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;&amp;#x2F;opt&lt;/strong&gt;&lt;br&gt;  可选第三方程序的存放目录。 &lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;&amp;#x2F;sys&lt;/strong&gt;&lt;br&gt;  系统设备和文件层次结构，并向用户程序提供详细的内核数据信息。 &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;基本操作&#34;&gt;&lt;a href=&#34;#基本操作&#34; class=&#34;headerlink&#34; title=&#34;基本操作&#34;&gt;&lt;/a&gt;基本操作&lt;/h2&gt;&lt;h3 id=&#34;快捷键&#34;&gt;&lt;a href=&#34;#快捷键&#34; class=&#34;headerlink&#34; title=&#34;快捷键&#34;&gt;&lt;/a&gt;快捷键&lt;/h3&gt;&lt;p&gt;^x(Ctrl+x)&lt;/p&gt;
&lt;p&gt;^C	终止前面运行程序&lt;/p&gt;
&lt;p&gt;^D	退出exit&lt;/p&gt;
&lt;p&gt;^L	清屏&lt;/p&gt;
&lt;p&gt;^A	光标移到到最前面&lt;/p&gt;
&lt;p&gt;^E	光标移到到最后面&lt;/p&gt;
&lt;p&gt;^U	删除光标前面所有字符&lt;/p&gt;
&lt;p&gt;^K	删除光标前面所有字符&lt;/p&gt;
&lt;p&gt;Alt+Backspace 删除一个单词&lt;/p&gt;
&lt;p&gt;^R	搜索历史命令&lt;/p&gt;
&lt;p&gt;Alt+.	引用最后一个命令的参数等价于!$&lt;/p&gt;
&lt;p&gt;Esc  . 	同上&lt;/p&gt;
&lt;h3 id=&#34;历史命令&#34;&gt;&lt;a href=&#34;#历史命令&#34; class=&#34;headerlink&#34; title=&#34;历史命令&#34;&gt;&lt;/a&gt;历史命令&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;# history &lt;/li&gt;
&lt;li&gt;光标上下&lt;/li&gt;
&lt;li&gt;^R	搜索历史命令&lt;/li&gt;
&lt;li&gt;!200     特定序号&lt;/li&gt;
&lt;li&gt;!字符串     以某字符串开头的&lt;/li&gt;
&lt;li&gt;!$     引用最后一个命令的参数&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;  按&lt;code&gt;Ctrl+R&lt;/code&gt;可以调出 bash中曾经的历史命令,&lt;/p&gt;
&lt;p&gt;  再次按&lt;code&gt;Ctrl+R&lt;/code&gt;可以切换匹配的内容&lt;/p&gt;
&lt;p&gt;  光标会停留在 第一次被匹配的字符上, (即使后面你再输入被匹配的字符, 光标也不移动)&lt;/p&gt;
&lt;p&gt;  然后, 根据你的需要 来进行任何一次的操作, 都表示接受: (也就是说, 这个时候, 你就可以当作 你已经输入了这样的命令, 你就可以直接对该命令进行操作&amp;#x2F;编辑&amp;#x2F;修改了….)&lt;/p&gt;
&lt;p&gt;  如:&lt;br&gt;  向前, 向后进行编辑: &lt;code&gt;ctrl+F&lt;/code&gt;, &lt;code&gt;ctrl+B&lt;/code&gt;&lt;br&gt;  删除前面,后面的字符: &lt;code&gt;ctrl+D&lt;/code&gt;,&lt;code&gt; ctrl+H&lt;/code&gt;&lt;br&gt;  移动到命令结尾,开头:&lt;code&gt;ctrl+E&lt;/code&gt;,  &lt;code&gt;ctrl+A&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;文件类型-amp-权限&#34;&gt;&lt;a href=&#34;#文件类型-amp-权限&#34; class=&#34;headerlink&#34; title=&#34;文件类型&amp;amp;权限&#34;&gt;&lt;/a&gt;文件类型&amp;amp;权限&lt;/h2&gt;&lt;h3 id=&#34;文件类型&#34;&gt;&lt;a href=&#34;#文件类型&#34; class=&#34;headerlink&#34; title=&#34;文件类型&#34;&gt;&lt;/a&gt;文件类型&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;ls&lt;/span&gt; -l&lt;/span&gt;&lt;br&gt;drwxr-xr-x 1 root root    4096 May 21  2019 vmware-tools&lt;br&gt;lrwxrwxrwx 1 root root      23 May 21  2019 vtrgb -&amp;gt; /etc/alternatives/vtrgb&lt;br&gt;-rw-r--r-- 1 root root    4942 Apr  9  2019 wgetrc &lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;第一个字母&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;普通文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;d&lt;/td&gt;
&lt;td&gt;目录文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;c&lt;/td&gt;
&lt;td&gt;字符设备文件，串口，音频等&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;b&lt;/td&gt;
&lt;td&gt;块设备文件，U盘，硬盘等&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;l&lt;/td&gt;
&lt;td&gt;符号链接&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;s&lt;/td&gt;
&lt;td&gt;套接字文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;p&lt;/td&gt;
&lt;td&gt;管道文件 FIFO&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h3 id=&#34;文件权限&#34;&gt;&lt;a href=&#34;#文件权限&#34; class=&#34;headerlink&#34; title=&#34;文件权限&#34;&gt;&lt;/a&gt;文件权限&lt;/h3&gt;&lt;p&gt;其后九个字母，每三个为一组。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;第一组表示用户的权限&lt;/li&gt;
&lt;li&gt;第二组表示用户组的权限&lt;/li&gt;
&lt;li&gt;第三组表示其他用户的权限&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;列如&lt;code&gt;-rw-r--r-- 1 root root    4942 Apr  9  2019 wgetrc&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;root用户权限是&lt;code&gt;rw-&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;root组的权限是&lt;code&gt;r--&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;其他用户权限是&lt;code&gt;r--&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;字母&lt;/th&gt;
&lt;th&gt;二进制&lt;/th&gt;
&lt;th&gt;值&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;r&lt;/td&gt;
&lt;td&gt;100&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;读&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;w&lt;/td&gt;
&lt;td&gt;010&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;写&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;x&lt;/td&gt;
&lt;td&gt;001&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;执行&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;字母&lt;/th&gt;
&lt;th&gt;归属&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;a&lt;/td&gt;
&lt;td&gt;all user&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;u&lt;/td&gt;
&lt;td&gt;user&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;g&lt;/td&gt;
&lt;td&gt;group user&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;o&lt;/td&gt;
&lt;td&gt;other user&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;字母&lt;/th&gt;
&lt;th&gt;操作&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;&amp;#x3D;&lt;/td&gt;
&lt;td&gt;拥有权限&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;+&lt;/td&gt;
&lt;td&gt;增加权限&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;删除权限&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h4 id=&#34;chmod-文件权限修改&#34;&gt;&lt;a href=&#34;#chmod-文件权限修改&#34; class=&#34;headerlink&#34; title=&#34;chmod 文件权限修改&#34;&gt;&lt;/a&gt;chmod 文件权限修改&lt;/h4&gt;&lt;p&gt;chmod [参数 ] [文件名 &amp;#x2F;目录名]&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;参数&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;-c&lt;/td&gt;
&lt;td&gt;类似-v，回显更改的部分&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-f&lt;/td&gt;
&lt;td&gt;不显示错误信息&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-R&lt;/td&gt;
&lt;td&gt;递归&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-v&lt;/td&gt;
&lt;td&gt;显示执行过程&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;修改权限&lt;/span&gt; &lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;test_dir文件夹权限更改为 rwxrwxrwx&lt;/span&gt;&lt;br&gt;chmod 777 test_dir&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;向组用户添加rwx权限&lt;/span&gt; &lt;br&gt;chmod g+rwx&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;递归更改为rwx权限&lt;/span&gt;&lt;br&gt;chmod -R 777 test_dir&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;755&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;drwxr-xr-x&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h4 id=&#34;chown-文件夹归属修改&#34;&gt;&lt;a href=&#34;#chown-文件夹归属修改&#34; class=&#34;headerlink&#34; title=&#34;chown 文件夹归属修改&#34;&gt;&lt;/a&gt;chown 文件夹归属修改&lt;/h4&gt;&lt;p&gt;chown [参数 ] [用户名 .&amp;lt;组名 &amp;gt;] [文件名 &amp;#x2F;目录 ]&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;参数&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;-c&lt;/td&gt;
&lt;td&gt;类似-v，回显更改的部分&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-f&lt;/td&gt;
&lt;td&gt;不显示错误信息&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-h&lt;/td&gt;
&lt;td&gt;只对符号链接修改&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-R&lt;/td&gt;
&lt;td&gt;递归&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-v&lt;/td&gt;
&lt;td&gt;显示执行过程&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;递归修改&lt;span class=&#34;hljs-built_in&#34;&gt;dir&lt;/span&gt;文件夹归属者为 frank&lt;/span&gt;&lt;br&gt;sudo chown -Rv frank.frank dir/&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h3 id=&#34;命名别名&#34;&gt;&lt;a href=&#34;#命名别名&#34; class=&#34;headerlink&#34; title=&#34;命名别名&#34;&gt;&lt;/a&gt;命名别名&lt;/h3&gt;&lt;p&gt;#alias 别名&amp;#x3D;“路径” 起别名&lt;/p&gt;
&lt;p&gt;#unalias 别名  取消别名&lt;/p&gt;
&lt;p&gt;#type -a ls  查看命令类型&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;别名优先级最高&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;#ls			别名优先&lt;/p&gt;
&lt;p&gt;#&amp;#x2F;ls 		 跳过别名&lt;/p&gt;
&lt;h2 id=&#34;用户和组-管理&#34;&gt;&lt;a href=&#34;#用户和组-管理&#34; class=&#34;headerlink&#34; title=&#34;用户和组 管理&#34;&gt;&lt;/a&gt;用户和组 管理&lt;/h2&gt;&lt;h3 id=&#34;etc-passwd文件&#34;&gt;&lt;a href=&#34;#etc-passwd文件&#34; class=&#34;headerlink&#34; title=&#34;/etc/passwd文件&#34;&gt;&lt;/a&gt;&lt;code&gt;/etc/passwd&lt;/code&gt;文件&lt;/h3&gt;&lt;p&gt;Linux 系统中的 &lt;code&gt;/etc/passwd&lt;/code&gt; 文件，是系统用户配置文件，存储了系统中所有用户的基本信息，并且所有用户都可以对此文件执行读操作。&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;查看用户和用户组&lt;/span&gt;&lt;br&gt;sudo cat /etc/passwd&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;每行用户信息都以 “：” 作为分隔符，划分为 7 个字段，每个字段所表示的含义如下：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  &lt;strong&gt;用户名：密码：UID（用户ID）：GID（组ID）：描述性信息：主目录：默认Shell&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;/2020/d4436089/63d0f703918fa0ece0691081209759ee3c6ddb94.jpg&#34;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  读者可能会问，Linux 系统中默认怎么会有这么多的用户？这些用户中的绝大多数是系统或服务正常运行所必需的用户，这种用户通常称为系统用户或伪用户。系统用户无法用来登录系统，但也不能删除，因为一旦删除，依赖这些用户运行的服务或程序就不能正常执行，会导致系统问题。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;UID-用户ID&#34;&gt;&lt;a href=&#34;#UID-用户ID&#34; class=&#34;headerlink&#34; title=&#34;UID 用户ID&#34;&gt;&lt;/a&gt;UID 用户ID&lt;/h4&gt;&lt;p&gt;UID，也就是用户 ID。每个用户都有唯一的一个 UID，Linux 系统通过 UID 来识别不同的用户。&lt;/p&gt;
&lt;p&gt;实际上，UID 就是一个 0~65535 之间的数，不同范围的数字表示不同的用户身份，具体如表 1 所示。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;UID 范围&lt;/th&gt;
&lt;th&gt;用户身份&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;超级用户。UID 为 0 就代表这个账号是管理员账号。在 Linux 中，如何把普通用户升级成管理员呢？只需把其他用户的 UID 修改为 0 就可以了，这一点和 Windows 是不同的。不过不建议建立多个管理员账号。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1~499&lt;/td&gt;
&lt;td&gt;系统用户（伪用户）。也就是说，此范围的 UID 保留给系统使用。其中，1&lt;del&gt;99 用于系统自行创建的账号；100&lt;/del&gt;499 分配给有系统账号需求的用户。  其实，除了 0 之外，其他的 UID 并无不同，这里只是默认 500 以下的数字给系统作为保留账户，只是一个公认的习惯而已。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;500~65535&lt;/td&gt;
&lt;td&gt;普通用户。通常这些 UID 已经足够用户使用了。但不够用也没关系，2.6.x 内核之后的 Linux 系统已经可以支持 232 个 UID 了。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h4 id=&#34;GID-组ID&#34;&gt;&lt;a href=&#34;#GID-组ID&#34; class=&#34;headerlink&#34; title=&#34;GID 组ID&#34;&gt;&lt;/a&gt;GID 组ID&lt;/h4&gt;&lt;p&gt;全称“Group ID”，简称“组ID”，表示用户初始组的组 ID 号。这里需要解释一下初始组和附加组的概念。&lt;/p&gt;
&lt;p&gt;初始组，指用户登陆时就拥有这个用户组的相关权限。每个用户的初始组只能有一个，通常就是将和此用户的用户名相同的组名作为该用户的初始组。比如说，我们手工添加用户 lamp，在建立用户 lamp 的同时，就会建立 lamp 组作为 lamp 用户的初始组。&lt;/p&gt;
&lt;p&gt;附加组，指用户可以加入多个其他的用户组，并拥有这些组的权限。每个用户只能有一个初始组，除初始组外，用户再加入其他的用户组，这些用户组就是这个用户的附加组。附加组可以有多个，而且用户可以有这些附加组的权限。&lt;/p&gt;
&lt;p&gt;举例来说，刚刚的 lamp 用户除属于初始组 lamp 外，我又把它加入了 users 组，那么 lamp 用户同时属于 lamp 组和 users 组，其中 lamp 是初始组，users 是附加组。&lt;/p&gt;
&lt;p&gt;当然，初始组和附加组的身份是可以修改的，但是我们在工作中不修改初始组，只修改附加组，因为修改了初始组有时会让管理员逻辑混乱。&lt;/p&gt;
&lt;p&gt;需要注意的是，在 &amp;#x2F;etc&amp;#x2F;passwd 文件的第四个字段中看到的 ID 是这个用户的初始组。&lt;/p&gt;
&lt;h3 id=&#34;etc-shadow-文件&#34;&gt;&lt;a href=&#34;#etc-shadow-文件&#34; class=&#34;headerlink&#34; title=&#34;/etc/shadow 文件&#34;&gt;&lt;/a&gt;&lt;code&gt;/etc/shadow&lt;/code&gt; 文件&lt;/h3&gt;&lt;p&gt;&lt;code&gt;/etc/shadow&lt;/code&gt; 文件，用于存储 Linux 系统中用户的密码信息，又称为“影子文件”。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://c.biancheng.net/view/840.html&#34;&gt;参考&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;查看密码文件&lt;/span&gt; &lt;br&gt;sudo cat /etc/shadow&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;每行用户信息被划分为 9 个字段。每个字段的含义如下(时间的单位是天)：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  &lt;strong&gt;用户名：加密密码：最后一次修改时间：最小修改时间间隔：密码有效期：密码需要变更前的警告天数：密码过期后的宽限时间：账号失效时间：保留字段&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;frank@ubuntu-hyper:~$ sudo cat /etc/shadow&lt;br&gt;root:!:19361:0:99999:7:::&lt;br&gt;daemon:*:19235:0:99999:7:::&lt;br&gt;...&lt;br&gt;frank:$strstrstrssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss/:19361:0:99999:7:::&lt;br&gt;...&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&#34;最后一次修改时间&#34;&gt;&lt;a href=&#34;#最后一次修改时间&#34; class=&#34;headerlink&#34; title=&#34;最后一次修改时间&#34;&gt;&lt;/a&gt;最后一次修改时间&lt;/h4&gt;&lt;p&gt;此字段表示最后一次修改密码的时间，可是，为什么 root 用户显示的是15775 呢？&lt;/p&gt;
&lt;p&gt;这是因为，Linux 计算日期的时间是以1970 年1 月1 日（UTC&amp;#x2F;GMT的午夜）作为1 不断累加得到的时间，到1971 年1 月1 日，则为366 天。这里显示15775 天，也就是说，此 root 账号在1970 年1 月1 日之后的第15775 天修改的 root 用户密码。&lt;/p&gt;
&lt;p&gt;那么，到底15775 代表的是哪一天呢？可以使用如下命令进行换算：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;frank@ubuntu-hyper:~$ date -d &amp;quot;1970-01-01 19361 days&amp;quot;&lt;br&gt;2023年 01月 04日 星期三 00:00:00 CST&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;可以看到，通过以上命令，即可将其换算为我们习惯的系统日期。&lt;/p&gt;
&lt;h3 id=&#34;etc-group文件&#34;&gt;&lt;a href=&#34;#etc-group文件&#34; class=&#34;headerlink&#34; title=&#34;/etc/group文件&#34;&gt;&lt;/a&gt;&lt;code&gt;/etc/group&lt;/code&gt;文件&lt;/h3&gt;&lt;p&gt;&amp;#x2F;ect&amp;#x2F;group 文件是用户组配置文件，即用户组的所有信息都存放在此文件中。&lt;/p&gt;
&lt;p&gt;此文件是记录组 ID（GID）和组名相对应的文件。前面讲过，etc&amp;#x2F;passwd 文件中每行用户信息的第四个字段记录的是用户的初始组 ID，那么，此 GID 的组名到底是什么呢？就要从 &amp;#x2F;etc&amp;#x2F;group 文件中查找。&lt;/p&gt;
&lt;p&gt;各用户组中，还是以 “：” 作为字段之间的分隔符，分为 4 个字段，每个字段对应的含义为：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  &lt;strong&gt;组名：密码：GID：该用户组中的用户列表&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;user用户管理&#34;&gt;&lt;a href=&#34;#user用户管理&#34; class=&#34;headerlink&#34; title=&#34;user用户管理&#34;&gt;&lt;/a&gt;user用户管理&lt;/h3&gt;&lt;h4 id=&#34;su-切换root&#34;&gt;&lt;a href=&#34;#su-切换root&#34; class=&#34;headerlink&#34; title=&#34;su 切换root&#34;&gt;&lt;/a&gt;su 切换root&lt;/h4&gt;&lt;p&gt;切换成root用户&lt;/p&gt;
&lt;p&gt;“sudo su 用户名 ”即可切换回去&lt;/p&gt;
&lt;p&gt;第一次运行root没有密码需要先设置一个密码&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs linux&#34;&gt;sudo passwd root #输入密码就行了&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h4 id=&#34;查看用户&#34;&gt;&lt;a href=&#34;#查看用户&#34; class=&#34;headerlink&#34; title=&#34;查看用户&#34;&gt;&lt;/a&gt;查看用户&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;cat &amp;#x2F;etc&amp;#x2F;passwd文件就行了&lt;/li&gt;
&lt;li&gt;看第三个参数:500以上的,就是后面建的用户了.其它则为系统的用户&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;adduser添加用户-优&#34;&gt;&lt;a href=&#34;#adduser添加用户-优&#34; class=&#34;headerlink&#34; title=&#34;adduser添加用户(优)&#34;&gt;&lt;/a&gt;adduser添加用户(优)&lt;/h4&gt;&lt;p&gt;添加用户（需要Root权限）&lt;/p&gt;
&lt;p&gt;会自动为创建的用户指定主目录、系统shell版本，会在创建时输入用户密码。&lt;/p&gt;
&lt;h4 id=&#34;useradd-添加用户&#34;&gt;&lt;a href=&#34;#useradd-添加用户&#34; class=&#34;headerlink&#34; title=&#34;useradd 添加用户&#34;&gt;&lt;/a&gt;useradd 添加用户&lt;/h4&gt;&lt;p&gt;需要使用参数选项指定上述基本设置，如果不使用任何参数，则创建的用户无密码、无主目录、没有指定shell版本。&lt;/p&gt;
&lt;h4 id=&#34;deluser删除用户&#34;&gt;&lt;a href=&#34;#deluser删除用户&#34; class=&#34;headerlink&#34; title=&#34;deluser删除用户&#34;&gt;&lt;/a&gt;deluser删除用户&lt;/h4&gt;&lt;p&gt;删除用户（需要Root权限）&lt;/p&gt;
&lt;h4 id=&#34;userdel-删除用户&#34;&gt;&lt;a href=&#34;#userdel-删除用户&#34; class=&#34;headerlink&#34; title=&#34;userdel  删除用户&#34;&gt;&lt;/a&gt;userdel  删除用户&lt;/h4&gt;&lt;h4 id=&#34;◬-usermod-修改账号设定&#34;&gt;&lt;a href=&#34;#◬-usermod-修改账号设定&#34; class=&#34;headerlink&#34; title=&#34;◬ usermod 修改账号设定&#34;&gt;&lt;/a&gt;&lt;strong&gt;◬ usermod 修改账号设定&lt;/strong&gt;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;参数说明&lt;/strong&gt;：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;  -b, --badnames                allow bad names&lt;br&gt;  -c, --comment 注释            GECOS 字段的新值&lt;br&gt;  -d, --home HOME_DIR           用户的新主目录&lt;br&gt;  -e, --expiredate EXPIRE_DATE  设定帐户过期的日期为 EXPIRE_DATE&lt;br&gt;  -f, --inactive INACTIVE       过期 INACTIVE 天数后，设定密码为失效状态&lt;br&gt;  -g, --gid GROUP               强制使用 GROUP 为新主组&lt;br&gt;◬ -G, --groups GROUPS           新的附加组列表 GROUPS&lt;br&gt;  -a, --append GROUP            将用户追加至上边 -G 中提到的附加组中，&lt;br&gt;                                并不从其它组中删除此用户&lt;br&gt;  -h, --help                    显示此帮助信息并推出&lt;br&gt;  -l, --login LOGIN             新的登录名称&lt;br&gt;  -L, --lock                    锁定用户帐号&lt;br&gt;  -m, --move-home               将家目录内容移至新位置 (仅于 -d 一起使用)&lt;br&gt;  -o, --non-unique              允许使用重复的(非唯一的) UID&lt;br&gt;  -p, --password PASSWORD       将加密过的密码 (PASSWORD) 设为新密码&lt;br&gt;  -R, --root CHROOT_DIR         chroot 到的目录&lt;br&gt;  -P, --prefix PREFIX_DIR       prefix directory where are located the /etc/* files&lt;br&gt;  -s, --shell SHELL             该用户帐号的新登录 shell&lt;br&gt;  -u, --uid UID                 用户帐号的新 UID&lt;br&gt;  -U, --unlock                  解锁用户帐号&lt;br&gt;  -v, --add-subuids FIRST-LAST  添加子 UID 范围&lt;br&gt;  -V, --del-subuids FIRST-LAST  移除子 UID 范围&lt;br&gt;  -w, --add-subgids FIRST-LAST  添加子 GID 范围&lt;br&gt;  -W, --del-subgids FIRST-LAST  移除子 GID 范围&lt;br&gt;  -Z, --selinux-user  SEUSER       用户账户的新 SELinux 用户映射&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;示例&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;将 userA 加入到 groupB 中&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;Note 当时这个权限修改了但是没有生效 可能是要重开 ssh 我当时是重启主机解决的&lt;/span&gt;&lt;br&gt;usermod -aG userA groupB&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;修改用户说明&lt;/span&gt;&lt;br&gt;usermod -c &amp;quot;test user&amp;quot; lamp &lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;





&lt;h4 id=&#34;passwd-设置修改密码&#34;&gt;&lt;a href=&#34;#passwd-设置修改密码&#34; class=&#34;headerlink&#34; title=&#34;passwd 设置修改密码&#34;&gt;&lt;/a&gt;passwd 设置修改密码&lt;/h4&gt;&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;sudo passwd root&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h4 id=&#34;id查看用户UID-GID-归属-组&#34;&gt;&lt;a href=&#34;#id查看用户UID-GID-归属-组&#34; class=&#34;headerlink&#34; title=&#34;id查看用户UID GID 归属 组&#34;&gt;&lt;/a&gt;id查看用户UID GID 归属 组&lt;/h4&gt;&lt;h4 id=&#34;groupadd-添加用户组&#34;&gt;&lt;a href=&#34;#groupadd-添加用户组&#34; class=&#34;headerlink&#34; title=&#34;groupadd 添加用户组&#34;&gt;&lt;/a&gt;groupadd 添加用户组&lt;/h4&gt;&lt;h4 id=&#34;groupdel-删除用户组&#34;&gt;&lt;a href=&#34;#groupdel-删除用户组&#34; class=&#34;headerlink&#34; title=&#34;groupdel 删除用户组&#34;&gt;&lt;/a&gt;groupdel 删除用户组&lt;/h4&gt;&lt;h4 id=&#34;groupmod修改用户组信息&#34;&gt;&lt;a href=&#34;#groupmod修改用户组信息&#34; class=&#34;headerlink&#34; title=&#34;groupmod修改用户组信息&#34;&gt;&lt;/a&gt;groupmod修改用户组信息&lt;/h4&gt;&lt;h3 id=&#34;Note&#34;&gt;&lt;a href=&#34;#Note&#34; class=&#34;headerlink&#34; title=&#34;Note&#34;&gt;&lt;/a&gt;Note&lt;/h3&gt;&lt;h4 id=&#34;给用户添加sudo权限-以及免除密码&#34;&gt;&lt;a href=&#34;#给用户添加sudo权限-以及免除密码&#34; class=&#34;headerlink&#34; title=&#34;给用户添加sudo权限 以及免除密码&#34;&gt;&lt;/a&gt;给用户添加sudo权限 以及免除密码&lt;/h4&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;将用户添加一个附加sudo群组就好&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;下面有两种方法&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;1 修改group&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;查看sudo群组的&lt;span class=&#34;hljs-built_in&#34;&gt;id&lt;/span&gt;&lt;/span&gt;&lt;br&gt;cat /etc/group | grep &amp;#x27;sudo&amp;#x27;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;给new_username增加一个sudo群组&lt;/span&gt;&lt;br&gt;usermod -G 27 new_username&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;id&lt;/span&gt;可以看到new_username多了一个群组&lt;/span&gt;&lt;br&gt;id new_username&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;2 修改sudoers&lt;/span&gt;&lt;br&gt;vim /etc/sudoers&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;然后在root ALL=(ALL:ALL) ALL下面添加上：&lt;/span&gt; &lt;br&gt;new_username ALL=(ALL:ALL) ALL&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;免除全部密码&lt;/span&gt;&lt;br&gt;your_user_name ALL=(ALL) NOPASSWD: ALL&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;免除部分命令的密码&lt;/span&gt;&lt;br&gt;your_user_name   ALL= (root) NOPASSWD: /sbin/mount, (root) NOPASSWD: /bin/umount, (root) NOPASSWD: /mnt/mount, (root) NOPASSWD: /bin/rm, (root) NOPASSWD: /usr/bin/make, (root) NOPASSWD: /bin/ln, (root) NOPASSWD: /bin/sh, (root) NOPASSWD: /bin/mv, (root) NOPASSWD: /bin/chown, (root) NOPASSWD: /bin/chgrp, (root) NOPASSWD: /bin/cp, (root) NOPASSWD: /bin/chmod&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;防火墙&#34;&gt;&lt;a href=&#34;#防火墙&#34; class=&#34;headerlink&#34; title=&#34;防火墙&#34;&gt;&lt;/a&gt;防火墙&lt;/h2&gt;&lt;p&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/139381645&#34;&gt;https://zhuanlan.zhihu.com/p/139381645&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://wiki.ubuntu.org.cn/Ufw%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97&#34;&gt;https://wiki.ubuntu.org.cn/Ufw%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 安装&lt;/span&gt;&lt;br&gt;sudo apt-get install ufw&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 启动&lt;/span&gt;&lt;br&gt;sudo ufw &lt;span class=&#34;hljs-built_in&#34;&gt;enable&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 以下这条命令 我们设置默认的规则为allow， 这样除非指明打开的端口， 否则所有端口默认都是关闭的。&lt;/span&gt;&lt;br&gt;sudo ufw default deny &lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 查看状态&lt;/span&gt;&lt;br&gt;sudo ufw status &lt;br&gt;&lt;br&gt; ufw  [--dry-run]  route [delete] [insert NUM] allow|deny|reject|&lt;span class=&#34;hljs-built_in&#34;&gt;limit&lt;/span&gt; [&lt;span class=&#34;hljs-keyword&#34;&gt;in&lt;/span&gt;|out on  INTERFACE] [&lt;span class=&#34;hljs-built_in&#34;&gt;log&lt;/span&gt;|log-all] [proto PROTOCOL] [from ADDRESS [port PORT]] [to ADDRESS [port PORT]]&lt;br&gt;&lt;br&gt;sudo ufw allow 80 允许外部访问80端口&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 这个好像最大一次性只能开一百个&lt;/span&gt;&lt;br&gt;sudo ufw allow 50000:50100/tcp 允许外部访问端口范围&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 允许eth0的所有流量&lt;/span&gt;&lt;br&gt;sudo ufw allow &lt;span class=&#34;hljs-keyword&#34;&gt;in&lt;/span&gt; on eth0&lt;br&gt;&lt;br&gt;sudo ufw delete allow 80 禁止外部访问80 端口&lt;br&gt;&lt;br&gt;sudo ufw allow from 192.168.1.1 允许此IP访问所有的本机端口&lt;br&gt;&lt;br&gt;sudo ufw deny smtp 禁止外部访问smtp服务&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 想要允许连接通过指定网络接口，使用allow in on 和 网络接口的名字：&lt;/span&gt;&lt;br&gt;sudo ufw allow &lt;span class=&#34;hljs-keyword&#34;&gt;in&lt;/span&gt; on eth2 to any port 3306&lt;br&gt;&lt;br&gt;sudo ufw delete allow smtp 删除上面建立的某条规则&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 要拒绝所有的TCP流量从10.0.0.0/8 到192.168.0.1地址的22端口&lt;/span&gt;&lt;br&gt;sudo ufw deny proto tcp from 10.0.0.0/8 to 192.168.0.1 port 22 &lt;br&gt; &lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 可以允许所有RFC1918网络（局域网/无线局域网的）访问这个主机（/8,/16,/12是一种网络分级）：&lt;/span&gt;&lt;br&gt;sudo ufw allow from 10.0.0.0/8&lt;br&gt;&lt;br&gt;sudo ufw allow from 172.16.0.0/12&lt;br&gt;&lt;br&gt;sudo ufw allow from 192.168.0.0/16&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;





&lt;h2 id=&#34;环境变量&#34;&gt;&lt;a href=&#34;#环境变量&#34; class=&#34;headerlink&#34; title=&#34;环境变量&#34;&gt;&lt;/a&gt;环境变量&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;echo 查看单个环境变量&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;hljs-variable&#34;&gt;$HOME&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;env 查看全部环境变量&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;env&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;env&lt;/span&gt; | grep SSH&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# export 也可以查看&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;export&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;set 查看本地定义的环境变量&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight actionscript&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs actionscript&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;set&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;export 设置一个新的环境变量(临时的，重启后消失)&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight routeros&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs routeros&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;hljs-attribute&#34;&gt;HELLO&lt;/span&gt;=&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;hello&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;unset 清除环境变量&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;unset&lt;/span&gt; HELLO&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;readonly 设定只读环境变量&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight abnf&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs abnf&#34;&gt;readonly HELLO&lt;span class=&#34;hljs-operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;hello&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;添加环境变量&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 将/usr/local/nginx/sbin/目录临时添加到环境变量中&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;export&lt;/span&gt; PATH=/usr/local/nginx/sbin/:&lt;span class=&#34;hljs-variable&#34;&gt;$PATH&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h3 id=&#34;一些常见环境变量&#34;&gt;&lt;a href=&#34;#一些常见环境变量&#34; class=&#34;headerlink&#34; title=&#34;一些常见环境变量&#34;&gt;&lt;/a&gt;一些常见环境变量&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;PATH：决定了shell将到哪些目录中寻找命令或程序&lt;/li&gt;
&lt;li&gt;HOME：指定用户的主目录（即用户登录到Linux系统时的默认目录）&lt;/li&gt;
&lt;li&gt;HISTSIZE：保存历史命令记录的条数&lt;/li&gt;
&lt;li&gt;LOGNAME：显示当前用户的登录名   （同 指令logname）&lt;/li&gt;
&lt;li&gt;HOSTNAME：显示主机的名字 （同 指令hostname）&lt;/li&gt;
&lt;li&gt;SHELL：指当前用户使用的shell类型&lt;/li&gt;
&lt;li&gt;LANG&amp;#x2F;LANGUGE：语言相关的环境变量，多语言可以修改此环境变量&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;环境变量存放的位置&#34;&gt;&lt;a href=&#34;#环境变量存放的位置&#34; class=&#34;headerlink&#34; title=&#34;环境变量存放的位置&#34;&gt;&lt;/a&gt;环境变量存放的位置&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;etc/profile&lt;/code&gt; （所有用户）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这个文件是&lt;strong&gt;每个用户登录时都会运行的环境变量设置&lt;/strong&gt;，当用户第一次登陆时该文件被执行*(这就是用户启动执行特定程序的原理了)*，并从&lt;code&gt;/etc/profile.d&lt;/code&gt;目录的配置文件中搜索shell的设置。这个文件的作用就是当用户登录的时候用于获取系统的环境变量，只在登录的时候获取一次。&lt;/p&gt;
&lt;p&gt;所以说，在&lt;code&gt;/etc/profile&lt;/code&gt;文件中添加的变量，&lt;strong&gt;对所有用户永久的生效&lt;/strong&gt;。&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;&lt;code&gt;~/.bash_profile &lt;/code&gt;（单个用户）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;每个用户都可以使用该文件输入自己专用的shell信息，当用户登录时，该文件仅仅执行一次&lt;/strong&gt;。默认情况下，它设置一些环境变量，执行用户的.bashrc文件。单个用户对此文件的修改只会影响到它以后的每一次登录。&lt;/p&gt;
&lt;p&gt;也就是说，在用户目录下的.bash_profile文件中增加变量，&lt;strong&gt;仅对当前用户永久生效，&lt;/strong&gt; &lt;strong&gt;操作同 &amp;#x2F;etc&amp;#x2F;profile&lt;/strong&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;&lt;code&gt;/etc/bashrc &lt;/code&gt;（所有用户）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在执行完 &amp;#x2F;etc&amp;#x2F;profile 内容后，如果用户运行 bash shell 的话，则就执行这个文件，当**每次一个新的bash shell 被打开时，该文件被读取**。****所以，如果每打开一个bash都执行某些操作，就可以在这个文件里面设置。&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;&lt;code&gt;~/.bashrc&lt;/code&gt;  （单个用户）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;该文件只包含专用于你的bash信息，&lt;strong&gt;当你登录时以及每次打开新的shell时，该文件就会自动被读取&lt;/strong&gt;。&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;&lt;code&gt;~/.bash_logout&lt;/code&gt;&lt;strong&gt;每次在退出shell的时候会执行该文件&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;每次在退出shell的时候会执行该文件&lt;/strong&gt;，它提供了定制用户环境的功能，比如删除账号内的临时文件等命令就可以放在bash_logout 文件内，如果这个文件不存在的话则就执行其他的命令。&lt;/p&gt;
&lt;h2 id=&#34;管道&#34;&gt;&lt;a href=&#34;#管道&#34; class=&#34;headerlink&#34; title=&#34;管道&#34;&gt;&lt;/a&gt;管道&lt;/h2&gt;&lt;h3 id=&#34;xargs&#34;&gt;&lt;a href=&#34;#xargs&#34; class=&#34;headerlink&#34; title=&#34;xargs&#34;&gt;&lt;/a&gt;xargs&lt;/h3&gt;&lt;p&gt;&lt;a href=&#34;https://www.runoob.com/linux/linux-comm-xargs.html&#34;&gt;https://www.runoob.com/linux/linux-comm-xargs.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;xargs 可以将管道或标准输入（stdin）数据转换成命令行参数，也能够从文件的输出中读取数据。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;命令格式：&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight livecodeserver&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs livecodeserver&#34;&gt;somecommand |xargs -&lt;span class=&#34;hljs-keyword&#34;&gt;item&lt;/span&gt;  &lt;span class=&#34;hljs-keyword&#34;&gt;command&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ul&gt;
&lt;li&gt;-a file 从文件中读入作为 stdin&lt;/li&gt;
&lt;li&gt;-e flag ，注意有的时候可能会是-E，flag必须是一个以空格分隔的标志，当xargs分析到含有flag这个标志的时候就停止。&lt;/li&gt;
&lt;li&gt;-p 当每次执行一个argument的时候询问一次用户。&lt;/li&gt;
&lt;li&gt;-n num 后面加次数，表示命令在执行的时候一次用的argument的个数，默认是用所有的。&lt;/li&gt;
&lt;li&gt;-t 表示先打印命令，然后再执行。&lt;/li&gt;
&lt;li&gt;-i 或者是-I，这得看linux支持了，将xargs的每项名称，一般是一行一行赋值给 {}，可以用 {} 代替。&lt;/li&gt;
&lt;li&gt;-r no-run-if-empty 当xargs的输入为空的时候则停止xargs，不用再去执行了。&lt;/li&gt;
&lt;li&gt;-s num 命令行的最大字符数，指的是 xargs 后面那个命令的最大命令行字符数。&lt;/li&gt;
&lt;li&gt;-L num 从标准输入一次读取 num 行送给 command 命令。&lt;/li&gt;
&lt;li&gt;-l 同 -L。&lt;/li&gt;
&lt;li&gt;-d delim 分隔符，默认的xargs分隔符是回车，argument的分隔符是空格，这里修改的是xargs的分隔符。&lt;/li&gt;
&lt;li&gt;-x exit的意思，主要是配合-s使用。。&lt;/li&gt;
&lt;li&gt;-P 修改最大的进程数，默认是1，为0时候为as many as it can ，这个例子我没有想到，应该平时都用不到的吧。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Example&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;复制所有图片文件到 &lt;code&gt;/data/images&lt;/code&gt; 目录下：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;ls&lt;/span&gt; *.jpg | xargs -n1 -I &amp;#123;&amp;#125; &lt;span class=&#34;hljs-built_in&#34;&gt;cp&lt;/span&gt; &amp;#123;&amp;#125; /data/images&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&#34;压缩命令&#34;&gt;&lt;a href=&#34;#压缩命令&#34; class=&#34;headerlink&#34; title=&#34;压缩命令&#34;&gt;&lt;/a&gt;压缩命令&lt;/h2&gt;&lt;p&gt;zip [参数 ] [压缩文件名.zip] [被压缩的文件]&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;-r&lt;/td&gt;
&lt;td&gt;递归压缩，将指定目录下的所有文件和子一起压缩。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-v&lt;/td&gt;
&lt;td&gt;显示指令执行过程。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-num&lt;/td&gt;
&lt;td&gt;压缩率，为 1~9的数值。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-m&lt;/td&gt;
&lt;td&gt;压缩完成以后删除源文件。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-g&lt;/td&gt;
&lt;td&gt;将文件压缩入现有压缩文件中，不需要新建。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-n&amp;lt;字尾符号&amp;gt;&lt;/td&gt;
&lt;td&gt;不压缩特定拓展名文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-P&lt;/td&gt;
&lt;td&gt;密码&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;unzip [参数 ] [压缩文件名 .zip]&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;-d&lt;/td&gt;
&lt;td&gt;解压到指定目录&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-P&lt;/td&gt;
&lt;td&gt;密码&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-v&lt;/td&gt;
&lt;td&gt;显示指令执行过程。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;压缩&lt;/span&gt;&lt;br&gt;zip -rv -9 a.zip *.jpg&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;解压&lt;/span&gt;&lt;br&gt;unzip -d a a.zip&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;&lt;strong&gt;.bz2 .gz .xz文件&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;一般来说&lt;code&gt;bz2&lt;/code&gt;的压缩率最高, 但是速度太慢了, &lt;code&gt;gz&lt;/code&gt;压缩率比较均衡速度也比较快, &lt;code&gt;tar&lt;/code&gt;只会打包不会压缩.&lt;/p&gt;
&lt;p&gt;tar [参数 ] [压缩文件名] [被压缩文件名]&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;-c&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;打包(将所有文件变成一个文件 Create  a new archive)&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-x&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;解压缩, 解包&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-j&lt;/td&gt;
&lt;td&gt;tar生成压缩文件 ，bzip2压缩&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-z&lt;/td&gt;
&lt;td&gt;tar生成压缩文件，gzip压缩&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-f&amp;lt;文件名&amp;gt;&lt;/td&gt;
&lt;td&gt;指定压缩文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-v&lt;/td&gt;
&lt;td&gt;显示执行过程&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-C,–directory&amp;#x3D;DIR&lt;/td&gt;
&lt;td&gt;执行任何操作前请先更改为DIR。 该选项是顺序敏感的，即它影响后面的所有选项。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;压缩 bzip2&lt;/span&gt;&lt;br&gt;tar -jvcf 1.tar.bz2 *.*&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;☆压缩 gzip&lt;/span&gt;&lt;br&gt;tar -zvcf 1.tar.gz *.*&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;压缩 = c&lt;/span&gt;&lt;br&gt;tar -cvf a.tar /etc&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;解压 = x&lt;/span&gt;&lt;br&gt;tar -jxvf 1.tar.bz2&lt;br&gt;tar -zxvf 1.tar.gz&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;tar会自动检测压缩类型，并且解压缩包文件。同样的命令可以用来解压缩使用其他算法，例如：.tar.gz 或者.tar.bz2 压缩的文件。&lt;/span&gt;&lt;br&gt;tar -v -x -f archive.tar.xz&lt;br&gt;tar -v -x -f archive.tar.xz -C ./dir1&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;inode&#34;&gt;&lt;a href=&#34;#inode&#34; class=&#34;headerlink&#34; title=&#34;inode&#34;&gt;&lt;/a&gt;inode&lt;/h2&gt;&lt;p&gt;参考: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&amp;lt;鸟哥的linux私房菜&amp;gt; -&amp;gt; 第七章、Linux 磁盘与文件系统管理 -&amp;gt; 7.1.3 Linux 的 EXT2 文件系统（inode）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://ty-chen.github.io/linux-kernel-fs/&#34;&gt;Linux操作系统学习笔记（十一）文件系统&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;  &lt;em&gt;inode(index node)&lt;/em&gt; 是 UNIX 操作系统中的一种数据结构，其本质是[&lt;strong&gt;结构体&lt;/strong&gt;]，它包含了与文件系统中各个文件相关的一些重要信息。在 UNIX 中创建文件系统时，同时将会创建大量的 inode 。通常，文件系统磁盘空间中大约百分之一空间分配给了 inode 表。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;inode主要是记录文件的元信息，比如文件权限信息、文件的大小、文件修改信息、文件位置信息(data block id)等等，我们可以理解为是文件的索引(index)。&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  如何通过inode找到文件数据的位置?&lt;/p&gt;
&lt;p&gt;  ext2文件系统中，inode存在&lt;strong&gt;12个直接指针&lt;/strong&gt;，&lt;strong&gt;1个间接指针&lt;/strong&gt;(可以理解为指针)，&lt;strong&gt;1个双重间接块指针&lt;/strong&gt;(可以理解为指向指针的指针 两重指针)，&lt;strong&gt;1个三重间接块指针&lt;/strong&gt;(可以理解为 三重指针)，通过这几个指针的索引我们就能找到对应的文件存放的位置。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;我们假定每个指针占用4Byte的空间，每个Blocks大小为4KB(SSD的4K对齐应该也是指的这个)。&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;直接块指针：&lt;ul&gt;
&lt;li&gt;前12个直接指针，直接指向存储数据的区域。blocks大小为4KB，前12个直接指针就可以保存&lt;strong&gt;48KB&lt;/strong&gt;的文件&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;间接块指针(一级间接快指针)：&lt;ul&gt;
&lt;li&gt;每个指针占用4Byte，则间接快指针指向的Blocks可以保存(4*1024)&amp;#x2F;4&amp;#x3D;1024个记录(或者称为直接指针)，也就是对应1024个Blocks，那么间接块指针可存储文件数据大小为1024*4KB&amp;#x3D;&lt;strong&gt;4MB&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;双重间接块指针(二级间接快指针)：&lt;ul&gt;
&lt;li&gt;同理，双重间接块指针可以储存文件数据大小为1024*1024*4KB&amp;#x3D;&lt;strong&gt;4GB&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;三重间接块指针(三级间接快指针)：&lt;ul&gt;
&lt;li&gt;同理，三重间接块指针可以储存文件数据大小为1024*1024*1024*4KB&amp;#x3D;&lt;strong&gt;4TB&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;/2020/d4436089/123.png&#34; alt=&#34;操作系统：文件系统- 掘金&#34;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  &lt;strong&gt;弊端&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;  该存储结构带来的问题是对于大型文件，我们需要多次调用才可以访问对应块的内容，因此访问速度较慢。为此，&lt;strong&gt;ext4&lt;/strong&gt;提出了新的解决方案：&lt;a href=&#34;https://en.wikipedia.org/wiki/Extent_(file_systems)&#34;&gt;Extents&lt;/a&gt;。简单的说，&lt;strong&gt;Extents以一个树形结构来连续存储文件块，从而提高访问速度，大致结构如下图所示。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;  &lt;img src=&#34;/2020/d4436089/1-s2.0-S1742287617300270-gr2.jpg&#34; alt=&#34;AFEIC: Advanced forensic Ext4 inode carving - ScienceDirect&#34;&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;  &lt;strong&gt;冷知识:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;  同一个文件在磁盘上的物理位置可能不会是连续的, 大概率都是分散开的, 散落在磁盘的各个位置.&lt;/p&gt;
&lt;p&gt;  &lt;img src=&#34;/2020/d4436089/image-20230107231700676.png&#34; alt=&#34;image-20230107231700676&#34;&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;使用&#34;&gt;&lt;a href=&#34;#使用&#34; class=&#34;headerlink&#34; title=&#34;使用&#34;&gt;&lt;/a&gt;使用&lt;/h3&gt;&lt;h4 id=&#34;df&#34;&gt;&lt;a href=&#34;#df&#34; class=&#34;headerlink&#34; title=&#34;df&#34;&gt;&lt;/a&gt;df&lt;/h4&gt;&lt;p&gt;我们可以通过&lt;code&gt;df&lt;/code&gt;命令查看所有已挂载的文件系统中已使用的 inode 的数目，以及文件系统中总体使用情况的百分比。&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;❯ df -i&lt;br&gt;Filesystem       Inodes   IUsed    IFree IUse% Mounted on&lt;br&gt;/dev/sdc       67108864  556871 66551993    1% /&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&#34;stat&#34;&gt;&lt;a href=&#34;#stat&#34; class=&#34;headerlink&#34; title=&#34;stat&#34;&gt;&lt;/a&gt;stat&lt;/h4&gt;&lt;p&gt;我们可以通过stat命令查看文件(包括目录)的inode信息&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;❯ stat use_proxy.sh&lt;br&gt;  File: use_proxy.sh&lt;br&gt;  Size: 720             Blocks: 8          IO Block: 4096   regular file&lt;br&gt;Device: 820h/2080d      Inode: 552923      Links: 1&lt;br&gt;Access: (0644/-rw-r--r--)  Uid: ( 1000/   frank)   Gid: ( 1000/   frank)&lt;br&gt;Access: 2022-12-11 22:29:33.000000000 +0800&lt;br&gt;Modify: 2022-10-31 17:10:16.000000000 +0800&lt;br&gt;Change: 2022-12-11 22:31:28.141006225 +0800&lt;br&gt; Birth: -&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&#34;find&#34;&gt;&lt;a href=&#34;#find&#34; class=&#34;headerlink&#34; title=&#34;find&#34;&gt;&lt;/a&gt;find&lt;/h4&gt;&lt;p&gt;我们可以通过find命令找特定inode号的文件&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;根目录的inode号为2&lt;/span&gt;&lt;br&gt;❯ find / -inum 2&lt;br&gt;/&lt;br&gt;&lt;br&gt;❯ ll -li ~&lt;br&gt;total 16K&lt;br&gt;552923 -rw-r--r-- 1 frank frank  720 10月 31 17:10 xxx.sh&lt;br&gt;❯ find ~ -inum 552923&lt;br&gt;/home/frank/xxx.sh&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;硬链接-和-软连接-符号链接&#34;&gt;&lt;a href=&#34;#硬链接-和-软连接-符号链接&#34; class=&#34;headerlink&#34; title=&#34;硬链接 和 软连接(符号链接)&#34;&gt;&lt;/a&gt;硬链接 和 软连接(符号链接)&lt;/h2&gt;&lt;p&gt;参考:&lt;a href=&#34;https://www.cnblogs.com/Peter2014/p/7594504.html&#34;&gt;Linux硬链接和软连接的区别与总结&lt;/a&gt;,&lt;a href=&#34;https://www.cnblogs.com/sanjun/p/9971993.html&#34;&gt;硬链接和软连接（符号链接）的区别&lt;/a&gt;,&lt;a href=&#34;https://www.zhihu.com/question/443459832/answer/1723706381&#34;&gt;linux中软链接和硬链接是什么意思？&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;硬链接（Hard Link） 和软链接（Symbolic Link）&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2020/d4436089/1192583-20170925225909964-1496152149.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;硬链接（Hard-Link）&#34;&gt;&lt;a href=&#34;#硬链接（Hard-Link）&#34; class=&#34;headerlink&#34; title=&#34;硬链接（Hard Link）&#34;&gt;&lt;/a&gt;硬链接（Hard Link）&lt;/h3&gt;&lt;p&gt;硬链接是多个目录项中的「索引节点」指向一个文件，也就是&lt;strong&gt;指向同一个 inode&lt;/strong&gt;，但是 inode 是不可能跨越文件系统的，每个文件系统都有各自的 inode 数据结构和列表，所以硬链接是不可用于跨文件系统的。由于多个目录项都是指向一个 inode，那么只有删除文件的所有硬链接以及源文件时，系统才会彻底删除该文件。 &lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2020/d4436089/v2-7cf8cec396a66dca2dd1fcd6dadab537_720w.webp&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;h3 id=&#34;有关硬链接的总结&#34;&gt;&lt;a href=&#34;#有关硬链接的总结&#34; class=&#34;headerlink&#34; title=&#34;有关硬链接的总结&#34;&gt;&lt;/a&gt;有关硬链接的总结&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;不可以在不同文件系统的文件间建立链接&lt;/strong&gt;(Inode范围问题)&lt;/li&gt;
&lt;li&gt;只有超级用户才可以为目录创建硬链接。&lt;/li&gt;
&lt;li&gt;具有相同inode节点号的多个文件互为硬链接文件；&lt;/li&gt;
&lt;li&gt;删除硬链接文件或者删除源文件任意之一，文件实体并未被删除；&lt;strong&gt;只有删除了源文件和所有对应的硬链接文件，文件实体才会被删除；&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;硬链接文件是文件的另一个入口；&lt;/li&gt;
&lt;li&gt;可以通过给文件设置硬链接文件来防止重要文件被误删；&lt;/li&gt;
&lt;li&gt;创建硬链接命令 ln 源文件 硬链接文件；&lt;/li&gt;
&lt;li&gt;硬链接文件是普通文件，可以用rm删除；&lt;/li&gt;
&lt;li&gt;对于静态文件（没有进程正在调用），当硬链接数为0时文件就被删除。&lt;em&gt;注意：如果有进程正在调用，则无法删除或者即使文件名被删除但空间不会释放。&lt;/em&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;软链接（Symbolic-Link）&#34;&gt;&lt;a href=&#34;#软链接（Symbolic-Link）&#34; class=&#34;headerlink&#34; title=&#34;软链接（Symbolic Link）&#34;&gt;&lt;/a&gt;软链接（Symbolic Link）&lt;/h3&gt;&lt;p&gt;软链接相当于重新创建一个文件，这个文件&lt;strong&gt;有独立的 inode&lt;/strong&gt;，但是这个&lt;strong&gt;文件的内容是另外一个文件的路径&lt;/strong&gt;，所以访问软链接的时候，&lt;strong&gt;实际上相当于访问到了另外一个文件&lt;/strong&gt;，所以软链接是可以跨文件系统的，甚至目标文件被删除了，链接文件还是在的，只不过指向的文件找不到了而已。 &lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2020/d4436089/v2-5606413e1b5d2c727399711d347617a2_720w.webp&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;h3 id=&#34;有关软链接的总结&#34;&gt;&lt;a href=&#34;#有关软链接的总结&#34; class=&#34;headerlink&#34; title=&#34;有关软链接的总结&#34;&gt;&lt;/a&gt;有关软链接的总结&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;软链接类似windows系统的快捷方式；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;软连接的目标文件建议使用绝对路径，否则软连接被移动后将会失效。&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;软链接里面存放的是源文件的&lt;em&gt;路径&lt;/em&gt;，指向源文件；&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;删除源文件，软链接依然存在，但无法访问源文件内容；&lt;/li&gt;
&lt;li&gt;软链接失效时一般是白字红底闪烁；&lt;/li&gt;
&lt;li&gt;软链接和源文件是不同的文件，文件类型也不同，inode号也不同 &lt;strong&gt;是两个不同的文件&lt;/strong&gt;；&lt;/li&gt;
&lt;li&gt;软链接的文件类型是“l”，可以用rm删除。&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;两者区别&#34;&gt;&lt;a href=&#34;#两者区别&#34; class=&#34;headerlink&#34; title=&#34;两者区别&#34;&gt;&lt;/a&gt;两者区别&lt;/h3&gt;&lt;blockquote&gt;
&lt;h3 id=&#34;硬链接和软链接的区别&#34;&gt;&lt;a href=&#34;#硬链接和软链接的区别&#34; class=&#34;headerlink&#34; title=&#34;硬链接和软链接的区别&#34;&gt;&lt;/a&gt;硬链接和软链接的区别&lt;/h3&gt;&lt;p&gt;  原理上，硬链接和源文件的inode节点号相同，两者互为硬链接。软连接和源文件的inode节点号不同，进而指向的block也不同，软连接block中存放了源文件的路径名。&lt;/p&gt;
&lt;p&gt;  实际上，硬链接和源文件是同一份文件，而软连接是独立的文件，类似于快捷方式，存储着源文件的位置信息便于指向。&lt;/p&gt;
&lt;p&gt;  使用限制上，不能对目录创建硬链接，不能对不同文件系统创建硬链接，不能对不存在的文件创建硬链接；可以对目录创建软连接，可以跨文件系统创建软连接，可以对不存在的文件创建软连接。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;命令&#34;&gt;&lt;a href=&#34;#命令&#34; class=&#34;headerlink&#34; title=&#34;命令&#34;&gt;&lt;/a&gt;命令&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;硬链接&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;56&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;$ &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;ls&lt;/span&gt; -lhi&lt;/span&gt;&lt;br&gt;1180598 -rw-rw-r-- 3 frank frank    5 2月  12 22:31 123.txt&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;$ &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;stat&lt;/span&gt; *.txt&lt;/span&gt;&lt;br&gt;  文件：123.txt&lt;br&gt;  大小：5               块：8          IO 块：4096   普通文件&lt;br&gt;设备：805h/2053d        Inode：1180598     硬链接：1&lt;br&gt;...&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;使用 &lt;span class=&#34;hljs-built_in&#34;&gt;ln&lt;/span&gt; 命令创建链接 先看看语法&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;$ &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;ln&lt;/span&gt; --&lt;span class=&#34;hljs-built_in&#34;&gt;help&lt;/span&gt;&lt;/span&gt;&lt;br&gt;用法：ln [选项]... 目标... 目录&lt;br&gt;在指定&amp;lt;目录&amp;gt;中创建指向指定&amp;lt;目标&amp;gt;的链接。&lt;br&gt;默认创建硬链接，当使用--symbolic 时创建符号链接。&lt;br&gt;默认情况下，创建每个目标时不应存在与新链接的名称相同的文件。&lt;br&gt;创建硬链接时，每个指定的&amp;lt;目标&amp;gt;都必须存在。符号链接可以指向任意的位置；&lt;br&gt;当链接解析正常时，将其解析为一个相对于其父目录的相对链接。&lt;br&gt;...&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;在当前目录下创建一个 硬链接 &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;123.ln.txt&amp;#x27;&lt;/span&gt;指向&lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;123.txt&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;$ &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;ln&lt;/span&gt; 123.txt ./123.ln.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;$ &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;ls&lt;/span&gt; -lhi&lt;/span&gt;&lt;br&gt;1180598 -rw-rw-r-- 3 frank frank    5 2月  12 22:31 123.ln.txt&lt;br&gt;1180598 -rw-rw-r-- 3 frank frank    5 2月  12 22:31 123.txt&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;我们可以看到 &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;123.txt&amp;#x27;&lt;/span&gt; 和 &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;123.ln.txt&amp;#x27;&lt;/span&gt; 的Inode指向同一个位置 自然他们的大小也是一致的&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;并且 &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;硬链接&amp;#x27;&lt;/span&gt; 的数目由1变成了2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;如果 &lt;span class=&#34;hljs-built_in&#34;&gt;rm&lt;/span&gt; 其中一个文件, 只是删除了文件指针文件内容并不会删除, 也就是说只有等到 硬链接 数目变成0了内核才会将文件内容删除&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;$ &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;stat&lt;/span&gt; *.txt&lt;/span&gt;&lt;br&gt;  文件：123.ln.txt&lt;br&gt;  大小：5               块：8          IO 块：4096   普通文件&lt;br&gt;设备：805h/2053d        Inode：1180598     硬链接：2&lt;br&gt;...&lt;br&gt;  文件：123.txt&lt;br&gt;  大小：5               块：8          IO 块：4096   普通文件&lt;br&gt;设备：805h/2053d        Inode：1180598     硬链接：2&lt;br&gt;...&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;加 -s 参数 创建一个 软链接&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;在当前目录下创建一个 软链接 &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;123.soft.txt&amp;#x27;&lt;/span&gt;指向&lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;123.txt&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;$ &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;ln&lt;/span&gt; -s 123.txt ./123.soft.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;注意看 软件链接 的类型是 l&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;$ &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;ls&lt;/span&gt; -hli&lt;/span&gt;&lt;br&gt;1180598 -rw-rw-r-- 3 frank frank    5 2月  12 22:31 123.ln.txt&lt;br&gt;1181799 lrwxrwxrwx 1 frank frank    7 2月  12 22:41 123.soft.txt -&amp;gt; 123.txt&lt;br&gt;1180598 -rw-rw-r-- 3 frank frank    5 2月  12 22:31 123.txt&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;$ &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;stat&lt;/span&gt; *.txt&lt;/span&gt;&lt;br&gt;  文件：123.ln.txt&lt;br&gt;  大小：5               块：8          IO 块：4096   普通文件&lt;br&gt;设备：805h/2053d        Inode：1180598     硬链接：3&lt;br&gt;...&lt;br&gt;  文件：123.soft.txt -&amp;gt; 123.txt&lt;br&gt;  大小：7               块：0          IO 块：4096   符号链接&lt;br&gt;设备：805h/2053d        Inode：1181799     硬链接：1&lt;br&gt;...&lt;br&gt;  文件：123.txt&lt;br&gt;  大小：5               块：8          IO 块：4096   普通文件&lt;br&gt;设备：805h/2053d        Inode：1180598     硬链接：3&lt;br&gt;...&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;





&lt;h2 id=&#34;命令-1&#34;&gt;&lt;a href=&#34;#命令-1&#34; class=&#34;headerlink&#34; title=&#34;命令&#34;&gt;&lt;/a&gt;命令&lt;/h2&gt;&lt;p&gt;查看支持的shell&lt;/p&gt;
&lt;figure class=&#34;highlight awk&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs awk&#34;&gt;cat &lt;span class=&#34;hljs-regexp&#34;&gt;/etc/&lt;/span&gt;shells&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;查看当前使用哪个shell&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;hljs-variable&#34;&gt;$SHELL&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;更改用户的默认shell&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;chsh -s /bin/zsh  [用户名:模认当前用户]&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;ls-list-file&#34;&gt;&lt;a href=&#34;#ls-list-file&#34; class=&#34;headerlink&#34; title=&#34;ls list file&#34;&gt;&lt;/a&gt;ls list file&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ls -l 显示文件的详细信息，文件目录具有的权限，当前权限文件的数量，拥有者，所属的群组，文件目录的大小，创建或者修改时间，文件目录的名字。可以使用ls -la&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ls -R 递归列出目录所有文件&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ls -a 显示所有文件以及子目录，包括“.”开头的隐藏文件&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;cd&#34;&gt;&lt;a href=&#34;#cd&#34; class=&#34;headerlink&#34; title=&#34;cd&#34;&gt;&lt;/a&gt;cd&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;cd &amp;#x2F; 进入根目录&lt;/li&gt;
&lt;li&gt;cd .. 返回上一级&lt;/li&gt;
&lt;li&gt;cd ~ 返回当前用户主目录&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;pwd显示路径&#34;&gt;&lt;a href=&#34;#pwd显示路径&#34; class=&#34;headerlink&#34; title=&#34;pwd显示路径&#34;&gt;&lt;/a&gt;pwd显示路径&lt;/h3&gt;&lt;p&gt;显示当前文件目录的绝对路径&lt;/p&gt;
&lt;h3 id=&#34;uname系统信息查看&#34;&gt;&lt;a href=&#34;#uname系统信息查看&#34; class=&#34;headerlink&#34; title=&#34;uname系统信息查看&#34;&gt;&lt;/a&gt;uname系统信息查看&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;-r 列出当前系统的具体内核版本号。 &lt;/li&gt;
&lt;li&gt;-s 列出系统内核名称。 &lt;/li&gt;
&lt;li&gt;-o 列出系统信息。&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ubuntu版本查看&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight awk&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs awk&#34;&gt;cat &lt;span class=&#34;hljs-regexp&#34;&gt;/etc/&lt;/span&gt;lsb-release&lt;br&gt;lsb_release -a&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;





&lt;h3 id=&#34;clear清屏&#34;&gt;&lt;a href=&#34;#clear清屏&#34; class=&#34;headerlink&#34; title=&#34;clear清屏&#34;&gt;&lt;/a&gt;clear清屏&lt;/h3&gt;&lt;p&gt;快捷键 &lt;strong&gt;Ctrl+l(小写的L)&lt;/strong&gt;  同clear&lt;/p&gt;
&lt;h3 id=&#34;sudo&#34;&gt;&lt;a href=&#34;#sudo&#34; class=&#34;headerlink&#34; title=&#34;sudo&#34;&gt;&lt;/a&gt;sudo&lt;/h3&gt;&lt;p&gt;暂时提升到root权限&lt;/p&gt;
&lt;p&gt;su可以直接变成管理员&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;-h help&lt;/li&gt;
&lt;li&gt;-p 改变询问密码的提示符（不知道是啥）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;cat-文本输出命令&#34;&gt;&lt;a href=&#34;#cat-文本输出命令&#34; class=&#34;headerlink&#34; title=&#34;cat  文本输出命令&#34;&gt;&lt;/a&gt;cat  文本输出命令&lt;/h3&gt;&lt;p&gt;-n 由1开始对所有行进行编号&lt;/p&gt;
&lt;p&gt;-b 类似-n不对空行编号&lt;/p&gt;
&lt;p&gt;-s 遇到两行空行以上时合并成一个空行&lt;/p&gt;
&lt;h3 id=&#34;ifconfig-显示网络配置&#34;&gt;&lt;a href=&#34;#ifconfig-显示网络配置&#34; class=&#34;headerlink&#34; title=&#34;ifconfig  显示网络配置&#34;&gt;&lt;/a&gt;ifconfig  显示网络配置&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;sudo ifconfig ens33 192.168.128.128     修改ip&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;man-系统帮助-查命令&#34;&gt;&lt;a href=&#34;#man-系统帮助-查命令&#34; class=&#34;headerlink&#34; title=&#34;man 系统帮助-查命令&#34;&gt;&lt;/a&gt;man 系统帮助-查命令&lt;/h3&gt;&lt;h3 id=&#34;reboot-重启&#34;&gt;&lt;a href=&#34;#reboot-重启&#34; class=&#34;headerlink&#34; title=&#34;reboot  重启&#34;&gt;&lt;/a&gt;reboot  重启&lt;/h3&gt;&lt;h3 id=&#34;poweroff-关机&#34;&gt;&lt;a href=&#34;#poweroff-关机&#34; class=&#34;headerlink&#34; title=&#34;poweroff 关机&#34;&gt;&lt;/a&gt;poweroff 关机&lt;/h3&gt;&lt;h3 id=&#34;install-安装软件命令&#34;&gt;&lt;a href=&#34;#install-安装软件命令&#34; class=&#34;headerlink&#34; title=&#34;install 安装软件命令&#34;&gt;&lt;/a&gt;install 安装软件命令&lt;/h3&gt;&lt;h3 id=&#34;apt-get&#34;&gt;&lt;a href=&#34;#apt-get&#34; class=&#34;headerlink&#34; title=&#34;apt-get&#34;&gt;&lt;/a&gt;apt-get&lt;/h3&gt;&lt;p&gt;APT工具可以实现软件的自动下载、配置、安装&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;查找有哪些版本&lt;/span&gt;&lt;br&gt;apt-cache madison &amp;lt;&amp;lt;package name&amp;gt;&amp;gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;安装指定版本&lt;/span&gt;&lt;br&gt;apt-get install &amp;lt;&amp;lt;package name&amp;gt;&amp;gt;=&amp;lt;&amp;lt;version&amp;gt;&amp;gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;fdisk-磁盘工具&#34;&gt;&lt;a href=&#34;#fdisk-磁盘工具&#34; class=&#34;headerlink&#34; title=&#34;fdisk 磁盘工具&#34;&gt;&lt;/a&gt;fdisk 磁盘工具&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;  Linux fdisk 是一个创建和维护分区表的程序，它兼容 DOS 类型的分区表、BSD 或者 SUN 类型的磁盘列表。&lt;/p&gt;
&lt;h3 id=&#34;语法&#34;&gt;&lt;a href=&#34;#语法&#34; class=&#34;headerlink&#34; title=&#34;语法&#34;&gt;&lt;/a&gt;语法&lt;/h3&gt;  &lt;figure class=&#34;highlight css&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs css&#34;&gt;fdisk &lt;span class=&#34;hljs-selector-attr&#34;&gt;[必要参数]&lt;/span&gt;&lt;span class=&#34;hljs-selector-attr&#34;&gt;[选择参数]&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;  &lt;strong&gt;必要参数：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;-l 列出素所有分区表&lt;/li&gt;
&lt;li&gt;-u 与 &lt;strong&gt;-l&lt;/strong&gt; 搭配使用，显示分区数目&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;  &lt;strong&gt;选择参数：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;-s&amp;lt;分区编号&amp;gt; 指定分区&lt;/li&gt;
&lt;li&gt;-v 版本信息&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;  &lt;strong&gt;菜单操作说明&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;m ：显示菜单和帮助信息&lt;/li&gt;
&lt;li&gt;a ：活动分区标记&amp;#x2F;引导分区&lt;/li&gt;
&lt;li&gt;d ：删除分区&lt;/li&gt;
&lt;li&gt;l ：显示分区类型&lt;/li&gt;
&lt;li&gt;n ：新建分区&lt;/li&gt;
&lt;li&gt;p ：显示分区信息&lt;/li&gt;
&lt;li&gt;q ：退出不保存&lt;/li&gt;
&lt;li&gt;t ：设置分区号&lt;/li&gt;
&lt;li&gt;v ：进行分区检查&lt;/li&gt;
&lt;li&gt;w ：保存修改&lt;/li&gt;
&lt;li&gt;x ：扩展应用，高级功能&lt;/li&gt;
&lt;/ul&gt;
  &lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;sudo fdisk /dev/sdb&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;查看帮助&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;m&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;删除分区&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;d&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;新建分区&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;n&lt;/span&gt; &lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;写入分区表&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;w&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;这个时候虽然分区分好了但是还不能使用, 因为没有分配文件系统&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;mkfs&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;/blockquote&gt;
&lt;h3 id=&#34;mkfs-格式化-建立文件系统&#34;&gt;&lt;a href=&#34;#mkfs-格式化-建立文件系统&#34; class=&#34;headerlink&#34; title=&#34;mkfs 格式化(建立文件系统)&#34;&gt;&lt;/a&gt;mkfs 格式化(建立文件系统)&lt;/h3&gt;&lt;p&gt;Linux mkfs（英文全拼：make file system）命令用于在特定的分区上建立 linux 文件系统。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  &lt;strong&gt;使用方式&lt;/strong&gt; :&lt;/p&gt;
  &lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;mkfs [-V] [-t fstype] [fs-options] filesys [blocks]&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;  &lt;strong&gt;参数&lt;/strong&gt; ：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;选项：&lt;/li&gt;
&lt;li&gt;-t, –type&amp;#x3D;&amp;lt;类型&amp;gt;  文件系统类型；若不指定，将使用 ext2&lt;br&gt; fs-options     实际文件系统构建程序的参数&lt;br&gt; &amp;lt;设备&amp;gt;         要使用设备的路径&lt;br&gt; &amp;lt;大小&amp;gt;         要使用设备上的块数&lt;/li&gt;
&lt;li&gt;-V, –verbose      解释正在进行的操作；&lt;br&gt;                  多次指定 -V 将导致空运行(dry-run)&lt;/li&gt;
&lt;li&gt;-h, –help         display this help&lt;/li&gt;
&lt;li&gt;-V, –version      display version&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;实例&#34;&gt;&lt;a href=&#34;#实例&#34; class=&#34;headerlink&#34; title=&#34;实例&#34;&gt;&lt;/a&gt;实例&lt;/h3&gt;&lt;p&gt;  将sda6分区格式化为ext3格式&lt;/p&gt;
  &lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;mkfs -t ext3 /dev/sda6  &lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;  &lt;strong&gt;注意&lt;/strong&gt;：这里的文件系统是要指定的，比如 ext3 ；reiserfs ；ext2 ；fat32 ；msdos 等。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;df-磁盘信息&#34;&gt;&lt;a href=&#34;#df-磁盘信息&#34; class=&#34;headerlink&#34; title=&#34;df 磁盘信息&#34;&gt;&lt;/a&gt;df 磁盘信息&lt;/h3&gt;&lt;p&gt;disk free&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;df -h&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;-h&lt;/td&gt;
&lt;td&gt;可读显示&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-a&lt;/td&gt;
&lt;td&gt;all&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-l&lt;/td&gt;
&lt;td&gt;本地文件系统&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-T&lt;/td&gt;
&lt;td&gt;Type 文件系统类型&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h3 id=&#34;du-磁盘使用分析&#34;&gt;&lt;a href=&#34;#du-磁盘使用分析&#34; class=&#34;headerlink&#34; title=&#34;du 磁盘使用分析&#34;&gt;&lt;/a&gt;du 磁盘使用分析&lt;/h3&gt;&lt;p&gt;disk usaged&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;du&lt;/span&gt; --max-depth=1 -BM | &lt;span class=&#34;hljs-built_in&#34;&gt;sort&lt;/span&gt; -rn&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;blockquote&gt;
&lt;p&gt;  -h：以人类可读的方式显示。&lt;br&gt;  -a：显示目录占用的磁盘空间大小，还要显示其下目录和文件占用磁盘空间的大小。&lt;br&gt;  -s：只显示&lt;strong&gt;目录占用的磁盘空间&lt;/strong&gt;大小，&lt;strong&gt;不显示其子目录和文件&lt;/strong&gt;占用的磁盘空间大小。&lt;br&gt;  -c：显示几个&lt;strong&gt;目录或文件占用的磁盘&lt;/strong&gt;空间大小，还要统计它们的总和。&lt;br&gt;  –apparent-size：显示&lt;strong&gt;目录或文件自身的大小&lt;/strong&gt;。&lt;br&gt;  -l ：统计硬链接占用磁盘空间的大小。&lt;br&gt;  -L：统计符号链接所指向的文件占用的磁盘空间大小。&lt;/p&gt;
&lt;p&gt;  -B: 单位修改 -BM &amp;#x3D; 用MB   -BG&amp;#x3D;用GB&lt;/p&gt;
&lt;p&gt;  –max-depth: –max-depth&amp;#x3D;1列出目录的深度为1&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# ** du命令还可以对结果进行排序，以方便快速找出占用空间最多目录。 **&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;du&lt;/span&gt; -s 目录 | &lt;span class=&#34;hljs-built_in&#34;&gt;sort&lt;/span&gt; -rn        &lt;span class=&#34;hljs-comment&#34;&gt;#这是按字节排序&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;du&lt;/span&gt; -sh 目录 | &lt;span class=&#34;hljs-built_in&#34;&gt;sort&lt;/span&gt; -rn        &lt;span class=&#34;hljs-comment&#34;&gt;#这是按兆（M）来排序&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;#由于-sh大小显示看起来是乱的，因此建议使用du -s|sort -nr&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;du&lt;/span&gt; -s 目录 | &lt;span class=&#34;hljs-built_in&#34;&gt;sort&lt;/span&gt; -rn | &lt;span class=&#34;hljs-built_in&#34;&gt;head&lt;/span&gt;        &lt;span class=&#34;hljs-comment&#34;&gt;#选出排在前面的10个&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;du&lt;/span&gt; -s 目录 | &lt;span class=&#34;hljs-built_in&#34;&gt;sort&lt;/span&gt; -rn | &lt;span class=&#34;hljs-built_in&#34;&gt;tail&lt;/span&gt;        &lt;span class=&#34;hljs-comment&#34;&gt;#选出排在后面的10个&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# ** 统计总数大小 **&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;du&lt;/span&gt; -sh xmldb/&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;du&lt;/span&gt; -sm * | &lt;span class=&#34;hljs-built_in&#34;&gt;sort&lt;/span&gt; -n //统计当前目录大小 并安大小 排序&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;du&lt;/span&gt; -sk * | &lt;span class=&#34;hljs-built_in&#34;&gt;sort&lt;/span&gt; -n&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;du&lt;/span&gt; -sk * | grep guojf //看一个人的大小&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;du&lt;/span&gt; -m | &lt;span class=&#34;hljs-built_in&#34;&gt;cut&lt;/span&gt; -d &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;/&amp;quot;&lt;/span&gt; -f 2 //看第二个/ 字符前的文字&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# ** 查看此文件夹有多少文件 /*/*/* 有多少文件 **&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;du&lt;/span&gt; xmldb/&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;du&lt;/span&gt; xmldb/*/*/* |&lt;span class=&#34;hljs-built_in&#34;&gt;wc&lt;/span&gt; -l&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# wc [-lmw]说明&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 参数说明：-l :多少行;  -m:多少字符;　-w:多少字&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;





&lt;h3 id=&#34;touch-创建新文件&#34;&gt;&lt;a href=&#34;#touch-创建新文件&#34; class=&#34;headerlink&#34; title=&#34;touch 创建新文件&#34;&gt;&lt;/a&gt;touch 创建新文件&lt;/h3&gt;&lt;h3 id=&#34;mkdir-创建文件夹&#34;&gt;&lt;a href=&#34;#mkdir-创建文件夹&#34; class=&#34;headerlink&#34; title=&#34;mkdir 创建文件夹&#34;&gt;&lt;/a&gt;mkdir 创建文件夹&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;-p&lt;/td&gt;
&lt;td&gt;递归创建, 前面的不存在, 就会创建&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h3 id=&#34;rmdir-删除文件夹&#34;&gt;&lt;a href=&#34;#rmdir-删除文件夹&#34; class=&#34;headerlink&#34; title=&#34;rmdir 删除文件夹&#34;&gt;&lt;/a&gt;rmdir 删除文件夹&lt;/h3&gt;&lt;h3 id=&#34;rm-删除&#34;&gt;&lt;a href=&#34;#rm-删除&#34; class=&#34;headerlink&#34; title=&#34;rm 删除&#34;&gt;&lt;/a&gt;rm 删除&lt;/h3&gt;&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 删除folder文件之外的所有文件&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;rm&lt;/span&gt; -rf !(folder)&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;#删除folder1和folder2文件之外的所有文件&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;rm&lt;/span&gt; -rf !(folder1 | folder2) &lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;#删除keep文件之外的所有文件&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;ls&lt;/span&gt; | grep -v keep | xargs &lt;span class=&#34;hljs-built_in&#34;&gt;rm&lt;/span&gt; &lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 说明： ls先得到当前的所有文件和文件夹的名字， grep -v keep，进行grep正则匹配查找keep，-v参数决定了结果为匹配之外的结果，也就是的到了keep之外的所有文件名，然后 xargs用于从 标准输入获得参数 并且传递给后面的命令，这里使用的命令是 rm，然后由rm删除前面选择的文件。&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;-d&lt;/td&gt;
&lt;td&gt;直接把要删除的目录硬连数据成 0 ，删除该目录。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-f&lt;/td&gt;
&lt;td&gt;直接把要删除的目录硬连数据成 0 ，删除该目录。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-i&lt;/td&gt;
&lt;td&gt;删除文件或者夹 (目录 )之前先询问用户。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-r&lt;/td&gt;
&lt;td&gt;递归删除，指定文件夹 (目录 )下的所有文件和子夹全部删除掉。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-v&lt;/td&gt;
&lt;td&gt;显示删除过程。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h3 id=&#34;cp-复制&#34;&gt;&lt;a href=&#34;#cp-复制&#34; class=&#34;headerlink&#34; title=&#34;cp 复制&#34;&gt;&lt;/a&gt;cp 复制&lt;/h3&gt;&lt;p&gt;cp [参数 ] [源地址 ] [目的地址 ]&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;-r&lt;/td&gt;
&lt;td&gt;递归处理，指定目录下一并处理&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-f&lt;/td&gt;
&lt;td&gt;强行复制文件，不管要的是否已经存在于目标录。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h3 id=&#34;mv-文件移动-重命名&#34;&gt;&lt;a href=&#34;#mv-文件移动-重命名&#34; class=&#34;headerlink&#34; title=&#34;mv 文件移动 重命名&#34;&gt;&lt;/a&gt;mv 文件移动 重命名&lt;/h3&gt;&lt;p&gt;mv [参数 ] [源地址 ] [目的地址 ]&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;-b&lt;/td&gt;
&lt;td&gt;如果要覆盖文件的话前先进行备份。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-f&lt;/td&gt;
&lt;td&gt;若目标文件或录与现在的重复，直接覆盖。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-I&lt;/td&gt;
&lt;td&gt;在覆盖之前询问用户。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h3 id=&#34;find-查找&#34;&gt;&lt;a href=&#34;#find-查找&#34; class=&#34;headerlink&#34; title=&#34;find 查找&#34;&gt;&lt;/a&gt;find 查找&lt;/h3&gt;&lt;p&gt;find [路径 ] [参数 ] [关键字 ]&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;-name&amp;lt;filename&amp;gt;  按照文件名称查找，与 filename匹配的文件，可使用通符。&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;find /etc -name *.config&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h3 id=&#34;grep-文件中搜内容&#34;&gt;&lt;a href=&#34;#grep-文件中搜内容&#34; class=&#34;headerlink&#34; title=&#34;grep 文件中搜内容&#34;&gt;&lt;/a&gt;grep 文件中搜内容&lt;/h3&gt;&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;grep -r -i code&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;Linux grep 命令用于查找文件里符合条件的字符串。&lt;/p&gt;
&lt;p&gt;grep 指令用于查找内容包含指定的范本样式的文件，如果发现某文件的内容符合所指定的范本样式，预设 grep 指令会把含有范本样式的那一列显示出来。若不指定任何文件名称，或是所给予的文件名为 **-**，则 grep 指令会从标准输入设备读取数据。&lt;/p&gt;
&lt;h4 id=&#34;参数&#34;&gt;&lt;a href=&#34;#参数&#34; class=&#34;headerlink&#34; title=&#34;参数&#34;&gt;&lt;/a&gt;参数&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;-B&amp;lt;显示行数&amp;gt; 或 –before-context&amp;#x3D;&amp;lt;显示行数&amp;gt;&lt;/strong&gt; : 除了显示符合样式的那一行之外，并显示该行之前的内容。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;-C&amp;lt;显示行数&amp;gt; 或 –context&amp;#x3D;&amp;lt;显示行数&amp;gt;或-&amp;lt;显示行数&amp;gt;&lt;/strong&gt; : 除了显示符合样式的那一行之外，并显示该行之前后的内容。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;-d &amp;lt;动作&amp;gt; 或 –directories&amp;#x3D;&amp;lt;动作&amp;gt;&lt;/strong&gt; : 当指定要查找的是目录而非文件时，必须使用这项参数，否则grep指令将回报信息并停止动作。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;-n 或 –line-number&lt;/strong&gt; : 在显示符合样式的那一行之前，标示出该行的列数编号。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;-r 或 –recursive&lt;/strong&gt; : 此参数的效果和指定”-d recurse”参数相同。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;-i 或 –ignore-case&lt;/strong&gt; : 忽略字符大小写的差别。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;-v 或 –invert-match&lt;/strong&gt; : 显示不包含匹配文本的所有行。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我们可以通过管道操作来让grep变得更强大，管道操作就是把前面一条命令的输出作为后面一条命令的输入，从而把很多简单的命令组合起来完成复杂的功能。例如，如果我们想查找包含apple的行，但又想过滤掉pineapple，可以用下面的命令：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;grep apple fruitlist.txt | grep -v pineapple&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;如果我们想把搜索结果保存起来，那么可以把命令的标准输出重定向到文件：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;grep apple fruitlist.txt | grep -v pineapple &amp;gt; apples.txt&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;重定向符号&amp;gt;和管道操作符号|的区别是，重定向后面接的是一个文件，它后面不能再接任何文件或命令了；而管道操作后面接的是命令，可以无限地接下去。如果想以追加方式写到文件，可以用&amp;gt;&amp;gt;。管道操作是Linux命令行的一种哲学，它是计算机技术中少有的能沿用几十年的技术之一。通过管道操作，一行命令可以完成Windows下上千行程序也不能完成的文本处理功能。&lt;/p&gt;
&lt;p&gt;grep [参数 ] 关键字 文件列表&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;-i&lt;/td&gt;
&lt;td&gt;无视大小写&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-r&lt;/td&gt;
&lt;td&gt;递归查找&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-v&lt;/td&gt;
&lt;td&gt;反转，只显示不匹配&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-w&lt;/td&gt;
&lt;td&gt;全匹配 match whole word&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;–exclude-dir&lt;/td&gt;
&lt;td&gt;排除文件夹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;–exclude&lt;/td&gt;
&lt;td&gt;排除文件&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;grep -ir &amp;quot;ubuntu&amp;quot; /etc&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;注意 如果 &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;双引号内带有--&amp;quot;&lt;/span&gt; 可能会有不可预知的情况&lt;/span&gt; &lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;grep -ir &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;--ubuntu&amp;quot;&lt;/span&gt; /etc 这种写法会出问题&lt;/span&gt;&lt;br&gt;&lt;br&gt;grep -ir &amp;quot;Application_Initialize&amp;quot; /a_usr/rosemaryCR/mikan/ --exclude-dir=out&lt;br&gt;grep -ir &amp;quot;CARRIER_HOME_REVERSAL&amp;quot; ./ --exclude=GRTAGS --exclude=mechapi.c&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;grep-搜索正则表达式并列出&#34;&gt;&lt;a href=&#34;#grep-搜索正则表达式并列出&#34; class=&#34;headerlink&#34; title=&#34;grep 搜索正则表达式并列出&#34;&gt;&lt;/a&gt;grep 搜索正则表达式并列出&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;| grep 22&lt;/span&gt;&lt;br&gt;sudo netstat -ntlp | grep 22&lt;br&gt;sudo apt list | grep php&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;pwd&#34;&gt;&lt;a href=&#34;#pwd&#34; class=&#34;headerlink&#34; title=&#34;pwd&#34;&gt;&lt;/a&gt;pwd&lt;/h3&gt;&lt;p&gt;print work directory 输出当前目录&lt;/p&gt;
&lt;h3 id=&#34;cat&#34;&gt;&lt;a href=&#34;#cat&#34; class=&#34;headerlink&#34; title=&#34;cat&#34;&gt;&lt;/a&gt;cat&lt;/h3&gt;&lt;p&gt;在当前命令窗口输出文件&lt;/p&gt;
&lt;h3 id=&#34;nano&#34;&gt;&lt;a href=&#34;#nano&#34; class=&#34;headerlink&#34; title=&#34;nano&#34;&gt;&lt;/a&gt;nano&lt;/h3&gt;&lt;p&gt;文本编辑器&lt;/p&gt;
&lt;h3 id=&#34;fdisk-查看磁盘&#34;&gt;&lt;a href=&#34;#fdisk-查看磁盘&#34; class=&#34;headerlink&#34; title=&#34;fdisk 查看磁盘&#34;&gt;&lt;/a&gt;fdisk 查看磁盘&lt;/h3&gt;&lt;p&gt;-l 显示长信息&lt;/p&gt;
&lt;h3 id=&#34;mount-unmount-挂载卸载&#34;&gt;&lt;a href=&#34;#mount-unmount-挂载卸载&#34; class=&#34;headerlink&#34; title=&#34;mount unmount 挂载卸载&#34;&gt;&lt;/a&gt;mount unmount 挂载卸载&lt;/h3&gt;&lt;h4 id=&#34;mount-挂载&#34;&gt;&lt;a href=&#34;#mount-挂载&#34; class=&#34;headerlink&#34; title=&#34;mount 挂载&#34;&gt;&lt;/a&gt;mount 挂载&lt;/h4&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;需要先创建一个挂载点&lt;/span&gt;&lt;br&gt;sudo mkdir /mnt/usb&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;挂载&lt;/span&gt;&lt;br&gt;sudo mount /dev/sda1 /mnt/usb&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;mount 中文乱码&lt;/span&gt;&lt;br&gt;sudo mount -o iocharset=utf8 /dev/sda1 /mnt/usb&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&#34;umount-卸载&#34;&gt;&lt;a href=&#34;#umount-卸载&#34; class=&#34;headerlink&#34; title=&#34;umount 卸载&#34;&gt;&lt;/a&gt;umount 卸载&lt;/h4&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;卸载&lt;/span&gt;&lt;br&gt;sudo umount /mnt/usb&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;卸载的时候出错注意是不是文件夹正在使用中&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&#34;树莓派自动挂载&#34;&gt;&lt;a href=&#34;#树莓派自动挂载&#34; class=&#34;headerlink&#34; title=&#34;树莓派自动挂载&#34;&gt;&lt;/a&gt;树莓派自动挂载&lt;/h4&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;打开文件 添加以下 这个带有超时,可以避免拔掉U盘开不了机&lt;/span&gt;&lt;br&gt;sudo nano /etc/fstab&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;/dev/sda1 /mnt/usb    auto     defaults,nofail,x-systemd.device-timeout=1,noatime  0   0&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h3 id=&#34;mkdir-创建文件夹-1&#34;&gt;&lt;a href=&#34;#mkdir-创建文件夹-1&#34; class=&#34;headerlink&#34; title=&#34;mkdir 创建文件夹&#34;&gt;&lt;/a&gt;mkdir 创建文件夹&lt;/h3&gt;&lt;h3 id=&#34;rmdir-删除文件夹-1&#34;&gt;&lt;a href=&#34;#rmdir-删除文件夹-1&#34; class=&#34;headerlink&#34; title=&#34;rmdir 删除文件夹&#34;&gt;&lt;/a&gt;rmdir 删除文件夹&lt;/h3&gt;&lt;h3 id=&#34;rm-rf&#34;&gt;&lt;a href=&#34;#rm-rf&#34; class=&#34;headerlink&#34; title=&#34;rm -rf&#34;&gt;&lt;/a&gt;rm -rf&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;功能说明：删除文件或目录。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;语法：rm [-dfirv][–help][–version][文件或目录]&lt;/p&gt;
&lt;p&gt;补充说明：执行rm指令可删除文件或目录，如欲删除目录必须加上参数”-r”，否则预设仅会删除文件。&lt;/p&gt;
&lt;p&gt;参数：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;-d 或 –directory 　直接把欲删除的目录的硬连接数据删成0，删除该目录。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;-f 或 –force 　强制删除文件或目录。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;-i 或 –interactive 　删除既有文件或目录之前先询问用户。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;-r 或 -R 或 –recursive 　递归处理，将指定目录下的所有文件及子目录一并处理。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;-v 或 –verbose 　显示指令执行过程。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;netstat-列出网络&#34;&gt;&lt;a href=&#34;#netstat-列出网络&#34; class=&#34;headerlink&#34; title=&#34;netstat 列出网络&#34;&gt;&lt;/a&gt;netstat 列出网络&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;列出所有&lt;/span&gt;&lt;br&gt;sudo netstat -ntlp&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;查找&lt;/span&gt;&lt;br&gt;netstat -ntlp | grep 80&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;ln-文件夹链接&#34;&gt;&lt;a href=&#34;#ln-文件夹链接&#34; class=&#34;headerlink&#34; title=&#34;ln 文件夹链接&#34;&gt;&lt;/a&gt;ln 文件夹链接&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;软链接 现有a 链接到b(没有的,目标的)&lt;/span&gt;&lt;br&gt;ln -s a b&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h3 id=&#34;dd&#34;&gt;&lt;a href=&#34;#dd&#34; class=&#34;headerlink&#34; title=&#34;dd&#34;&gt;&lt;/a&gt;dd&lt;/h3&gt;&lt;h4 id=&#34;dd-进行测速&#34;&gt;&lt;a href=&#34;#dd-进行测速&#34; class=&#34;headerlink&#34; title=&#34;dd 进行测速&#34;&gt;&lt;/a&gt;dd 进行测速&lt;/h4&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;以下两条Shell分别测试写入和读取1G的文件从/mnt/usb/目录，就是U盘的挂载点（硬盘测试也可以这样）：&lt;/span&gt;&lt;br&gt;&lt;br&gt;time dd if=/dev/zero of=/mnt/usb/1g bs=1024 count=1000000&lt;br&gt;time dd if=/mnt/usb/1g bs=128k | dd of=/dev/null&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h3 id=&#34;source-刷新环境变量&#34;&gt;&lt;a href=&#34;#source-刷新环境变量&#34; class=&#34;headerlink&#34; title=&#34;source 刷新环境变量&#34;&gt;&lt;/a&gt;source 刷新环境变量&lt;/h3&gt;&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 刷新环境变量&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;source&lt;/span&gt; ~/.profile&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;source&lt;/span&gt; 后面接文件&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h3 id=&#34;tail-循环读取log&#34;&gt;&lt;a href=&#34;#tail-循环读取log&#34; class=&#34;headerlink&#34; title=&#34;tail 循环读取log&#34;&gt;&lt;/a&gt;tail 循环读取log&lt;/h3&gt;&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;tail&lt;/span&gt; -f filename&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;file-辨识文件类型&#34;&gt;&lt;a href=&#34;#file-辨识文件类型&#34; class=&#34;headerlink&#34; title=&#34;file 辨识文件类型&#34;&gt;&lt;/a&gt;file 辨识文件类型&lt;/h3&gt;&lt;blockquote&gt;
&lt;h3 id=&#34;语法-1&#34;&gt;&lt;a href=&#34;#语法-1&#34; class=&#34;headerlink&#34; title=&#34;语法&#34;&gt;&lt;/a&gt;语法&lt;/h3&gt;  &lt;figure class=&#34;highlight css&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs css&#34;&gt;file &lt;span class=&#34;hljs-selector-attr&#34;&gt;[-bcLvz]&lt;/span&gt;&lt;span class=&#34;hljs-selector-attr&#34;&gt;[-f &amp;lt;名称文件&amp;gt;]&lt;/span&gt;&lt;span class=&#34;hljs-selector-attr&#34;&gt;[-m &amp;lt;魔法数字文件&amp;gt;...]&lt;/span&gt;&lt;span class=&#34;hljs-selector-attr&#34;&gt;[文件或目录...]&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;  &lt;strong&gt;参数&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;-b 　列出辨识结果时，不显示文件名称。&lt;/li&gt;
&lt;li&gt;-c 　详细显示指令执行过程，便于排错或分析程序执行的情形。&lt;/li&gt;
&lt;li&gt;-f&amp;lt;名称文件&amp;gt; 　指定名称文件，其内容有一个或多个文件名称时，让file依序辨识这些文件，格式为每列一个文件名称。&lt;/li&gt;
&lt;li&gt;-L 　直接显示符号连接所指向的文件的类别。&lt;/li&gt;
&lt;li&gt;-m&amp;lt;魔法数字文件&amp;gt; 　指定魔法数字文件。&lt;/li&gt;
&lt;li&gt;-v 　显示版本信息。&lt;/li&gt;
&lt;li&gt;-z 　尝试去解读压缩文件的内容。&lt;/li&gt;
&lt;li&gt;[文件或目录…] 要确定类型的文件列表，多个文件之间使用空格分开，可以使用shell通配符匹配多个文件。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;curl&#34;&gt;&lt;a href=&#34;#curl&#34; class=&#34;headerlink&#34; title=&#34;curl&#34;&gt;&lt;/a&gt;curl&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;-x&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;每次访问时都需要写代理参数&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;curl -x socks5://127.0.0.1:1024 http://www.google.com &lt;span class=&#34;hljs-comment&#34;&gt;# -x 参数等同于 --proxy&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;-v&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;curl -v&lt;/code&gt;参数会输出请求中访问的路由信息，方便确定是否设置成功，请求有没有代理&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;-w&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;[使用 curl 测试网站加载速度](##使用 curl 测试网站加载速度)&lt;/p&gt;
&lt;p&gt;该选项在请求结束之后打印本次请求的统计数据到标准输出。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  首先，我们定义控制打印行为的格式化字符串。新建文本文件 &lt;code&gt;fmt.txt&lt;/code&gt;，并填入下面的内容：&lt;/p&gt;
  &lt;figure class=&#34;highlight ruby&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs ruby&#34;&gt;\n&lt;br&gt;&lt;span class=&#34;hljs-title class_&#34;&gt;Response&lt;/span&gt; &lt;span class=&#34;hljs-title class_&#34;&gt;Time&lt;/span&gt; &lt;span class=&#34;hljs-symbol&#34;&gt;for:&lt;/span&gt; &lt;span class=&#34;hljs-string&#34;&gt;%&amp;#123;url_effective&amp;#125;&lt;/span&gt;\n\n&lt;br&gt;&lt;span class=&#34;hljs-variable constant_&#34;&gt;DNS&lt;/span&gt; &lt;span class=&#34;hljs-title class_&#34;&gt;Lookup&lt;/span&gt; &lt;span class=&#34;hljs-title class_&#34;&gt;Time&lt;/span&gt;&lt;span class=&#34;hljs-symbol&#34;&gt;:&lt;/span&gt;\t\t&lt;span class=&#34;hljs-string&#34;&gt;%&amp;#123;time_namelookup&amp;#125;&lt;/span&gt;s\n&lt;br&gt;&lt;span class=&#34;hljs-title class_&#34;&gt;Redirection&lt;/span&gt; &lt;span class=&#34;hljs-title class_&#34;&gt;Time&lt;/span&gt;&lt;span class=&#34;hljs-symbol&#34;&gt;:&lt;/span&gt;\t\t&lt;span class=&#34;hljs-string&#34;&gt;%&amp;#123;time_redirect&amp;#125;&lt;/span&gt;s\n&lt;br&gt;&lt;span class=&#34;hljs-title class_&#34;&gt;Connection&lt;/span&gt; &lt;span class=&#34;hljs-title class_&#34;&gt;Time&lt;/span&gt;&lt;span class=&#34;hljs-symbol&#34;&gt;:&lt;/span&gt;\t\t&lt;span class=&#34;hljs-string&#34;&gt;%&amp;#123;time_connect&amp;#125;&lt;/span&gt;s\n&lt;br&gt;&lt;span class=&#34;hljs-title class_&#34;&gt;App&lt;/span&gt; &lt;span class=&#34;hljs-title class_&#34;&gt;Connection&lt;/span&gt; &lt;span class=&#34;hljs-title class_&#34;&gt;Time&lt;/span&gt;&lt;span class=&#34;hljs-symbol&#34;&gt;:&lt;/span&gt;\t\t&lt;span class=&#34;hljs-string&#34;&gt;%&amp;#123;time_appconnect&amp;#125;&lt;/span&gt;s\n&lt;br&gt;&lt;span class=&#34;hljs-title class_&#34;&gt;Pre&lt;/span&gt;-transfer &lt;span class=&#34;hljs-title class_&#34;&gt;Time&lt;/span&gt;&lt;span class=&#34;hljs-symbol&#34;&gt;:&lt;/span&gt;\t\t&lt;span class=&#34;hljs-string&#34;&gt;%&amp;#123;time_pretransfer&amp;#125;&lt;/span&gt;s\n&lt;br&gt;&lt;span class=&#34;hljs-title class_&#34;&gt;Start&lt;/span&gt;-transfer &lt;span class=&#34;hljs-title class_&#34;&gt;Time&lt;/span&gt;&lt;span class=&#34;hljs-symbol&#34;&gt;:&lt;/span&gt;\t\t&lt;span class=&#34;hljs-string&#34;&gt;%&amp;#123;time_starttransfer&amp;#125;&lt;/span&gt;s\n\n&lt;br&gt;&lt;span class=&#34;hljs-title class_&#34;&gt;Total&lt;/span&gt; &lt;span class=&#34;hljs-title class_&#34;&gt;Time&lt;/span&gt;&lt;span class=&#34;hljs-symbol&#34;&gt;:&lt;/span&gt;\t\t\t&lt;span class=&#34;hljs-string&#34;&gt;%&amp;#123;time_total&amp;#125;&lt;/span&gt;s\n&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;  curl 提供了很多置换变量，可以在格式化字符串中通过 &lt;code&gt;%&amp;#123;var&amp;#125;&lt;/code&gt; 的形式使用。完整的变量列表可以在 curl 的 manpage 中查看。简单介绍一下我们使用的这几个变量：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;url_effective&lt;/code&gt;: 执行完地址重定向之后的最终 URL；&lt;/li&gt;
&lt;li&gt;&lt;code&gt;time_namelookup&lt;/code&gt;: 从请求开始至完成名称解析所花的时间，单位为秒，下同；&lt;/li&gt;
&lt;li&gt;&lt;code&gt;time_redirect&lt;/code&gt;: 执行所有重定向所花的时间；&lt;/li&gt;
&lt;li&gt;&lt;code&gt;time_connect&lt;/code&gt;: 从请求开始至建立 TCP 连接所花的时间；&lt;/li&gt;
&lt;li&gt;&lt;code&gt;time_appconnect&lt;/code&gt;: 从请求开始至完成 SSL&amp;#x2F;SSH 握手所花的时间；&lt;/li&gt;
&lt;li&gt;&lt;code&gt;time_pretransfer&lt;/code&gt;: 从请求开始至服务器准备传送文件所花的时间，包含了传送协商时间；&lt;/li&gt;
&lt;li&gt;&lt;code&gt;time_starttransfer&lt;/code&gt;: 从请求开始至服务器准备传送第一个字节所花的时间；&lt;/li&gt;
&lt;li&gt;&lt;code&gt;time_total&lt;/code&gt;: 完整耗时。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;  然后执行请求，通过 &lt;code&gt;@filename&lt;/code&gt; 指定保存了格式化字符串的文件：&lt;/p&gt;
  &lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;$ &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;curl -L -s -w @fmt.txt -o /dev/null http://www.google.com&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;  输出：&lt;/p&gt;
  &lt;figure class=&#34;highlight cpp&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs cpp&#34;&gt;Response Time &lt;span class=&#34;hljs-keyword&#34;&gt;for&lt;/span&gt;: http:&lt;span class=&#34;hljs-comment&#34;&gt;//www.google.co.jp/?gfe_rd=cr&amp;amp;dcr=0&amp;amp;ei=cjIaWpTkHeiQ8QfnxYzoBA&lt;/span&gt;&lt;br&gt;&lt;br&gt;DNS Lookup Time:        &lt;span class=&#34;hljs-number&#34;&gt;0.000038&lt;/span&gt;s&lt;br&gt;Redirection Time:       &lt;span class=&#34;hljs-number&#34;&gt;0.207271&lt;/span&gt;s&lt;br&gt;Connection Time:        &lt;span class=&#34;hljs-number&#34;&gt;0.000039&lt;/span&gt;s&lt;br&gt;App Connection Time:    &lt;span class=&#34;hljs-number&#34;&gt;0.000039&lt;/span&gt;s&lt;br&gt;Pre-transfer Time:      &lt;span class=&#34;hljs-number&#34;&gt;0.000067&lt;/span&gt;s&lt;br&gt;Start-transfer Time:    &lt;span class=&#34;hljs-number&#34;&gt;0.260115&lt;/span&gt;s&lt;br&gt;&lt;br&gt;Total Time:             &lt;span class=&#34;hljs-number&#34;&gt;0.467691&lt;/span&gt;s&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;type&#34;&gt;&lt;a href=&#34;#type&#34; class=&#34;headerlink&#34; title=&#34;type&#34;&gt;&lt;/a&gt;type&lt;/h3&gt;&lt;p&gt;通过type 命令可以查看命令类型：&lt;/p&gt;
&lt;figure class=&#34;highlight vim&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs vim&#34;&gt;$ &lt;span class=&#34;hljs-built_in&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;hljs-keyword&#34;&gt;echo&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;hljs-keyword&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;hljs-keyword&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;hljs-keyword&#34;&gt;shell&lt;/span&gt; builtin&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;whereis&#34;&gt;&lt;a href=&#34;#whereis&#34; class=&#34;headerlink&#34; title=&#34;whereis&#34;&gt;&lt;/a&gt;whereis&lt;/h3&gt;&lt;blockquote&gt;
&lt;h1 id=&#34;Linux-whereis命令&#34;&gt;&lt;a href=&#34;#Linux-whereis命令&#34; class=&#34;headerlink&#34; title=&#34;Linux whereis命令&#34;&gt;&lt;/a&gt;Linux whereis命令&lt;/h1&gt;&lt;p&gt;  Linux whereis命令用于查找文件。&lt;/p&gt;
&lt;p&gt;  该指令会在特定目录中查找符合条件的文件。这些文件应属于原始代码、二进制文件，或是帮助文件。&lt;/p&gt;
&lt;p&gt;  该指令只能用于查找二进制文件、源代码文件和man手册页，一般文件的定位需使用locate命令。&lt;/p&gt;
&lt;h3 id=&#34;语法-2&#34;&gt;&lt;a href=&#34;#语法-2&#34; class=&#34;headerlink&#34; title=&#34;语法&#34;&gt;&lt;/a&gt;语法&lt;/h3&gt;  &lt;figure class=&#34;highlight css&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs css&#34;&gt;whereis &lt;span class=&#34;hljs-selector-attr&#34;&gt;[-bfmsu]&lt;/span&gt;&lt;span class=&#34;hljs-selector-attr&#34;&gt;[-B &amp;lt;目录&amp;gt;...]&lt;/span&gt;&lt;span class=&#34;hljs-selector-attr&#34;&gt;[-M &amp;lt;目录&amp;gt;...]&lt;/span&gt;&lt;span class=&#34;hljs-selector-attr&#34;&gt;[-S &amp;lt;目录&amp;gt;...]&lt;/span&gt;&lt;span class=&#34;hljs-selector-attr&#34;&gt;[文件...]&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;  &lt;strong&gt;参数&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;  -b 　只查找二进制文件。&lt;/p&gt;
&lt;p&gt;  -B&amp;lt;目录&amp;gt; 　只在设置的目录下查找二进制文件。&lt;/p&gt;
&lt;p&gt;  -f 　不显示文件名前的路径名称。&lt;/p&gt;
&lt;p&gt;  -m 　只查找说明文件。&lt;/p&gt;
&lt;p&gt;  -M&amp;lt;目录&amp;gt; 　只在设置的目录下查找说明文件。&lt;/p&gt;
&lt;p&gt;  -s 　只查找原始代码文件。&lt;/p&gt;
&lt;p&gt;  -S&amp;lt;目录&amp;gt; 　只在设置的目录下查找原始代码文件。&lt;/p&gt;
&lt;p&gt;  -u 　查找不包含指定类型的文件。&lt;/p&gt;
&lt;h3 id=&#34;实例-1&#34;&gt;&lt;a href=&#34;#实例-1&#34; class=&#34;headerlink&#34; title=&#34;实例&#34;&gt;&lt;/a&gt;实例&lt;/h3&gt;&lt;p&gt;  使用指令”whereis”查看指令”bash”的位置，输入如下命令：&lt;/p&gt;
  &lt;figure class=&#34;highlight crystal&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs crystal&#34;&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$ &lt;/span&gt;whereis bash &lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;  上面的指令执行后，输出信息如下所示：&lt;/p&gt;
  &lt;figure class=&#34;highlight awk&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs awk&#34;&gt;bash:&lt;span class=&#34;hljs-regexp&#34;&gt;/bin/&lt;/span&gt;bash&lt;span class=&#34;hljs-regexp&#34;&gt;/etc/&lt;/span&gt;bash.bashrc&lt;span class=&#34;hljs-regexp&#34;&gt;/usr/&lt;/span&gt;share&lt;span class=&#34;hljs-regexp&#34;&gt;/man/m&lt;/span&gt;an1/bash.&lt;span class=&#34;hljs-number&#34;&gt;1&lt;/span&gt;.gz &lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;  注意：以上输出信息从左至右分别为查询的程序名、bash路径、bash的man 手册页路径。&lt;/p&gt;
&lt;p&gt;  如果用户需要单独查询二进制文件或帮助文件，可使用如下命令：&lt;/p&gt;
  &lt;figure class=&#34;highlight mipsasm&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs mipsasm&#34;&gt;$ whereis -&lt;span class=&#34;hljs-keyword&#34;&gt;b &lt;/span&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;bash &lt;/span&gt;&lt;br&gt;$ whereis -m &lt;span class=&#34;hljs-keyword&#34;&gt;bash &lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;  输出信息如下：&lt;/p&gt;
  &lt;figure class=&#34;highlight awk&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs awk&#34;&gt;$ whereis -b bash               &lt;span class=&#34;hljs-comment&#34;&gt;#显示bash 命令的二进制程序  &lt;/span&gt;&lt;br&gt;bash: &lt;span class=&#34;hljs-regexp&#34;&gt;/bin/&lt;/span&gt;bash &lt;span class=&#34;hljs-regexp&#34;&gt;/etc/&lt;/span&gt;bash.bashrc &lt;span class=&#34;hljs-regexp&#34;&gt;/usr/&lt;/span&gt;share/bash    &lt;span class=&#34;hljs-comment&#34;&gt;# bash命令的二进制程序的地址  &lt;/span&gt;&lt;br&gt;$ whereis -m bash               &lt;span class=&#34;hljs-comment&#34;&gt;#显示bash 命令的帮助文件  &lt;/span&gt;&lt;br&gt;bash: &lt;span class=&#34;hljs-regexp&#34;&gt;/usr/&lt;/span&gt;share&lt;span class=&#34;hljs-regexp&#34;&gt;/man/m&lt;/span&gt;an1/bash.&lt;span class=&#34;hljs-number&#34;&gt;1&lt;/span&gt;.gz  &lt;span class=&#34;hljs-comment&#34;&gt;#bash命令的帮助文件地址  &lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;systemctl&#34;&gt;&lt;a href=&#34;#systemctl&#34; class=&#34;headerlink&#34; title=&#34;systemctl&#34;&gt;&lt;/a&gt;systemctl&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;设置开机自启动 &lt;code&gt;systemctl enable&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;停止开机自启动 &lt;code&gt;systemctl disable&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;验证一下是否为开机启动 &lt;code&gt;systemctl is-enabled&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;启动服务 &lt;code&gt;systemctl start xxxxx.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;停止服务 &lt;code&gt;systemctl stop xxxxx.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;重启服务 &lt;code&gt;systemctl restart xxxxx.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;查看服务状态 &lt;code&gt;systemctl status xxxxx.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;查看所有已启动的服务 &lt;code&gt;systemctl list-units --type=service&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;linux-内核原理&#34;&gt;&lt;a href=&#34;#linux-内核原理&#34; class=&#34;headerlink&#34; title=&#34;linux 内核原理&#34;&gt;&lt;/a&gt;linux 内核原理&lt;/h1&gt;&lt;h2 id=&#34;namespace&#34;&gt;&lt;a href=&#34;#namespace&#34; class=&#34;headerlink&#34; title=&#34;namespace&#34;&gt;&lt;/a&gt;namespace&lt;/h2&gt;&lt;h2 id=&#34;cgroup&#34;&gt;&lt;a href=&#34;#cgroup&#34; class=&#34;headerlink&#34; title=&#34;cgroup&#34;&gt;&lt;/a&gt;cgroup&lt;/h2&gt;&lt;h1 id=&#34;apt包管理&#34;&gt;&lt;a href=&#34;#apt包管理&#34; class=&#34;headerlink&#34; title=&#34;apt包管理&#34;&gt;&lt;/a&gt;apt包管理&lt;/h1&gt;&lt;h2 id=&#34;换源&#34;&gt;&lt;a href=&#34;#换源&#34; class=&#34;headerlink&#34; title=&#34;换源&#34;&gt;&lt;/a&gt;换源&lt;/h2&gt;&lt;figure class=&#34;highlight awk&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs awk&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 一键更换国内软件源脚本&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# https://github.com/SuperManito/LinuxMirrors&lt;/span&gt;&lt;br&gt;bash &amp;lt;(curl -sSL https:&lt;span class=&#34;hljs-regexp&#34;&gt;//gi&lt;/span&gt;tee.com&lt;span class=&#34;hljs-regexp&#34;&gt;/SuperManito/&lt;/span&gt;LinuxMirrors&lt;span class=&#34;hljs-regexp&#34;&gt;/raw/m&lt;/span&gt;ain/ChangeMirrors.sh)&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;源网站list&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;https://www.raspbian.org/RaspbianMirrors&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;examp&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;mirrors.shu.edu.cn/raspbian/raspbian/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;http://mirrors.aliyun.com/raspbian/raspbian/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;/span&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;先备份&lt;/span&gt;&lt;br&gt;sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;language-bash&#34;&gt;sudo vim /etc/apt/sources.list&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;改成如下 32bit OS&lt;/span&gt;&lt;br&gt;deb http://mirrors.aliyun.com/raspbian/raspbian/ buster main non-free contrib rpi&lt;br&gt;deb-src http://mirrors.aliyun.com/raspbian/raspbian/ buster main non-free contrib rpi&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;64bit OS&lt;/span&gt;&lt;br&gt;deb https://mirrors.tuna.tsinghua.edu.cn/debian buster main contrib non-free&lt;br&gt;deb https://mirrors.tuna.tsinghua.edu.cn/debian-security/ buster/updates main contrib non-free&lt;br&gt;deb https://mirrors.tuna.tsinghua.edu.cn/debian buster-updates main contrib non-free&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;先备份&lt;/span&gt;&lt;br&gt;sudo cp /etc/apt/sources.list.d/raspi.list  /etc/apt/sources.list.d/raspi.list.bak&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;language-bash&#34;&gt;sudo nano /etc/apt/sources.list.d/raspi.list&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;改成如下&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;debian 10.x (buster)&lt;/span&gt;&lt;br&gt;deb http://mirrors.aliyun.com/raspbian/raspbian/ buster main ui&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;or&lt;/span&gt; &lt;br&gt;deb http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main ui&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;debian 11.x (bullseye)&lt;/span&gt;&lt;br&gt;deb http://mirrors.aliyun.com/raspbian/raspbian/ bullseye main&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;ubuntu 20.04&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;添加阿里源&lt;/span&gt;&lt;br&gt;deb https://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse&lt;br&gt;deb-src https://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse&lt;br&gt;deb https://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse&lt;br&gt;deb-src https://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse&lt;br&gt;deb https://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse&lt;br&gt;deb-src https://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse&lt;br&gt;deb https://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse&lt;br&gt;deb-src https://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse&lt;br&gt;deb https://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse&lt;br&gt;deb-src https://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释&lt;/span&gt;&lt;br&gt;deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse&lt;/span&gt;&lt;br&gt;deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse&lt;/span&gt;&lt;br&gt;deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse&lt;/span&gt;&lt;br&gt;deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;换源后出现证书问题&#34;&gt;&lt;a href=&#34;#换源后出现证书问题&#34; class=&#34;headerlink&#34; title=&#34;换源后出现证书问题&#34;&gt;&lt;/a&gt;换源后出现证书问题&lt;/h3&gt;&lt;figure class=&#34;highlight pgsql&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs pgsql&#34;&gt;Err:&lt;span class=&#34;hljs-number&#34;&gt;22&lt;/span&gt; https://mirrors.tuna.tsinghua.edu.cn/ubuntu focal &lt;span class=&#34;hljs-keyword&#34;&gt;Release&lt;/span&gt;&lt;br&gt;  Certificate verification failed: The certificate &lt;span class=&#34;hljs-keyword&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;hljs-keyword&#34;&gt;NOT&lt;/span&gt; &lt;span class=&#34;hljs-keyword&#34;&gt;trusted&lt;/span&gt;. The certificate chain uses expired certificate.  Could &lt;span class=&#34;hljs-keyword&#34;&gt;not&lt;/span&gt; handshake: Error &lt;span class=&#34;hljs-keyword&#34;&gt;in&lt;/span&gt; the certificate verification. [IP: &lt;span class=&#34;hljs-number&#34;&gt;101.6&lt;/span&gt;&lt;span class=&#34;hljs-number&#34;&gt;.15&lt;/span&gt;&lt;span class=&#34;hljs-number&#34;&gt;.130&lt;/span&gt; &lt;span class=&#34;hljs-number&#34;&gt;443&lt;/span&gt;]&lt;br&gt;# 证书验证失败:证书不受信任。证书链使用过期的证书。无法握手:证书验证中出现错误。&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;原因为未安装&lt;code&gt;ca-certificates&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;可以先使用http代替掉https，然后安装&lt;code&gt;ca-certificates&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;安装 ca-certificates.&lt;/p&gt;
&lt;figure class=&#34;highlight routeros&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs routeros&#34;&gt;sudo apt-&lt;span class=&#34;hljs-built_in&#34;&gt;get&lt;/span&gt; install ca-certificates&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;再次 &lt;code&gt;sudo apt-get update&lt;/code&gt; 发现问题已经消失.&lt;/p&gt;
&lt;figure class=&#34;highlight jboss-cli&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs jboss-cli&#34;&gt;sudo gpg &lt;span class=&#34;hljs-params&#34;&gt;--keyserver&lt;/span&gt; keyserver.ubuntu.com &lt;span class=&#34;hljs-params&#34;&gt;--recv&lt;/span&gt; 5523BAEEB01FA116 &lt;span class=&#34;hljs-string&#34;&gt;//&lt;/span&gt;&lt;span class=&#34;hljs-params&#34;&gt;(这个公钥根据提示来写的)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# eg.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# sudo gpg --keyserver keyserver.ubuntu.com --recv 648ACFD622F3D138 0E98404D386FA1D9 DCC9EFBF77E11517 112695A0E562B32A  54404762BBB6E853&lt;/span&gt;&lt;br&gt; &lt;br&gt;sudo gpg &lt;span class=&#34;hljs-params&#34;&gt;--export&lt;/span&gt; &lt;span class=&#34;hljs-params&#34;&gt;--armor&lt;/span&gt; 5523BAEEB01FA116 | sudo apt-key add -&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# eg.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# sudo gpg --export --armor 648ACFD622F3D138 0E98404D386FA1D9 DCC9EFBF77E11517 112695A0E562B32A  54404762BBB6E853 | sudo apt-key add -&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;常用命令&#34;&gt;&lt;a href=&#34;#常用命令&#34; class=&#34;headerlink&#34; title=&#34;常用命令&#34;&gt;&lt;/a&gt;常用命令&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;安装指定版本的包&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;sudo apt-get install package=version&lt;/span&gt;&lt;br&gt;sudo apt-get install python3=3.7.3-1&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;列出所有包 apt-cache madison package&lt;/span&gt;&lt;br&gt;apt-cache madison python3&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;更新源-amp-包&#34;&gt;&lt;a href=&#34;#更新源-amp-包&#34; class=&#34;headerlink&#34; title=&#34;更新源&amp;amp;包&#34;&gt;&lt;/a&gt;更新源&amp;amp;包&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;更新源&lt;/span&gt;&lt;br&gt;sudo apt-get update&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;更新软件包&lt;/span&gt;&lt;br&gt;sudo apt-get upgrade&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;卸载包&#34;&gt;&lt;a href=&#34;#卸载包&#34; class=&#34;headerlink&#34; title=&#34;卸载包&#34;&gt;&lt;/a&gt;卸载包&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;删除包&lt;/span&gt;&lt;br&gt;sudo apt-get remove nginx&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;查找 xx 相关软件&lt;/span&gt;&lt;br&gt;dpkg --get-selections|grep nginx&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;删除包及其配置&lt;/span&gt;&lt;br&gt;sudo apt-get --purge remove nginx&lt;br&gt;sudo apt-get purge --auto-remove nginx&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;删除不使用的包&lt;/span&gt;&lt;br&gt;sudo apt-get autoremove&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;清除缓存&lt;/span&gt;&lt;br&gt;sudo apt-get clean&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;远程桌面&#34;&gt;&lt;a href=&#34;#远程桌面&#34; class=&#34;headerlink&#34; title=&#34;远程桌面&#34;&gt;&lt;/a&gt;远程桌面&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;sudo apt-get install xrdp&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;





&lt;h1 id=&#34;Editor&#34;&gt;&lt;a href=&#34;#Editor&#34; class=&#34;headerlink&#34; title=&#34;Editor&#34;&gt;&lt;/a&gt;Editor&lt;/h1&gt;&lt;h2 id=&#34;VIM&#34;&gt;&lt;a href=&#34;#VIM&#34; class=&#34;headerlink&#34; title=&#34;VIM&#34;&gt;&lt;/a&gt;VIM&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;输入模式&lt;/li&gt;
&lt;li&gt;指令模式&lt;/li&gt;
&lt;li&gt;底行模式&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;指令模式&#34;&gt;&lt;a href=&#34;#指令模式&#34; class=&#34;headerlink&#34; title=&#34;指令模式&#34;&gt;&lt;/a&gt;指令模式&lt;/h3&gt;&lt;p&gt;(n)&amp;#x3D;数字&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;i&lt;/td&gt;
&lt;td&gt;前面插入&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;I&lt;/td&gt;
&lt;td&gt;行首插入&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;a&lt;/td&gt;
&lt;td&gt;后面插入&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;行尾插入&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;o&lt;/td&gt;
&lt;td&gt;下方新建一行&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;O&lt;/td&gt;
&lt;td&gt;上面新建一行&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;s&lt;/td&gt;
&lt;td&gt;删除字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;r&lt;/td&gt;
&lt;td&gt;替换字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;hjkl&lt;/td&gt;
&lt;td&gt;光标移动&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(n)G&lt;/td&gt;
&lt;td&gt;光标移动到第n行 跳转到行&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(n)+&lt;/td&gt;
&lt;td&gt;下移n行&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(n)-&lt;/td&gt;
&lt;td&gt;上移n行&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Ctrl+f&lt;/td&gt;
&lt;td&gt;上一页&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Ctrl+b&lt;/td&gt;
&lt;td&gt;下一页&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cc&lt;/td&gt;
&lt;td&gt;删除整行，并修改&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;dd&lt;/td&gt;
&lt;td&gt;删除整行&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(n)dd&lt;/td&gt;
&lt;td&gt;删除n行&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;x&lt;/td&gt;
&lt;td&gt;删除光标所在字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;X&lt;/td&gt;
&lt;td&gt;删除光标前一个字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;yy&lt;/td&gt;
&lt;td&gt;复制整行&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(n)yy&lt;/td&gt;
&lt;td&gt;复制n行&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;p&lt;/td&gt;
&lt;td&gt;粘贴&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;u&lt;/td&gt;
&lt;td&gt;撤销&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;^r&lt;/td&gt;
&lt;td&gt;重做&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h3 id=&#34;底行模式&#34;&gt;&lt;a href=&#34;#底行模式&#34; class=&#34;headerlink&#34; title=&#34;底行模式&#34;&gt;&lt;/a&gt;底行模式&lt;/h3&gt;&lt;h4 id=&#34;指令&#34;&gt;&lt;a href=&#34;#指令&#34; class=&#34;headerlink&#34; title=&#34;: 指令&#34;&gt;&lt;/a&gt;: 指令&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;x&lt;/td&gt;
&lt;td&gt;保存退出&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;q!&lt;/td&gt;
&lt;td&gt;不保存强制退出&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(n)&lt;/td&gt;
&lt;td&gt;跳转到行&lt;code&gt;:n 需要回车&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h4 id=&#34;x2F-搜索&#34;&gt;&lt;a href=&#34;#x2F-搜索&#34; class=&#34;headerlink&#34; title=&#34;&amp;#x2F; 搜索&#34;&gt;&lt;/a&gt;&amp;#x2F; 搜索&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;查看下一个匹配，按下n(小写n)&lt;/li&gt;
&lt;li&gt;跳转到上一个匹配，按下N（大写N）&lt;/li&gt;
&lt;li&gt;noh或者set noh 高亮&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;note&#34;&gt;&lt;a href=&#34;#note&#34; class=&#34;headerlink&#34; title=&#34;note&#34;&gt;&lt;/a&gt;note&lt;/h3&gt;&lt;h4 id=&#34;跳转到行&#34;&gt;&lt;a href=&#34;#跳转到行&#34; class=&#34;headerlink&#34; title=&#34;跳转到行&#34;&gt;&lt;/a&gt;跳转到行&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;指令模式 &lt;code&gt;(n)G&lt;/code&gt;  光标移动到第n行 跳转到行&lt;/li&gt;
&lt;li&gt;底行模式 &lt;code&gt;:n&lt;/code&gt; （跳转到文件第n行，需要回车）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;vim +n filename&lt;/code&gt; （在打开文件后，跳转到文件的第n行）&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;替换&#34;&gt;&lt;a href=&#34;#替换&#34; class=&#34;headerlink&#34; title=&#34;替换&#34;&gt;&lt;/a&gt;替换&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;  :[range]s&amp;#x2F;from&amp;#x2F;to&amp;#x2F;[flags]&lt;/p&gt;
&lt;p&gt;  range:搜索范围，如果没有指定范围，则作用于但前行。&lt;/p&gt;
  &lt;figure class=&#34;highlight awk&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs awk&#34;&gt;:&lt;span class=&#34;hljs-number&#34;&gt;1&lt;/span&gt;,&lt;span class=&#34;hljs-number&#34;&gt;10&lt;/span&gt;s&lt;span class=&#34;hljs-regexp&#34;&gt;/from/&lt;/span&gt;to/ 表示在第&lt;span class=&#34;hljs-number&#34;&gt;1&lt;/span&gt;到第&lt;span class=&#34;hljs-number&#34;&gt;10&lt;/span&gt;行（包含第&lt;span class=&#34;hljs-number&#34;&gt;1&lt;/span&gt;，第&lt;span class=&#34;hljs-number&#34;&gt;10&lt;/span&gt;行）之间搜索替换；&lt;br&gt;:&lt;span class=&#34;hljs-number&#34;&gt;10&lt;/span&gt;s&lt;span class=&#34;hljs-regexp&#34;&gt;/from/&lt;/span&gt;to/ 表示只在第&lt;span class=&#34;hljs-number&#34;&gt;10&lt;/span&gt;行搜索替换；&lt;br&gt;:%s&lt;span class=&#34;hljs-regexp&#34;&gt;/from/&lt;/span&gt;to/ 表示在所有行中搜索替换；&lt;br&gt;:&lt;span class=&#34;hljs-number&#34;&gt;1&lt;/span&gt;,&lt;span class=&#34;hljs-variable&#34;&gt;$s&lt;/span&gt;&lt;span class=&#34;hljs-regexp&#34;&gt;/from/&lt;/span&gt;to/ 同上。&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;  flags 有如下四个选项：&lt;/p&gt;
  &lt;figure class=&#34;highlight nginx&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs nginx&#34;&gt;&lt;span class=&#34;hljs-attribute&#34;&gt;c&lt;/span&gt; confirm，每次替换前询问；&lt;br&gt;e &lt;span class=&#34;hljs-literal&#34;&gt;error&lt;/span&gt;， 不显示错误；&lt;br&gt;g globle，不询问，整行替换。如果不加g选项，则只替换每行的第一个匹配到的字符串；&lt;br&gt;i ignore，忽略大小写。&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;vim 中可用 :s 命令来替换字符串，具体如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;:s/str1/str2/&lt;/code&gt; 替换当前行第一个 str1 为 str2&lt;/li&gt;
&lt;li&gt;&lt;code&gt;:s/str1/str2/g&lt;/code&gt; 替换当前行中所有 str1 为 str2&lt;/li&gt;
&lt;li&gt;&lt;code&gt;:m,ns/str1/str2/&lt;/code&gt; 替换第 n 行开始到最后一行中每一行的第一个 str1 为 str2&lt;/li&gt;
&lt;li&gt;&lt;code&gt;:m,ns/str1/str2/g&lt;/code&gt; 替换第 n 行开始到最后一行中所有的 str1 为 str2&lt;br&gt;(注：m和n 为数字，若m为 .，表示为当前行开始；若n为$，则表示到最后一行结束)&lt;br&gt;如果使用 # 作为分隔符，则中间出现的 &amp;#x2F; 不会作为分隔符，比如：&lt;br&gt;&lt;code&gt;:s#str1/#str2/#&lt;/code&gt; 替换当前行第一个 str1&amp;#x2F; 为 str2&amp;#x2F;&lt;br&gt;&lt;code&gt;:%s+/oradata/apras/+/user01/apras1+&lt;/code&gt; (使用+ 来 替换 &amp;#x2F; )： &amp;#x2F;oradata&amp;#x2F;apras&amp;#x2F;替换成&amp;#x2F;user01&amp;#x2F;apras1&amp;#x2F;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;其他:&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;%s/str1/str2/&lt;/code&gt;（等同于 :g&amp;#x2F;str1&amp;#x2F;s&amp;#x2F;&amp;#x2F;str2&amp;#x2F;） 替换每一行的第一个 str1 为 str2&lt;/li&gt;
&lt;li&gt;&lt;code&gt;:%s/str1/str2/g&lt;/code&gt;（等同于 :g&amp;#x2F;str1&amp;#x2F;s&amp;#x2F;&amp;#x2F;str2&amp;#x2F;g 和 :1,$ s&amp;#x2F;str1&amp;#x2F;str2&amp;#x2F;g ） 替换文中所有 str1 为 str2&lt;br&gt;从替换命令可以看到，g 放在命令末尾，表示对搜索字符串的每次出现进行替换；不加 g，表示只对搜索&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;正则表达式替换&#34;&gt;&lt;a href=&#34;#正则表达式替换&#34; class=&#34;headerlink&#34; title=&#34;正则表达式替换&#34;&gt;&lt;/a&gt;正则表达式替换&lt;/h5&gt;&lt;h6 id=&#34;元字符&#34;&gt;&lt;a href=&#34;#元字符&#34; class=&#34;headerlink&#34; title=&#34;元字符&#34;&gt;&lt;/a&gt;元字符&lt;/h6&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;元字符&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;.&lt;/td&gt;
&lt;td&gt;匹配任意字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[abc]&lt;/td&gt;
&lt;td&gt;匹配方括号中的任意一个字符，可用-表示字符范围。如[a-z0-9]匹配小写字母和数字&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;[^abc]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;匹配除方括号中字符之外的任意字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\d&lt;/td&gt;
&lt;td&gt;匹配阿拉伯数字，等同于[0-9]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\D&lt;/td&gt;
&lt;td&gt;&lt;code&gt;匹配阿拉伯数字之外的任意字符，等同于[^0-9]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\x&lt;/td&gt;
&lt;td&gt;匹配十六进制数字，等同于[0-9A-Fa-f]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\X&lt;/td&gt;
&lt;td&gt;&lt;code&gt;匹配十六进制数字之外的任意字符，等同于[^0-9A-Fa-f]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\l&lt;/td&gt;
&lt;td&gt;匹配[a-z]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\L&lt;/td&gt;
&lt;td&gt;&lt;code&gt;匹配[^a-z]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\u&lt;/td&gt;
&lt;td&gt;匹配[A-Z]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\U&lt;/td&gt;
&lt;td&gt;&lt;code&gt;匹配[^A-Z]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\w&lt;/td&gt;
&lt;td&gt;匹配单词字母，等同于[0-9A-Za-z_]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\W&lt;/td&gt;
&lt;td&gt;&lt;code&gt;匹配单词字母之外的任意字符，等同于[^0-9A-Za-z_]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\t&lt;/td&gt;
&lt;td&gt;匹配字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\s&lt;/td&gt;
&lt;td&gt;匹配空白字符，等同于[\t]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\S&lt;/td&gt;
&lt;td&gt;&lt;code&gt;匹配非空白字符，等同于[^\t]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h6 id=&#34;需转义的普通字符&#34;&gt;&lt;a href=&#34;#需转义的普通字符&#34; class=&#34;headerlink&#34; title=&#34;需转义的普通字符&#34;&gt;&lt;/a&gt;需转义的普通字符&lt;/h6&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;元字符&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;匹配 * 字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;.&lt;/td&gt;
&lt;td&gt;匹配 . 字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;#x2F;&lt;/td&gt;
&lt;td&gt;匹配 &amp;#x2F; 字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\&lt;/td&gt;
&lt;td&gt;匹配 \ 字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[&lt;/td&gt;
&lt;td&gt;匹配 [ 字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;]&lt;/td&gt;
&lt;td&gt;匹配 ] 字符&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h6 id=&#34;表示数量的元字符&#34;&gt;&lt;a href=&#34;#表示数量的元字符&#34; class=&#34;headerlink&#34; title=&#34;表示数量的元字符&#34;&gt;&lt;/a&gt;表示数量的元字符&lt;/h6&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;元字符&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;匹配0-任意个&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;+&lt;/td&gt;
&lt;td&gt;匹配1-任意个&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;?&lt;/td&gt;
&lt;td&gt;匹配0-1个&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;{n,m}&lt;/td&gt;
&lt;td&gt;匹配n-m个&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;{n}&lt;/td&gt;
&lt;td&gt;匹配n个&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;{n,}&lt;/td&gt;
&lt;td&gt;匹配n-任意个&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;{,m}&lt;/td&gt;
&lt;td&gt;匹配0-m个&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h6 id=&#34;表示位置的元字符&#34;&gt;&lt;a href=&#34;#表示位置的元字符&#34; class=&#34;headerlink&#34; title=&#34;表示位置的元字符&#34;&gt;&lt;/a&gt;表示位置的元字符&lt;/h6&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;元字符&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;$&lt;/td&gt;
&lt;td&gt;匹配行尾&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;^&lt;/td&gt;
&lt;td&gt;匹配行首&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;lt;&lt;/td&gt;
&lt;td&gt;匹配单词词首&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;gt;&lt;/td&gt;
&lt;td&gt;匹配单词词尾&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;hr&gt;
&lt;h6 id=&#34;替换变量&#34;&gt;&lt;a href=&#34;#替换变量&#34; class=&#34;headerlink&#34; title=&#34;替换变量&#34;&gt;&lt;/a&gt;替换变量&lt;/h6&gt;&lt;p&gt;在正则式中以“”以及“”以及“”括起来的正则表达式，在后面使用的时候可以用“\1”、“\2”等变量来访问“”以及“”以及“”中的内容。&lt;/p&gt;
&lt;p&gt;例子&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;删除行尾空格：                         :%s/\s+$//g&lt;br&gt;删除行首多余空格：                      :%s/^\s*// 或者 %s/^ *//&lt;br&gt;删除沒有內容的空行：                    :%s/^$// 或者 g/^$/d&lt;br&gt;删除包含有空格组成的空行                 :%s/^\s*$// 或者 g/^\s*$/d&lt;br&gt;删除以空格或TAB开头到结尾的空行：         :%s/^[ |\t]*$// 或者 g/^[ |\t]*$/d&lt;br&gt;&lt;br&gt;把文中的所有字符串“abc……xyz”替换为“xyz……abc”可以有下列写法&lt;br&gt;:%s/abc\(.*\)xyz/xyz\1abc/g&lt;br&gt;:%s/\(abc\)\(.*\)\(xyz\)/\3\2\1/g&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;





&lt;h2 id=&#34;Nano&#34;&gt;&lt;a href=&#34;#Nano&#34; class=&#34;headerlink&#34; title=&#34;Nano&#34;&gt;&lt;/a&gt;Nano&lt;/h2&gt;&lt;p&gt;alt+6 复制&lt;/p&gt;
&lt;p&gt;ctrl+u 粘贴&lt;/p&gt;
&lt;h1 id=&#34;GCC&#34;&gt;&lt;a href=&#34;#GCC&#34; class=&#34;headerlink&#34; title=&#34;GCC&#34;&gt;&lt;/a&gt;GCC&lt;/h1&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;参数&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;-o&lt;/td&gt;
&lt;td&gt;&lt;code&gt;gcc main.c -o main&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;指定输出文件名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-c&lt;/td&gt;
&lt;td&gt;&lt;code&gt;gcc main.c -c&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;只编译输出.o不生成.out可执行文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-g&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;生成调试所需的符号信息&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-O&amp;amp;-O2&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;优化&amp;amp;更优化&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-Wall&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;显示警告&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h1 id=&#34;Makefile&#34;&gt;&lt;a href=&#34;#Makefile&#34; class=&#34;headerlink&#34; title=&#34;Makefile&#34;&gt;&lt;/a&gt;Makefile&lt;/h1&gt;&lt;figure class=&#34;highlight makefile&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs makefile&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 依赖main.o input.o calcu.o生成 main ,如果依赖文件不存在就会根据规则生成相应的 *.o 文件&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-section&#34;&gt;main: main.o input.o calcu.o&lt;/span&gt;&lt;br&gt;	gcc -o main main.o input.o calcu.o&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-section&#34;&gt;main.o: main.c&lt;/span&gt;&lt;br&gt;	gcc -c main.c&lt;br&gt;&lt;span class=&#34;hljs-section&#34;&gt;input.o: input.c&lt;/span&gt;&lt;br&gt;	gcc -c input.c&lt;br&gt;&lt;span class=&#34;hljs-section&#34;&gt;calcu.o: calcu.c&lt;/span&gt;&lt;br&gt;	gcc -c calcu.c&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-section&#34;&gt;clean:&lt;/span&gt;&lt;br&gt;	rm *.o&lt;br&gt;	rm main&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&#34;x3D&#34;&gt;&lt;a href=&#34;#x3D&#34; class=&#34;headerlink&#34; title=&#34;&amp;#x3D;&#34;&gt;&lt;/a&gt;&amp;#x3D;&lt;/h2&gt;&lt;figure class=&#34;highlight makefile&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs makefile&#34;&gt;name = sss&lt;br&gt;cur = &lt;span class=&#34;hljs-variable&#34;&gt;$(name)&lt;/span&gt;&lt;br&gt;name = ppp&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-section&#34;&gt;print:&lt;/span&gt;&lt;br&gt;	@echo cur: &lt;span class=&#34;hljs-variable&#34;&gt;$(cur)&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 这里会输出 ppp&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;&amp;#x3D;&lt;/td&gt;
&lt;td&gt;类似指针,值等于其真实值&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;:&amp;#x3D;&lt;/td&gt;
&lt;td&gt;类似赋值,等于其赋值时的值&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;?&amp;#x3D;&lt;/td&gt;
&lt;td&gt;如果变量没有赋值,就赋后面的值&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;+&amp;#x3D;&lt;/td&gt;
&lt;td&gt;类似字符串后面追加一个字符串&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;%&lt;/td&gt;
&lt;td&gt;代表非空字符串,可用于匹配文件名&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h2 id=&#34;自动化变量&#34;&gt;&lt;a href=&#34;#自动化变量&#34; class=&#34;headerlink&#34; title=&#34;自动化变量&#34;&gt;&lt;/a&gt;自动化变量&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;自动化变量&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;$@&lt;/td&gt;
&lt;td&gt;规则中的目标集合，在模式规则中，如果有多个目标的话，“ $@”表示匹配模式中定义的目标集合。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;$&amp;lt;&lt;/td&gt;
&lt;td&gt;所有依赖文件的集合， 使用空格分开， 如果在依赖文件中有多个重复的文件，“$^”会去除重复的依赖文件，值保留一份。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;$^&lt;/td&gt;
&lt;td&gt;依赖文件集合中的第一个，如果依赖文件是以模式 (即“ %”)定义的，那么 “$&amp;lt;”就是符合模式的一系列文件集。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;$?&lt;/td&gt;
&lt;td&gt;所有比目标新的依赖集合，以空格分开。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;$%&lt;/td&gt;
&lt;td&gt;当目标是函数库的时候表示规则中成员名， 如果目标不是函数库文件，那么其值为空。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;$+&lt;/td&gt;
&lt;td&gt;和“ $^”类似，但是当依赖文件存在重复的话不会去除重复的依赖文件。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;$*&lt;/td&gt;
&lt;td&gt;这个变量表示目标模式中”%”及其之前的部分，如果目标是 test&amp;#x2F;a.test.c，目标模 ，目标模为 a.%.c，那么“ $*”就是test&amp;#x2F;a.test。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;$(XX)&lt;/td&gt;
&lt;td&gt;类似替换成XX的值&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h2 id=&#34;伪目标&#34;&gt;&lt;a href=&#34;#伪目标&#34; class=&#34;headerlink&#34; title=&#34;伪目标&#34;&gt;&lt;/a&gt;伪目标&lt;/h2&gt;&lt;p&gt;例如，目录内存在clean文件运行 make clean 则运行的是clean文件的规则，如果将Makefile文件内的clean定义为伪目标则不管如何都是执行Makefile内的指令。&lt;/p&gt;
&lt;figure class=&#34;highlight makefile&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs makefile&#34;&gt;objects = main.o input.o calcu.o&lt;br&gt;&lt;span class=&#34;hljs-section&#34;&gt;main: &lt;span class=&#34;hljs-variable&#34;&gt;$(objects)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;	gcc -o main &lt;span class=&#34;hljs-variable&#34;&gt;$(objects)&lt;/span&gt; &lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 声明伪目标&lt;/span&gt;&lt;br&gt;.PHONY : clean&lt;br&gt;&lt;br&gt;%.o : %.c&lt;br&gt;	gcc -c &lt;span class=&#34;hljs-variable&#34;&gt;$&amp;lt;&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-section&#34;&gt;clean:&lt;/span&gt;&lt;br&gt;	rm *.o&lt;br&gt;	rm main&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&#34;条件判断&#34;&gt;&lt;a href=&#34;#条件判断&#34; class=&#34;headerlink&#34; title=&#34;条件判断&#34;&gt;&lt;/a&gt;条件判断&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;ifeq 比较参数是否相等&lt;/li&gt;
&lt;li&gt;ifneq&lt;/li&gt;
&lt;li&gt;ifdef 判断变量是否为真&lt;/li&gt;
&lt;li&gt;ifndef&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;函数&#34;&gt;&lt;a href=&#34;#函数&#34; class=&#34;headerlink&#34; title=&#34;函数&#34;&gt;&lt;/a&gt;函数&lt;/h2&gt;&lt;h3 id=&#34;subst-字符串替换&#34;&gt;&lt;a href=&#34;#subst-字符串替换&#34; class=&#34;headerlink&#34; title=&#34;subst 字符串替换&#34;&gt;&lt;/a&gt;subst 字符串替换&lt;/h3&gt;&lt;figure class=&#34;highlight makefile&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs makefile&#34;&gt;$(subst&amp;lt;from&amp;gt;,&amp;lt;to&amp;gt;,&amp;lt;text&amp;gt;)&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 字符串替换&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 将text中的from替换成to,函数返回替换以后的字符串&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;#例&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$(&lt;span class=&#34;hljs-built_in&#34;&gt;subst&lt;/span&gt; ppp,lll,my name is ppp)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# my name is lll&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;patsubst-模式字符串替换&#34;&gt;&lt;a href=&#34;#patsubst-模式字符串替换&#34; class=&#34;headerlink&#34; title=&#34;patsubst 模式字符串替换&#34;&gt;&lt;/a&gt;patsubst 模式字符串替换&lt;/h3&gt;&lt;figure class=&#34;highlight makefile&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs makefile&#34;&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$(&lt;span class=&#34;hljs-built_in&#34;&gt;patsubst&lt;/span&gt; &amp;lt;pattern&amp;gt;,&amp;lt;replacement&amp;gt;,&amp;lt;text&amp;gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 查找text单词是否符合模式pattern,符合就用replacement替换&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 例&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$(&lt;span class=&#34;hljs-built_in&#34;&gt;patsubst&lt;/span&gt; %.c,%.o,a.c b.c c.c)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# “a.o b.o c.o”&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;dir-获取目录&#34;&gt;&lt;a href=&#34;#dir-获取目录&#34; class=&#34;headerlink&#34; title=&#34;dir 获取目录&#34;&gt;&lt;/a&gt;dir 获取目录&lt;/h3&gt;&lt;figure class=&#34;highlight makefile&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs makefile&#34;&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$(&lt;span class=&#34;hljs-built_in&#34;&gt;dir&lt;/span&gt; &amp;lt;names…&amp;gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 此函数用来从文件名序列&amp;lt;names&amp;gt;中提取出目录部分&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 例&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$(&lt;span class=&#34;hljs-built_in&#34;&gt;dir&lt;/span&gt; &amp;lt;/src/a.c&amp;gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# /src&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;notdir-去除文件中目录部分&#34;&gt;&lt;a href=&#34;#notdir-去除文件中目录部分&#34; class=&#34;headerlink&#34; title=&#34;notdir 去除文件中目录部分&#34;&gt;&lt;/a&gt;notdir 去除文件中目录部分&lt;/h3&gt;&lt;figure class=&#34;highlight makefile&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs makefile&#34;&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$(&lt;span class=&#34;hljs-built_in&#34;&gt;notdir&lt;/span&gt; &amp;lt;names…&amp;gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 此函数用与从文件名序列&amp;lt;names&amp;gt;中提取出文件名非目录部分&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 例&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$(&lt;span class=&#34;hljs-built_in&#34;&gt;notdir&lt;/span&gt; &amp;lt;/src/a.c&amp;gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# a.c&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;freach-循环&#34;&gt;&lt;a href=&#34;#freach-循环&#34; class=&#34;headerlink&#34; title=&#34;freach 循环&#34;&gt;&lt;/a&gt;freach 循环&lt;/h3&gt;&lt;figure class=&#34;highlight makefile&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs makefile&#34;&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$(&lt;span class=&#34;hljs-built_in&#34;&gt;foreach&lt;/span&gt; &amp;lt;var&amp;gt;, &amp;lt;list&amp;gt;,&amp;lt;text&amp;gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# foreach函数用来完成循环，用法如下&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 此函数的意思就是把参数&amp;lt;list&amp;gt;中的单词逐一取出来放到参数&amp;lt;var&amp;gt;中，然后再执行&amp;lt;text&amp;gt;所包含的表达式。每次&amp;lt;text&amp;gt;都会返回一个字符串，循环的过程中，&amp;lt;text&amp;gt;中所包含的每个字符串会以空格隔开,最后但整个循环结束时,&amp;lt;text&amp;gt;所返回的每个字符串所组成的整个字符串将会是函数foreach函数的返回值。&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;wildcard-函数&#34;&gt;&lt;a href=&#34;#wildcard-函数&#34; class=&#34;headerlink&#34; title=&#34;wildcard 函数&#34;&gt;&lt;/a&gt;wildcard 函数&lt;/h3&gt;&lt;figure class=&#34;highlight makefile&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs makefile&#34;&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$(&lt;span class=&#34;hljs-built_in&#34;&gt;wildcard&lt;/span&gt; PATTERN…)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;#通配符“ 通配符“ %”只能用在规则中， 只有在规则中它才会展开，如果在变量定义和函数使用时通配符不会自动展开，这个时候就要用到函数wildcard&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 例&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$(&lt;span class=&#34;hljs-built_in&#34;&gt;wildcard&lt;/span&gt; *.c)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;#上面的代码是用来获取当前目录下所有.c文件，类似“%”&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;





&lt;h1 id=&#34;一些包&#34;&gt;&lt;a href=&#34;#一些包&#34; class=&#34;headerlink&#34; title=&#34;一些包&#34;&gt;&lt;/a&gt;一些包&lt;/h1&gt;&lt;h2 id=&#34;iperf-网络流量测试&#34;&gt;&lt;a href=&#34;#iperf-网络流量测试&#34; class=&#34;headerlink&#34; title=&#34;iperf 网络流量测试&#34;&gt;&lt;/a&gt;iperf 网络流量测试&lt;/h2&gt;&lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/bingyu9875/article/details/105700655/&#34;&gt;https://blog.csdn.net/bingyu9875/article/details/105700655/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;官方网站：&lt;/strong&gt;&lt;a href=&#34;https://iperf.fr/&#34;&gt;https://iperf.fr/&lt;/a&gt; &lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;Usage: iperf [-s|-c host] [options]&lt;br&gt;       iperf [-h|--help] [-v|--version]&lt;br&gt;&lt;br&gt;Server or Client:&lt;br&gt;  -p, --port      #         server port to listen on/connect to&lt;br&gt;  -f, --format    [kmgKMG]  format to report: Kbits, Mbits, KBytes, MBytes&lt;br&gt;  -i, --interval  #         seconds between periodic bandwidth reports&lt;br&gt;  -F, --file name           xmit/recv the specified file&lt;br&gt;  -A, --affinity n/n,m      set CPU affinity&lt;br&gt;  -B, --bind      &amp;lt;host&amp;gt;    bind to a specific interface&lt;br&gt;  -V, --verbose             more detailed output&lt;br&gt;  -J, --json                output in JSON format&lt;br&gt;  -d, --debug               emit debugging output&lt;br&gt;  -v, --version             show version information and quit&lt;br&gt;  -h, --help                show this message and quit&lt;br&gt;Server specific:&lt;br&gt;  -s, --server              run in server mode&lt;br&gt;  -D, --daemon              run the server as a daemon&lt;br&gt;  -1, --one-off             handle one client connection then exit&lt;br&gt;Client specific:&lt;br&gt;  -c, --client    &amp;lt;host&amp;gt;    run in client mode, connecting to &amp;lt;host&amp;gt;&lt;br&gt;  -u, --udp                 use UDP rather than TCP&lt;br&gt;  -b, --bandwidth #[KMG][/#] target bandwidth in bits/sec (0 for unlimited)&lt;br&gt;                            (default 1 Mbit/sec for UDP, unlimited for TCP)&lt;br&gt;                            (optional slash and packet count for burst mode)&lt;br&gt;  -t, --time      #         time in seconds to transmit for (default 10 secs)&lt;br&gt;  -n, --bytes     #[KMG]    number of bytes to transmit (instead of -t)&lt;br&gt;  -k, --blockcount #[KMG]   number of blocks (packets) to transmit (instead of -t or -n)&lt;br&gt;  -l, --len       #[KMG]    length of buffer to read or write&lt;br&gt;                            (default 128 KB for TCP, 8 KB for UDP)&lt;br&gt;  -P, --parallel  #         number of parallel client streams to run&lt;br&gt;  -R, --reverse             run in reverse mode (server sends, client receives)&lt;br&gt;  -w, --window    #[KMG]    set window size / socket buffer size&lt;br&gt;  -C, --linux-congestion &amp;lt;algo&amp;gt;  set TCP congestion control algorithm (Linux only)&lt;br&gt;  -M, --set-mss   #         set TCP maximum segment size (MTU - 40 bytes)&lt;br&gt;  -N, --nodelay             set TCP no delay, disabling Nagle&amp;#x27;s Algorithm&lt;br&gt;  -4, --version4            only use IPv4&lt;br&gt;  -6, --version6            only use IPv6&lt;br&gt;  -S, --tos N               set the IP &amp;#x27;type of service&amp;#x27;&lt;br&gt;  -L, --flowlabel N         set the IPv6 flow label (only supported on Linux)&lt;br&gt;  -Z, --zerocopy            use a &amp;#x27;zero copy&amp;#x27; method of sending data&lt;br&gt;  -O, --omit N              omit the first n seconds&lt;br&gt;  -T, --title str           prefix every output line with this string&lt;br&gt;  --get-server-output       get results from server&lt;br&gt;&lt;br&gt;[KMG] indicates options that support a K/M/G suffix for kilo-, mega-, or giga-&lt;br&gt;&lt;br&gt;iperf3 homepage at: http://software.es.net/iperf/&lt;br&gt;Report bugs to:     https://github.com/esnet/iperf&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;​	&lt;/p&gt;
&lt;h2 id=&#34;speedometer-网络监控工具&#34;&gt;&lt;a href=&#34;#speedometer-网络监控工具&#34; class=&#34;headerlink&#34; title=&#34;speedometer 网络监控工具&#34;&gt;&lt;/a&gt;speedometer 网络监控工具&lt;/h2&gt;&lt;h2 id=&#34;s-tui-cpu温度使用监测&#34;&gt;&lt;a href=&#34;#s-tui-cpu温度使用监测&#34; class=&#34;headerlink&#34; title=&#34;s-tui cpu温度使用监测&#34;&gt;&lt;/a&gt;s-tui cpu温度使用监测&lt;/h2&gt;&lt;h2 id=&#34;htop-进程查看器&#34;&gt;&lt;a href=&#34;#htop-进程查看器&#34; class=&#34;headerlink&#34; title=&#34;htop 进程查看器&#34;&gt;&lt;/a&gt;htop 进程查看器&lt;/h2&gt;&lt;h2 id=&#34;sysbench-性能测试工具&#34;&gt;&lt;a href=&#34;#sysbench-性能测试工具&#34; class=&#34;headerlink&#34; title=&#34;sysbench 性能测试工具&#34;&gt;&lt;/a&gt;sysbench 性能测试工具&lt;/h2&gt;&lt;p&gt;Sysbench的测试主要包括以下几个方面：&lt;/p&gt;
&lt;p&gt;1、磁盘io性能&lt;/p&gt;
&lt;p&gt;2、cpu性能&lt;/p&gt;
&lt;p&gt;3、内存分配及传输速度&lt;/p&gt;
&lt;p&gt;4、POSIX线程性能&lt;/p&gt;
&lt;p&gt;5、调度程序性能&lt;/p&gt;
&lt;p&gt;6、数据库性能(OLTP基准测试).&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;4线程 测试cpu 找20000前的所有素数&lt;/span&gt;&lt;br&gt;sysbench --test=cpu --num-threads=4 --cpu-max-prime=20000 run&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;crontab-定期执行程序&#34;&gt;&lt;a href=&#34;#crontab-定期执行程序&#34; class=&#34;headerlink&#34; title=&#34;crontab 定期执行程序&#34;&gt;&lt;/a&gt;crontab 定期执行程序&lt;/h2&gt;&lt;p&gt;&lt;a href=&#34;https://www.runoob.com/linux/linux-comm-crontab.html&#34;&gt;https://www.runoob.com/linux/linux-comm-crontab.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注意：&lt;/strong&gt;新创建的 cron 任务，不会马上执行，至少要过 2 分钟后才可以，当然你可以重启 cron 来马上执行。&lt;/p&gt;
&lt;h3 id=&#34;语法-3&#34;&gt;&lt;a href=&#34;#语法-3&#34; class=&#34;headerlink&#34; title=&#34;语法&#34;&gt;&lt;/a&gt;语法&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;crontab [ -u user ] file&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;或&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;crontab [ -u user ] &amp;#123; -l | -r | -e &amp;#125;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;说明：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;crontab 是用来让使用者在固定时间或固定间隔执行程序之用，换句话说，也就是类似使用者的时程表。&lt;/p&gt;
&lt;p&gt;-u user 是指设定指定 user 的时程表，这个前提是你必须要有其权限(比如说是 root)才能够指定他人的时程表。如果不使用 -u user 的话，就是表示设定自己的时程表。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;参数说明&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;-e : 执行文字编辑器来设定时程表，内定的文字编辑器是 VI，如果你想用别的文字编辑器，则请先设定 VISUAL 环境变数来指定使用那个文字编辑器(比如说 setenv VISUAL joe)&lt;/li&gt;
&lt;li&gt;-r : 删除目前的时程表&lt;/li&gt;
&lt;li&gt;-l : 列出目前的时程表&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;时间格式如下：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;f1 f2 f3 f4 f5 program&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ul&gt;
&lt;li&gt;其中 f1 是表示分钟，f2 表示小时，f3 表示一个月份中的第几日，f4 表示月份，f5 表示一个星期中的第几天。program 表示要执行的程序。&lt;/li&gt;
&lt;li&gt;当 f1 为 * 时表示每分钟都要执行 program，f2 为 * 时表示每小时都要执行程序，其馀类推&lt;/li&gt;
&lt;li&gt;当 f1 为 a-b 时表示从第 a 分钟到第 b 分钟这段时间内要执行，f2 为 a-b 时表示从第 a 到第 b 小时都要执行，其馀类推&lt;/li&gt;
&lt;li&gt;当 f1 为 *&amp;#x2F;n 时表示每 n 分钟个时间间隔执行一次，f2 为 *&amp;#x2F;n 表示每 n 小时个时间间隔执行一次，其馀类推&lt;/li&gt;
&lt;li&gt;当 f1 为 a, b, c,… 时表示第 a, b, c,… 分钟要执行，f2 为 a, b, c,… 时表示第 a, b, c…个小时要执行，其馀类推&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;*    *    *    *    *&lt;br&gt;-    -    -    -    -&lt;br&gt;|    |    |    |    |&lt;br&gt;|    |    |    |    +----- 星期中星期几 (0 - 6) (星期天 为0)&lt;br&gt;|    |    |    +---------- 月份 (1 - 12) &lt;br&gt;|    |    +--------------- 一个月中的第几天 (1 - 31)&lt;br&gt;|    +-------------------- 小时 (0 - 23)&lt;br&gt;+------------------------- 分钟 (0 - 59)&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;实例-2&#34;&gt;&lt;a href=&#34;#实例-2&#34; class=&#34;headerlink&#34; title=&#34;实例&#34;&gt;&lt;/a&gt;实例&lt;/h3&gt;&lt;p&gt;每一分钟执行一次 &amp;#x2F;bin&amp;#x2F;ls：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;* * * * * /bin/ls&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;在 12 月内, 每天的早上 6 点到 12 点，每隔 3 个小时 0 分钟执行一次 &amp;#x2F;usr&amp;#x2F;bin&amp;#x2F;backup：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;0 6-12/3 * 12 * /usr/bin/backup&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;周一到周五每天下午 5:00 寄一封信给 &lt;a href=&#34;mailto:&amp;#x61;&amp;#108;&amp;#101;&amp;#120;&amp;#64;&amp;#100;&amp;#111;&amp;#x6d;&amp;#97;&amp;#105;&amp;#x6e;&amp;#x2e;&amp;#x6e;&amp;#97;&amp;#x6d;&amp;#101;&#34;&gt;&amp;#x61;&amp;#108;&amp;#101;&amp;#120;&amp;#64;&amp;#100;&amp;#111;&amp;#x6d;&amp;#97;&amp;#105;&amp;#x6e;&amp;#x2e;&amp;#x6e;&amp;#97;&amp;#x6d;&amp;#101;&lt;/a&gt;：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;0 17 * * 1-5 mail -s &amp;quot;hi&amp;quot; alex@domain.name &amp;lt; /tmp/maildata&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;每月每天的午夜 0 点 20 分, 2 点 20 分, 4 点 20 分….执行 echo “haha”：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;20 0-23/2 * * * echo &amp;quot;haha&amp;quot;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;下面再看看几个具体的例子：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;0 */2 * * * /sbin/service httpd restart  意思是每两个小时重启一次apache &lt;br&gt;&lt;br&gt;50 7 * * * /sbin/service sshd start  意思是每天7：50开启ssh服务 &lt;br&gt;&lt;br&gt;50 22 * * * /sbin/service sshd stop  意思是每天22：50关闭ssh服务 &lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h1 id=&#34;Note-1&#34;&gt;&lt;a href=&#34;#Note-1&#34; class=&#34;headerlink&#34; title=&#34;Note&#34;&gt;&lt;/a&gt;Note&lt;/h1&gt;&lt;h2 id=&#34;增加开机启动项&#34;&gt;&lt;a href=&#34;#增加开机启动项&#34; class=&#34;headerlink&#34; title=&#34;增加开机启动项&#34;&gt;&lt;/a&gt;增加开机启动项&lt;/h2&gt;&lt;h3 id=&#34;raspberry&#34;&gt;&lt;a href=&#34;#raspberry&#34; class=&#34;headerlink&#34; title=&#34;raspberry&#34;&gt;&lt;/a&gt;raspberry&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;sudo nano /etc/rc.local&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;在打开的rc.local找到&lt;span class=&#34;hljs-built_in&#34;&gt;exit&lt;/span&gt; 0，在&lt;span class=&#34;hljs-built_in&#34;&gt;exit&lt;/span&gt; 0 之前添加即可&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;执行这段代码时是使用root用户权限的，注意当前的用户权限，以免因权限问题导致脚本执行失败。&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;Ubuntu&#34;&gt;&lt;a href=&#34;#Ubuntu&#34; class=&#34;headerlink&#34; title=&#34;Ubuntu&#34;&gt;&lt;/a&gt;Ubuntu&lt;/h3&gt;&lt;h4 id=&#34;service-方式&#34;&gt;&lt;a href=&#34;#service-方式&#34; class=&#34;headerlink&#34; title=&#34;service 方式&#34;&gt;&lt;/a&gt;service 方式&lt;/h4&gt;&lt;p&gt;Ubuntu 20.04的服务管理是基于systemd的，因此设置服务自启动最推荐的方法是创建一个systemd服务文件，配置好要执行的服务。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;创建我们需要开机自启动的脚本，例如&lt;code&gt;start.sh&lt;/code&gt;，其内容如下：&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-meta&#34;&gt;#!/bin/bash&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;cd&lt;/span&gt; /tmp&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;touch&lt;/span&gt; 11111111111.txt&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;在&lt;code&gt;/etc/systemd/user&lt;/code&gt;目录下创建一个systemd服务文件, 命名为&lt;code&gt;xxxxxx.service&lt;/code&gt;, 内容如下：&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;[Unit]&lt;br&gt;After=network.service		&lt;span class=&#34;hljs-comment&#34;&gt;# run after the network is up&lt;/span&gt;&lt;br&gt;&lt;br&gt;[Service]&lt;br&gt;ExecStart=/home/hqc/test.sh &lt;span class=&#34;hljs-comment&#34;&gt;# absolute path&lt;/span&gt;&lt;br&gt;&lt;br&gt;[Install]&lt;br&gt;WantedBy=default.target&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;After表示服务何时启动，After&amp;#x3D;network.service 表示网络连接完成后，启动我们的服务；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ExecStart表示我们的脚本（步骤1中的test.sh)的路径；WantedBy默认填default.target。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;xxxxxx.service 内容释义&lt;/strong&gt;&lt;/p&gt;
 &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;[Unit]:服务的说明&lt;br&gt;Description:描述服务&lt;br&gt;After:描述服务类别&lt;br&gt;&lt;br&gt;[Service]服务运行参数的设置&lt;br&gt;Type=forking            是后台运行的形式&lt;br&gt;ExecStart               为服务的具体运行命令&lt;br&gt;ExecReload              为服务的重启命令&lt;br&gt;ExecStop                为服务的停止命令&lt;br&gt;PrivateTmp=True         表示给服务分配独立的临时空间&lt;br&gt;注意：启动、重启、停止命令全部要求使用绝对路径&lt;br&gt;&lt;br&gt;[Install]               服务安装的相关设置，可设置为多用户&lt;br&gt;WantedBy=multi-user.target&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;给systemd服务文件和我们的脚本增加运行权限&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;chmod&lt;/span&gt; +x /etc/systemd/user/xxxxxx.service&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;chmod&lt;/span&gt; +x start.sh&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;重新加载系统的systemd服务文件，并启用我们自己写的&lt;code&gt;xxxxxx.service&lt;/code&gt;文件。&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;sudo systemctl daemon-reload&lt;br&gt;systemctl --user &lt;span class=&#34;hljs-built_in&#34;&gt;enable&lt;/span&gt; xxxxxx.service &lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# sudo systemctl enable xxxxxx.service &lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;blockquote&gt;
&lt;p&gt;  &lt;em&gt;用systemd启动的服务默认是root权限，放脚本很不安全，如果只需要登录用户的权限，改成user service (systemctl –user)更好，如果有桌面环境，还可以用XDG Autostart&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;  改成 (systemctl –user) 似乎这个用户不登陆这个脚本就没法执行了&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;profile-d&#34;&gt;&lt;a href=&#34;#profile-d&#34; class=&#34;headerlink&#34; title=&#34;profile.d&#34;&gt;&lt;/a&gt;profile.d&lt;/h4&gt;&lt;p&gt;将写好的脚本（.sh文件）放到目录 &amp;#x2F;etc&amp;#x2F;profile.d&amp;#x2F; 下，系统启动后就会自动执行该目录下的所有shell脚本。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  Ubuntu 20.04.4 LTS service &lt;/p&gt;
&lt;p&gt;  放在这个目录里面似乎要在用户登录了之后才会启动服务&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;zerotier&#34;&gt;&lt;a href=&#34;#zerotier&#34; class=&#34;headerlink&#34; title=&#34;zerotier&#34;&gt;&lt;/a&gt;zerotier&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;官方定义的名词&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PLANET 行星服务器，Zerotier 根服务器 &lt;/li&gt;
&lt;li&gt;MOON 卫星服务器，用户自建的私有根服务器，起到代理加速的作用 &lt;/li&gt;
&lt;li&gt;LEAF  叶子节点，网络客户端，就是每台连接到网络节点。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;下载安装&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.zerotier.com/download/&#34;&gt;https://www.zerotier.com/download/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;查看安装zerotier版本&lt;br&gt;&lt;code&gt;sudo zerotier-cli status&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;加入一个netWork&lt;br&gt;&lt;code&gt;sudo zerotier-cli join ################（networkid）&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;查看加入的网络的信息，比如network&lt;br&gt;&lt;code&gt;sudo zerotier-cli listnetworks&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;退出加入的network网段&lt;br&gt;&lt;code&gt;sudo zerotier-cli leave ################（networkid）&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;搭建moon节点&#34;&gt;&lt;a href=&#34;#搭建moon节点&#34; class=&#34;headerlink&#34; title=&#34;搭建moon节点&#34;&gt;&lt;/a&gt;搭建moon节点&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;搭建moon节点的需求&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;需要一台公网服务器&lt;/li&gt;
&lt;li&gt;公网服务器需要加入网络&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;搭建步骤&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;生成moon模板&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;cd /var/lib/zerotier-one&lt;br&gt;zerotier-idtool initmoon identity.public &amp;gt; moon.json&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;修改moon配置&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;vi moon.json&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ul&gt;
&lt;li&gt;修改”stableEndpoints”为 vps 的公网的 IP,例如”stableEndpoints”: [“1.1.1.1&amp;#x2F;9993”]&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;生成签名文件&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;zerotier-idtool genmoon moon.json&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ul&gt;
&lt;li&gt;执行之后会生产一个000000xxxx.moon的文件，将这个文件用Winscp等工具从vps上下载下来。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;将moon节点加入网络, 这一步公网服务器和其他所有的主机都需要操作&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;zerotier-one目录下操作&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;Windows:&lt;/span&gt; &lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;C:\ProgramData\ZeroTier\One&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;Linux:&lt;/span&gt; &lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;/var/lib/zerotier-one&lt;/span&gt;&lt;br&gt;mkdir moons.d&lt;br&gt;mv ./*.moon ./moons.d/&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;重启服务&lt;/span&gt;&lt;br&gt;service zerotier-one restart&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;检查是否成功连上节点&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;zerotier-cli listpeers&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&amp;lt;role&amp;gt;&lt;strong&gt;里面有出现&lt;/strong&gt;MOON&lt;/strong&gt;那就是&lt;strong&gt;成功加入了&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;OpenWrt加moon节点有所不同&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;OpenWrt需要修改一个脚本，因为其var目录时一个内存虚拟的临时目录，重启后原有配置不会保留。通过ssh连接OpenWrt（ssh功能可在系统-&amp;gt;管理权中开启）。&lt;/p&gt;
&lt;p&gt;执行命令：&lt;code&gt;vi /etc/init.d/zerotier&lt;/code&gt;，在“add_join() {”上方插入两行代码：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;mkdir&lt;/span&gt; -p &lt;span class=&#34;hljs-variable&#34;&gt;$CONFIG_PATH&lt;/span&gt;/moons.d&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;cp&lt;/span&gt; /home/moons.d/* &lt;span class=&#34;hljs-variable&#34;&gt;$CONFIG_PATH&lt;/span&gt;/moons.d/&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;img src=&#34;/2020/d4436089/5e3e5278d08a31313.png_e1080.jpg&#34; alt=&#34;修改OpenWrt中ZeroTier的启动脚本&#34;&gt;&lt;/p&gt;
&lt;p&gt;脚本修改完成后，在&amp;#x2F;home目录下新建一个moons.d文件夹，将000000xxxx.moon文件上传到该文件夹，在Web页面上重启ZeroTier即可。&lt;/p&gt;
&lt;h2 id=&#34;添加sudo管理员权限&#34;&gt;&lt;a href=&#34;#添加sudo管理员权限&#34; class=&#34;headerlink&#34; title=&#34;添加sudo管理员权限&#34;&gt;&lt;/a&gt;添加sudo管理员权限&lt;/h2&gt;&lt;p&gt;1.切换到root用户下&lt;br&gt;2.添加sudo文件的写权限,命令是:&lt;/p&gt;
&lt;p&gt;sudo chmod u+w &amp;#x2F;etc&amp;#x2F;sudoers&lt;br&gt;3.编辑sudoers文件&lt;/p&gt;
&lt;p&gt;sudo nano &amp;#x2F;etc&amp;#x2F;sudoers&lt;br&gt;找到这行 root ALL&amp;#x3D;(ALL) ALL,在他下面添加&lt;/p&gt;
&lt;p&gt;xxx ALL&amp;#x3D;(ALL) ALL (这里的xxx是你的用户名)&lt;br&gt;4.撤销sudoers文件写权限,命令:&lt;/p&gt;
&lt;p&gt;sudo chmod u-w &amp;#x2F;etc&amp;#x2F;sudoers&lt;/p&gt;
&lt;h2 id=&#34;允许root账号登录-并修改root密码&#34;&gt;&lt;a href=&#34;#允许root账号登录-并修改root密码&#34; class=&#34;headerlink&#34; title=&#34;允许root账号登录 并修改root密码&#34;&gt;&lt;/a&gt;允许root账号登录 并修改root密码&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;允许root登录&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;vim /etc/ssh/sshd_config&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;将 &lt;code&gt;#PermitRootLogin prohibit password&lt;/code&gt; 修改为 &lt;code&gt;PermitRootLogin yes&lt;/code&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;修改root密码&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;synouser --setpw root password&lt;br&gt;&lt;br&gt;reboot&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&#34;查看端口被占用情况&#34;&gt;&lt;a href=&#34;#查看端口被占用情况&#34; class=&#34;headerlink&#34; title=&#34;查看端口被占用情况&#34;&gt;&lt;/a&gt;查看端口被占用情况&lt;/h2&gt;&lt;figure class=&#34;highlight apache&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs apache&#34;&gt;&lt;span class=&#34;hljs-attribute&#34;&gt;lsof&lt;/span&gt; -i&lt;br&gt;&lt;span class=&#34;hljs-attribute&#34;&gt;lsof&lt;/span&gt; -i:&lt;span class=&#34;hljs-number&#34;&gt;80&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-attribute&#34;&gt;netstat&lt;/span&gt; -tunlp&lt;br&gt;&lt;span class=&#34;hljs-attribute&#34;&gt;netstat&lt;/span&gt; -tunlp|grep &lt;span class=&#34;hljs-number&#34;&gt;80&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&#34;windows远程&#34;&gt;&lt;a href=&#34;#windows远程&#34; class=&#34;headerlink&#34; title=&#34;windows远程&#34;&gt;&lt;/a&gt;windows远程&lt;/h2&gt;&lt;figure class=&#34;highlight routeros&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs routeros&#34;&gt;sudo apt-&lt;span class=&#34;hljs-built_in&#34;&gt;get&lt;/span&gt; install xrdp&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;route-路由&#34;&gt;&lt;a href=&#34;#route-路由&#34; class=&#34;headerlink&#34; title=&#34;route 路由&#34;&gt;&lt;/a&gt;route 路由&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;Note:&lt;/span&gt;&lt;br&gt;直接可达, 用 dev 配置路由, 标识符 U&lt;br&gt;间接可达, 用 gw 配置网关路由, 标识符 UG&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;route 输出结果解析：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Destination：目标网络或目标主机&lt;/li&gt;
&lt;li&gt;Gateway：网关地址或 ‘*’ （如未设置）&lt;/li&gt;
&lt;li&gt;Genmask：目标网络的子网掩码；’255.255.255.255’为主机，’0.0.0.0’为缺省路由&lt;/li&gt;
&lt;li&gt;Flags：路由标志&lt;ul&gt;
&lt;li&gt;U (route is up) ：路由正常&lt;/li&gt;
&lt;li&gt;H (target is a host) ：主机路由&lt;/li&gt;
&lt;li&gt;G (use gateway) ：使用网关的间接路由&lt;/li&gt;
&lt;li&gt;R (reinstate route for dynamic routing) ：为动态选路恢复路由&lt;/li&gt;
&lt;li&gt;D (dynamically installed by daemon or redirect) ：该路由由选路进程或重定向动态创建&lt;/li&gt;
&lt;li&gt;M (modified from routing daemon or rederict) ：该路由已由选路进程或重定向修改&lt;/li&gt;
&lt;li&gt;! (reject route) ：阻塞路由&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Metric：通向目标的距离(通常以跳来计算)&lt;/li&gt;
&lt;li&gt;Ref：使用此路由的活动进程个数(Linux内核并不使用)&lt;/li&gt;
&lt;li&gt;Use：查找此路由的次数。根据-F 和 -C的使用，此数值是路由缓存的损失数或采样数&lt;/li&gt;
&lt;li&gt;Iface：使用此路由发送分组的接口（网卡名字）&lt;/li&gt;
&lt;li&gt;MSS：基于此路由的TCP连接的缺省最大报文段长度&lt;/li&gt;
&lt;li&gt;Window：基于此路由的TCP连接的缺省窗口长度&lt;/li&gt;
&lt;li&gt;irtt：初始往返时间。内核用它来猜测最佳TCP协议参数而无须等待(可能很慢的)应答&lt;/li&gt;
&lt;li&gt;HH (cached only)：为缓存过的路由而访问硬件报头缓存的ARP记录和缓存路由的数量。如果缓存过路由的接口(如lo)无须硬件地址则值为-1&lt;/li&gt;
&lt;li&gt;Arp (cached only)：无论缓存路由所用的硬件地址情况如何都进行更新&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;route命令从&lt;code&gt;/proc/net/route&lt;/code&gt;文件中取数据，设备名不变、目的地址从右到左每两位十六进制显示，标志位有1、3两种，分别是U和UG，掩码和目的地&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;frank@OIKIOU-PQ:~$ &lt;span class=&#34;hljs-built_in&#34;&gt;cat&lt;/span&gt; /proc/net/route&lt;br&gt;Iface   Destination     Gateway         Flags   RefCnt  Use     Metric  Mask            MTU     Window  IRTT                                       &lt;br&gt;eth0    00000000        011015AC        0003    0       0       0       00000000        0       0       0                                          &lt;br&gt;docker0 000011AC        00000000        0001    0       0       0       0000FFFF        0       0       0                                          &lt;br&gt;eth0    001015AC        00000000        0001    0       0       0       00F0FFFF        0       0       0                                          &lt;br&gt;frank@OIKIOU-PQ:~$ route&lt;br&gt;Kernel IP routing table&lt;br&gt;Destination     Gateway         Genmask         Flags Metric Ref    Use Iface&lt;br&gt;default         OIKIOU-PQ.mshom 0.0.0.0         UG    0      0        0 eth0&lt;br&gt;172.17.0.0      0.0.0.0         255.255.0.0     U     0      0        0 docker0&lt;br&gt;172.21.16.0     0.0.0.0         255.255.240.0   U     0      0        0 eth0&lt;br&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;删除默认路由&lt;/span&gt;&lt;br&gt;route del default&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;linux静态路由查看&lt;/span&gt;&lt;br&gt;route -n&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;设置指定网段路由&lt;/span&gt;&lt;br&gt;route add -net 192.168.3.0 netmask 255.255.255.0 gw 192.168.6.66&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;或者&lt;/span&gt;&lt;br&gt;route add -net 192.168.3.0/24 gw 192.168.6.66&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;或者 添加特定接口的路由&lt;/span&gt;&lt;br&gt;route add -net 10.1.1.0/24 dev ztrfyiymyx&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;删除指定网段路由&lt;/span&gt;&lt;br&gt;route del -net 192.168.3.0 netmask 255.255.255.0&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;用电脑代替路由器，必须要启用电脑的IP转发功能，改&amp;#x2F;proc&amp;#x2F;sys&amp;#x2F;net&amp;#x2F;ipv4&amp;#x2F;ip_forward里的内容为1（默认为0），用下面的命令完成&lt;code&gt;echo 1 &amp;gt; /proc/sys/net/ipv4/ip_forward&lt;/code&gt;&lt;br&gt;网络重启后，上面的文件自动改为0&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;永久修改路由：&lt;/strong&gt;&lt;br&gt;直接执行route命令来添加路由，是不会永久保存的，当网卡重启或者机器重启之后，该路由就失效了。要想永久保存，可以保存到配置文件。linux 默认只支持一条默认路由，当重新启动网口时，会把其他默认路由去掉，只剩下一条该网口生成的默认路由。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;/etc/sysconfig/static-routes&lt;/code&gt;文件为路由固化文件，但是linux系统一般不会自动生成，需要手动创建。&lt;/li&gt;
&lt;li&gt;在文件内编辑路由，路由格式是固定的：&lt;ul&gt;
&lt;li&gt;添加默认路由：any net 0.0.0.0 netmask 0.0.0.0 gw 10.60.60.1&lt;/li&gt;
&lt;li&gt;添加网络路由：any net 1.1.1.0 netmask 255.255.255.0 gw 10.60.60.1&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;添加到主机的路由：&lt;br&gt;any host 192.168.101.200 gw 192.168.101.1&lt;br&gt;添加到网络的路由：&lt;br&gt;any net 192.168.101.0/24 gw 192.168.101.1&lt;br&gt;any net 1.1.1.0 netmask 255.255.255.0 gw 10.60.60.1&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&#34;samba&#34;&gt;&lt;a href=&#34;#samba&#34; class=&#34;headerlink&#34; title=&#34;samba&#34;&gt;&lt;/a&gt;samba&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;安装&lt;/span&gt;&lt;br&gt;sudo apt-get install samba&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;配置&lt;/span&gt;&lt;br&gt;sudo nano /etc/samba/smb.conf&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;在末尾加入如下内容&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;分享名称&lt;/span&gt;&lt;br&gt;[Pi]&lt;br&gt;    # 说明信息&lt;br&gt;    comment = PiStorage&lt;br&gt;    # 可以访问的用户&lt;br&gt;    valid users = pi,root&lt;br&gt;    # 共享文件的路径,raspberry pi 会自动将连接到其上的外接存储设备挂载到/media/pi/目录下。&lt;br&gt;    path = /media/pi/&lt;br&gt;    # 可被其他人看到资源名称（非内容）&lt;br&gt;    browseable = yes&lt;br&gt;    # 可写&lt;br&gt;    writable = yes&lt;br&gt;    # 新建文件的权限为 664&lt;br&gt;    create mask = 0664&lt;br&gt;    # 新建目录的权限为 775&lt;br&gt;    directory mask = 0775&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;测试配置文件是否有错误，根据提示做相应修改&lt;/span&gt;&lt;br&gt;testparm&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;添加登陆账户并创建密码，必须是 linux 已存在的用户&lt;/span&gt;&lt;br&gt;sudo smbpasswd -a pi&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;重启 samba 服务&lt;/span&gt;&lt;br&gt;sudo service smbd restart&lt;br&gt;&lt;br&gt;sudo /etc/init.d/samba restart&lt;br&gt;sudo /etc/init.d/smbd restart&lt;br&gt;sudo /etc/init.d/nmbd restart&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;attention&#34;&gt;&lt;a href=&#34;#attention&#34; class=&#34;headerlink&#34; title=&#34;attention&#34;&gt;&lt;/a&gt;attention&lt;/h3&gt;&lt;p&gt;出现过win10无法访问，&lt;/p&gt;
&lt;p&gt;“gpedit.msc” “计算机配置”“管理模板”“网络”“Lanman工作站”“启用不安全的来宾登录”&amp;#x3D;“已启用”&lt;/p&gt;
&lt;h2 id=&#34;固定ip&#34;&gt;&lt;a href=&#34;#固定ip&#34; class=&#34;headerlink&#34; title=&#34;固定ip&#34;&gt;&lt;/a&gt;固定ip&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;ens33 是网卡名&lt;/span&gt;&lt;br&gt;vi /etc/sysconfig/network-scripts/ifcfg-eth0&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;将 BOOTPROTO=dhcp&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;改成&lt;/span&gt;&lt;br&gt;BOOTPROTO=static3&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;增加&lt;/span&gt;&lt;br&gt;IPADDR=192.168.2.2&lt;br&gt;NETMASK=255.255.255.0&lt;br&gt;GATEWAY=192.168.2.1&lt;br&gt;DNS1=223.5.5.5&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Raspberry&lt;/span&gt;&lt;br&gt;sudo nano /etc/dhcpcd.conf&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 找到如下内容 对应修改即可&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Example static IP configuration:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;#interface eth0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;#static ip_address=192.168.0.10/24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;#static ip6_address=fd51:42f8:caae:d92e::ff/64&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;#static routers=192.168.0.1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;#static domain_name_servers=192.168.0.1 8.8.8.8 fd51:42f8:caae:d92e::1&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# eg.&lt;/span&gt;&lt;br&gt;interface wlan0&lt;br&gt;static ip_address=192.168.31.222/24&lt;br&gt;static routers=192.168.31.254&lt;br&gt;static domain_name_servers=223.5.5.5 192.168.31.254&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&#34;后台执行程序&#34;&gt;&lt;a href=&#34;#后台执行程序&#34; class=&#34;headerlink&#34; title=&#34;后台执行程序&#34;&gt;&lt;/a&gt;后台执行程序&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;基本形式&lt;/span&gt;&lt;br&gt;nohup command &amp;amp;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;eg.&lt;/span&gt;&lt;br&gt;nohup ping 1.1.1.1 &amp;amp;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;重定向输出&lt;/span&gt;&lt;br&gt;nohup command &amp;gt; myout.file 2&amp;gt;&amp;amp;1 &amp;amp;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;eg.&lt;/span&gt;&lt;br&gt;nohup ping 1.1.1.1 &amp;gt; \myout.file 2&amp;gt;&amp;amp;1 &amp;amp;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;开启路由转发&#34;&gt;&lt;a href=&#34;#开启路由转发&#34; class=&#34;headerlink&#34; title=&#34;开启路由转发&#34;&gt;&lt;/a&gt;开启路由转发&lt;/h2&gt;&lt;p&gt;临时生效：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;echo &amp;quot;1&amp;quot; &amp;gt; /proc/sys/net/ipv4/ip_forward&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;马上生效&lt;/span&gt;&lt;br&gt;sysctl -p&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;永久生效：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;vim /etc/sysctl.conf&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;修改设置&lt;/span&gt;&lt;br&gt;net.ipv4.ip_forward = 1&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;aria2-安装&#34;&gt;&lt;a href=&#34;#aria2-安装&#34; class=&#34;headerlink&#34; title=&#34;aria2 安装&#34;&gt;&lt;/a&gt;aria2 安装&lt;/h2&gt;&lt;h3 id=&#34;aria2&#34;&gt;&lt;a href=&#34;#aria2&#34; class=&#34;headerlink&#34; title=&#34;aria2&#34;&gt;&lt;/a&gt;aria2&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;首先，安装：&lt;/span&gt;&lt;br&gt;sudo apt-get install aria2&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;创建 Aria2 的配置文件夹：&lt;/span&gt;&lt;br&gt;sudo mkdir /etc/aria2&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;创建 session 和配置文件：&lt;/span&gt;&lt;br&gt;sudo touch /etc/aria2/aria2.session&lt;br&gt;sudo touch /etc/aria2/aria2.conf&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;编辑 /etc/aria2/aria2.conf：&lt;/span&gt;&lt;br&gt;sudo nano /etc/aria2/aria2.conf&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;79&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 文件保存相关 ##&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 文件保存相关 ##&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 文件保存相关 ##&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;文件保存目录 此处文件保存目录自行设定&lt;/span&gt;&lt;br&gt;dir=/mnt/usb/aria2&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;启用磁盘缓存, 0为禁用缓存, 需1.16以上版本, 默认:16M&lt;/span&gt;&lt;br&gt;disk-cache=32M&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;断点续传&lt;/span&gt;&lt;br&gt;continue=true&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;文件预分配方式, 能有效降低磁盘碎片, 默认:prealloc&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;预分配所需时间: none &amp;lt; falloc ? trunc &amp;lt; prealloc&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;falloc和trunc则需要文件系统和内核支持&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;NTFS建议使用falloc, EXT3/4建议trunc, MAC 下需要注释此项&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;file-allocation=falloc&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 下载连接相关 ##&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 下载连接相关 ##&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 下载连接相关 ##&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;最大同时下载任务数, 运行时可修改, 默认:5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;max-concurrent-downloads=5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;同一服务器连接数, 添加时可指定, 默认:1&lt;/span&gt;&lt;br&gt;max-connection-per-server=15&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;整体下载速度限制, 运行时可修改, 默认:0（不限制）&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;max-overall-download-limit=0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;单个任务下载速度限制, 默认:0（不限制）&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;max-download-limit=0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;整体上传速度限制, 运行时可修改, 默认:0（不限制）&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;max-overall-upload-limit=0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;单个任务上传速度限制, 默认:0（不限制）&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;max-upload-limit=0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;禁用IPv6, 默认:&lt;span class=&#34;hljs-literal&#34;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;disable-ipv6=true&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;最小文件分片大小, 添加时可指定, 取值范围1M -1024M, 默认:20M&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;假定size=10M, 文件为20MiB 则使用两个来源下载; 文件为15MiB 则使用一个来源下载&lt;/span&gt;&lt;br&gt;min-split-size=10M&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;单个任务最大线程数, 添加时可指定, 默认:5&lt;/span&gt;&lt;br&gt;split=10&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 进度保存相关 ##&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 进度保存相关 ##&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 进度保存相关 ##&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;从会话文件中读取下载任务&lt;/span&gt;&lt;br&gt;input-file=/etc/aria2/aria2.session&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;在Aria2退出时保存错误的、未完成的下载任务到会话文件&lt;/span&gt;&lt;br&gt;save-session=/etc/aria2/aria2.session&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;定时保存会话, 0为退出时才保存, 需1.16.1以上版本, 默认:0&lt;/span&gt;&lt;br&gt;save-session-interval=60&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# RPC相关设置 ##&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# RPC相关设置 ##&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# RPC相关设置 ##&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;启用RPC, 默认:&lt;span class=&#34;hljs-literal&#34;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;enable-rpc=true&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;允许所有来源, 默认:&lt;span class=&#34;hljs-literal&#34;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;rpc-allow-origin-all=true&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;允许外部访问, 默认:&lt;span class=&#34;hljs-literal&#34;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;rpc-listen-all=true&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;RPC端口, 仅当默认端口被占用时修改&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;rpc-listen-port=6800&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;设置的RPC授权令牌, v1.18.4新增功能, 取代 --rpc-user 和 --rpc-passwd 选项&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;rpc-secret=&amp;lt;TOKEN&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# BT/PT下载相关 ##&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# BT/PT下载相关 ##&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# BT/PT下载相关 ##&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;当下载的是一个种子(以.torrent结尾)时, 自动开始BT任务, 默认:&lt;span class=&#34;hljs-literal&#34;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;follow-torrent=&lt;span class=&#34;hljs-literal&#34;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;客户端伪装, PT需要&lt;/span&gt;&lt;br&gt;peer-id-prefix=-TR2770-&lt;br&gt;user-agent=Transmission/2.77&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;强制保存会话, 即使任务已经完成, 默认:&lt;span class=&#34;hljs-literal&#34;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;较新的版本开启后会在任务完成后依然保留.aria2文件&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;force-save=&lt;span class=&#34;hljs-literal&#34;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;继续之前的BT任务时, 无需再次校验, 默认:&lt;span class=&#34;hljs-literal&#34;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;bt-seed-unverified=true&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;保存磁力链接元数据为种子文件(.torrent文件), 默认:&lt;span class=&#34;hljs-literal&#34;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;bt-save-metadata=true&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;然后执行：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;sudo aria2c --conf-path=/etc/aria2/aria2.conf -D&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;没有任何提示则表示成功。接下来添加开机自启：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;sudo touch /etc/init.d/aria2c&lt;br&gt;sudo nano /etc/init.d/aria2c&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;添加：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-meta&#34;&gt;#!/bin/sh&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;### BEGIN INIT INFO&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Provides:          aria2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Required-Start:    remotefsnetwork&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Required-Stop:     remotefsnetwork&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Default-Start:     2 3 4 5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Default-Stop:      0 1 6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Short-Description: Aria2 Downloader&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;### END INIT INFO&lt;/span&gt;&lt;br&gt; &lt;br&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;&lt;span class=&#34;hljs-variable&#34;&gt;$1&lt;/span&gt;&amp;quot;&lt;/span&gt; &lt;span class=&#34;hljs-keyword&#34;&gt;in&lt;/span&gt;&lt;br&gt;start)&lt;br&gt;    &lt;span class=&#34;hljs-built_in&#34;&gt;echo&lt;/span&gt; -n &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;Starting aria2c&amp;quot;&lt;/span&gt;&lt;br&gt;    sudo aria2c --conf-path=/etc/aria2/aria2.conf -D&lt;br&gt;&lt;br&gt;;;&lt;br&gt;stop)&lt;br&gt;    &lt;span class=&#34;hljs-built_in&#34;&gt;echo&lt;/span&gt; -n &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;Shutting down aria2c &amp;quot;&lt;/span&gt;&lt;br&gt;    killall aria2c&lt;br&gt;;;&lt;br&gt;restart)&lt;br&gt;    &lt;span class=&#34;hljs-comment&#34;&gt;# killall aria2c&lt;/span&gt;&lt;br&gt;    sudo aria2c --conf-path=/etc/aria2/aria2.conf -D&lt;br&gt;&lt;br&gt;;;&lt;br&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;esac&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;exit&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;执行：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;sudo chmod +x /etc/init.d/aria2c&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h3 id=&#34;安装aria2的web管理界面（AriaNg）&#34;&gt;&lt;a href=&#34;#安装aria2的web管理界面（AriaNg）&#34; class=&#34;headerlink&#34; title=&#34;安装aria2的web管理界面（AriaNg）&#34;&gt;&lt;/a&gt;安装aria2的web管理界面（AriaNg）&lt;/h3&gt;&lt;p&gt;这里需要用到一个第三方的工具，这个是通过rpc接口来管理aria2下载的工具。&lt;/p&gt;
&lt;p&gt;安装git和nginx&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;sudo apt install -y git nginx&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;下载aira-ng&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;wget https://github.com/mayswind/AriaNg/releases/download/1.1.4/aria-ng-1.1.4.zip -O aira-ng.zip&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;解压&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;unzip aira-ng.zip -d aira-ng&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;将aira-ng放到nginx的&amp;#x2F;var&amp;#x2F;www&amp;#x2F;html&amp;#x2F;目录下，然后设置开机启动nginx&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;sudo mv aira-ng /var/www/html/&lt;br&gt;sudo systemctl enable nginx&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;用浏览器访问树莓派IP下的aira-ng，即：&lt;a href=&#34;https://links.jianshu.com/go?to=http://ip/aira-ng&#34;&gt;http://ip/aira-ng&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;然后在系统设置点击AriaNg设置 –&amp;gt; 全局 –&amp;gt; 设置语言为中文 –&amp;gt; 点击RPC–&amp;gt;修改为 rpc 密钥：secret&lt;/p&gt;
&lt;h3 id=&#34;aria2-自动更新tracker&#34;&gt;&lt;a href=&#34;#aria2-自动更新tracker&#34; class=&#34;headerlink&#34; title=&#34;aria2 自动更新tracker&#34;&gt;&lt;/a&gt;aria2 自动更新tracker&lt;/h3&gt;&lt;p&gt;&lt;a href=&#34;https://www.moerats.com/archives/374/&#34;&gt;https://www.moerats.com/archives/374/&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;安装SSH服务端&#34;&gt;&lt;a href=&#34;#安装SSH服务端&#34; class=&#34;headerlink&#34; title=&#34;安装SSH服务端&#34;&gt;&lt;/a&gt;安装SSH服务端&lt;/h2&gt;&lt;h3 id=&#34;WSL-Ubuntu&#34;&gt;&lt;a href=&#34;#WSL-Ubuntu&#34; class=&#34;headerlink&#34; title=&#34;WSL Ubuntu&#34;&gt;&lt;/a&gt;WSL Ubuntu&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;设置root的口令（密码），用作后续登陆使用&lt;/span&gt;&lt;br&gt;sudo passwd root&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;安装openssh-server（ubuntu自带已安装，但是我使用有问题，没找到原因）&lt;/span&gt;&lt;br&gt;sudo apt remove openssh-server&lt;br&gt;sudo apt install openssh-client openssh-server&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;备份原始的sshd_config&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;ssh_config是针对客户端的配置文件&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;sshd_config是针对服务端的配置文件&lt;/span&gt;&lt;br&gt;sudo cp /etc/ssh/sshd_config /etc/ssh/sshd_config.bak&lt;br&gt;sudo cp /etc/ssh/ssh_config /etc/ssh/ssh_config.bak&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;使用vim进行编辑，按i进入insert模式&lt;/span&gt;&lt;br&gt;sudo vim /etc/ssh/sshd_config&lt;br&gt;&lt;br&gt;在vim中找到对应项并修改，ESC，输入`wq`保存退出：&lt;br&gt;Port 2222&lt;br&gt;ListenAddress 0.0.0.0        # 如果需要指定监听的IP则去除最左侧的井号，并配置对应IP，默认即监听PC所有IP&lt;br&gt;PermitRootLogin no           # 如果你需要用 root 直接登录系统则此处改为 yes&lt;br&gt;PasswordAuthentication yes    # 将 no 改为 yes 表示使用帐号密码方式登录&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;启动ssh，查看status&lt;/span&gt;&lt;br&gt;sudo service ssh start             #启动SSH服务&lt;br&gt;sudo service ssh status            #检查状态&lt;br&gt;sudo systemctl enable ssh          #开机自动启动ssh命令，WSL下无效&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;SSH连接Linux时自动启动某个脚本&#34;&gt;&lt;a href=&#34;#SSH连接Linux时自动启动某个脚本&#34; class=&#34;headerlink&#34; title=&#34;SSH连接Linux时自动启动某个脚本&#34;&gt;&lt;/a&gt;SSH连接Linux时自动启动某个脚本&lt;/h2&gt;&lt;p&gt;etc目录下有一个profile文件，在文件末尾加上脚本命令，或者脚本目录地址。(切换root用户)&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;sudo vim /etc/profile&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在 &lt;code&gt;/etc/ssh/&lt;/code&gt; 目录下面创建一个 &lt;code&gt;sshrc&lt;/code&gt; 的文件&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-meta&#34;&gt;#!/bin/bash&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&#34;配置-SSH-密钥登录-免密码&#34;&gt;&lt;a href=&#34;#配置-SSH-密钥登录-免密码&#34; class=&#34;headerlink&#34; title=&#34;配置 SSH 密钥登录(免密码)&#34;&gt;&lt;/a&gt;配置 SSH 密钥登录(免密码)&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;  &lt;strong&gt;一、第一次登录远程主机流程&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;  第一次ssh到远程主机时远程主机会发送它的公钥到客户端主机，客户机确认继续连接后会把远程主机的公钥保存到.ssh&amp;#x2F;known_hosts文件，下次再连接此远程主机时会去.ssh&amp;#x2F;known_hosts查看，如果是已经保存的公钥证明是信任主机，即不会告警并直接提示输入用户名密码登录。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果中途SSH提示你对方的密钥指纹发生了变化那这个时候你就要担心了, 可能存在MITM(Man-In-The-Middle-Attack 中间人攻击)&lt;ul&gt;
&lt;li&gt;远程主机的这些操作会导致密钥指纹发生变化&lt;/li&gt;
&lt;li&gt;重新安装了操作系统&lt;/li&gt;
&lt;li&gt;重新安装了openssh或者手动更新了&amp;#x2F;etc&amp;#x2F;ssh下的密钥对&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;   虽然有著名的DH密钥交换算法，但SSH&lt;strong&gt;原理上&lt;/strong&gt;不能抵御中间人攻击。然而实际上，SSH使用&lt;a href=&#34;https://en.wikipedia.org/wiki/Trust_on_first_use&#34;&gt;TOFU&lt;/a&gt;安全模型等同于做到了防中间人攻击。SSH的首次连接会下载服务端的公钥，用户确认后公钥将被保存并信任。下次访问时客户端将会核对服务端发来的公钥和本地保存的是否相同，不同就发出中间人攻击的警告拒绝连接，除非用户手动清除已保存的公钥。所以，&lt;strong&gt;如果首次连接没有中间人，之后的连接就无需担心中间人&lt;/strong&gt;，因为中间人给出的公钥和服务端给出的公钥相同的可能性可以忽略。如果首次连接就有中间人攻击，那么恭喜你中奖了。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;  &lt;strong&gt;二、密码登录流程&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;  远程主机收到客户端请求后会把自己的公钥发送给客户端，客户端通过公钥加密之后将密码发送给远程主机，远程主机用密钥解密，密码如果正确则登录成功。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;三、公钥登录（免密登录）流程&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;  公钥登录原理就是客户端将自己的公钥存储到远程主机的.ssh&amp;#x2F;authorized_keys中，客户端发起登录时，远程主机会发送一段随机字符串给客户端，客户端用自己的私钥加密后重新发回远程主机，远程主机用存储的客户端公钥解密之后对比之前发送给客户端的字符串，相同的话即认为客户机认证，不在需要输入密码直接登录系统。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;client机器生成密钥&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;ssh-keygen&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;或者&lt;/span&gt; &lt;br&gt;ssh-keygen -t rsa&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;注意 RSA 现阶段不再建议使用了, 改成ed25519生成&lt;/span&gt;&lt;br&gt;ssh-keygen -t ed25519 -C &amp;quot;your_email@example.com&amp;quot;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;a href=&#34;https://confluence.atlassian.com/bitbucketserverkb/ssh-rsa-key-rejected-with-message-no-mutual-signature-algorithm-1026057701.html&#34;&gt;RSA 现阶段不再建议使用了&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;client查看&lt;code&gt;~/.ssh/id_rsa.pub&lt;/code&gt;文件内容, 并复制&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;server编辑SSH的配置&lt;code&gt;vim /etc/ssh/sshd_config&lt;/code&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;将&lt;code&gt;PubkeyAuthentication&lt;/code&gt; 配置成&lt;code&gt;yes&lt;/code&gt;, 允许密钥登录&lt;/li&gt;
&lt;li&gt;重启ssh服务 &lt;code&gt;systemctl restart sshd&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;server生成密钥&lt;/p&gt;
&lt;figure class=&#34;highlight ebnf&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs ebnf&#34;&gt;&lt;span class=&#34;hljs-attribute&#34;&gt;ssh-keygen&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;server创建&lt;code&gt;~/.ssh/authorized_keys&lt;/code&gt;文件, 并将client的公钥(&lt;code&gt;~/.ssh/id_rsa.pub&lt;/code&gt;)内容粘贴进去&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;需要注意的是&lt;code&gt;.ssh文件夹的权限应当为700，authorized_keys文件的权限应该为600&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;可以直接使用命令&lt;code&gt;cat .ssh/id_rsa.pub | ssh user_name@xxx.xxx.xxx.xx &amp;#39;cat &amp;gt;&amp;gt; .ssh/authorized_keys&amp;#39;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;client使用指定私钥登录&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;ssh -i /root/.ssh/id_rsa user@ip_or_domain&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;测试登录OK后建议关闭密码登录(不安全), 同时Root用户也建议禁止登录&lt;/p&gt;
&lt;p&gt;&lt;code&gt;PasswordAuthentication no&lt;/code&gt;, &lt;code&gt;PermitRootLogin no&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;SSH-config&#34;&gt;&lt;a href=&#34;#SSH-config&#34; class=&#34;headerlink&#34; title=&#34;SSH config&#34;&gt;&lt;/a&gt;SSH config&lt;/h2&gt;&lt;p&gt;SSH 的配置文件有两个：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;~/.ssh/config            &lt;span class=&#34;hljs-comment&#34;&gt;# 用户配置文件&lt;/span&gt;&lt;br&gt;/etc/ssh/ssh_config      &lt;span class=&#34;hljs-comment&#34;&gt;# 系统配置文件&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight crmsh&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs crmsh&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# comment! &lt;/span&gt;&lt;br&gt;Host pq.github.com&lt;br&gt;  HostName github.com           &lt;span class=&#34;hljs-comment&#34;&gt;# 目标服务器地址&lt;/span&gt;&lt;br&gt;  &lt;span class=&#34;hljs-keyword&#34;&gt;User&lt;/span&gt; &lt;span class=&#34;hljs-title&#34;&gt;git&lt;/span&gt;                      &lt;span class=&#34;hljs-comment&#34;&gt;# 用户名&lt;/span&gt;&lt;br&gt;  Port &lt;span class=&#34;hljs-number&#34;&gt;22&lt;/span&gt;                       &lt;span class=&#34;hljs-comment&#34;&gt;# 端口&lt;/span&gt;&lt;br&gt;  IdentityFile ~/.ssh/id_rsa    &lt;span class=&#34;hljs-comment&#34;&gt;# 密钥-&amp;gt;私钥&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;blockquote&gt;
&lt;h3 id=&#34;配置项说明&#34;&gt;&lt;a href=&#34;#配置项说明&#34; class=&#34;headerlink&#34; title=&#34;配置项说明&#34;&gt;&lt;/a&gt;配置项说明&lt;/h3&gt;&lt;p&gt;  SSH 的配置文件有两个：&lt;/p&gt;
  &lt;figure class=&#34;highlight ruby&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs ruby&#34;&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$ &lt;/span&gt;~&lt;span class=&#34;hljs-regexp&#34;&gt;/.ssh/config&lt;/span&gt;            &lt;span class=&#34;hljs-comment&#34;&gt;# 用户配置文件&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$ &lt;/span&gt;/etc/ssh/ssh_config      &lt;span class=&#34;hljs-comment&#34;&gt;# 系统配置文件&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;  下面来看看常用的配置参数。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;Host&lt;/strong&gt;&lt;br&gt;  用于我们执行 SSH 命令的时候如何匹配到该配置。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;*&lt;/code&gt;，匹配所有主机名。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;*.example.com&lt;/code&gt;，匹配以 .example.com 结尾。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;!*.dialup.example.com,*.example.com&lt;/code&gt;，以 ! 开头是排除的意思。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;192.168.0.?&lt;/code&gt;，匹配 192.168.0.[0-9] 的 IP。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;  &lt;strong&gt;AddKeysToAgent&lt;/strong&gt;&lt;br&gt;  是否自动将 key 加入到 &lt;code&gt;ssh-agent&lt;/code&gt;，值可以为 no(default)&amp;#x2F;confirm&amp;#x2F;ask&amp;#x2F;yes。&lt;/p&gt;
&lt;p&gt;  如果是 yes，key 和密码都将读取文件并以加入到 agent ，就像 &lt;code&gt;ssh-add&lt;/code&gt;。其他分别是询问、确认、不加入的意思。添加到 ssh-agent 意味着将私钥和密码交给它管理，让它来进行身份认证。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;AddressFamily&lt;/strong&gt;&lt;br&gt;  指定连接的时候使用的地址族，值可以为 any(default)&amp;#x2F;inet(IPv4)&amp;#x2F;inet6(IPv6)。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;BindAddress&lt;/strong&gt;&lt;br&gt;  指定连接的时候使用的本地主机地址，只在系统有多个地址的时候有用。在 UsePrivilegedPort 值为 yes 的时候无效。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;ChallengeResponseAuthentication&lt;/strong&gt;&lt;br&gt;  是否响应支持的身份验证 chanllenge，yes(default)&amp;#x2F;no。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;Compression&lt;/strong&gt;&lt;br&gt;  是否压缩，值可以为 no(default)&amp;#x2F;yes。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;CompressionLevel&lt;/strong&gt;&lt;br&gt;  压缩等级，值可以为 1(fast)-9(slow)。6(default)，相当于 gzip。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;ConnectionAttempts&lt;/strong&gt;&lt;br&gt;  退出前尝试连接的次数，值必须为整数，1(default)。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;ConnectTimeout&lt;/strong&gt;&lt;br&gt;  连接 SSH 服务器超时时间，单位 s，默认系统 TCP 超时时间。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;ControlMaster&lt;/strong&gt;&lt;br&gt;  是否开启单一网络共享多个 session，值可以为 no(default)&amp;#x2F;yes&amp;#x2F;ask&amp;#x2F;auto。需要和 ControlPath 配合使用，当值为 yes 时，ssh 会监听该路径下的 control socket，多个 session 会去连接该 socket，它们会尽可能的复用该网络连接而不是重新建立新的。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;ControlPath&lt;/strong&gt;&lt;br&gt;  指定 control socket 的路径，值可以直接指定也可以用一下参数代替：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;%L 本地主机名的第一个组件&lt;/li&gt;
&lt;li&gt;%l 本地主机名（包括域名）&lt;/li&gt;
&lt;li&gt;%h 远程主机名（命令行输入）&lt;/li&gt;
&lt;li&gt;%n 远程原始主机名&lt;/li&gt;
&lt;li&gt;%p 远程主机端口&lt;/li&gt;
&lt;li&gt;%r 远程登录用户名&lt;/li&gt;
&lt;li&gt;%u 本地 ssh 正在使用的用户名&lt;/li&gt;
&lt;li&gt;%i 本地 ssh 正在使用 uid&lt;/li&gt;
&lt;li&gt;%C 值为 %l%h%p%r 的 hash&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;  请最大限度的保持 ControlPath 的唯一。至少包含 %h，%p，%r（或者 %C）。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;ControlPersist&lt;/strong&gt;&lt;br&gt;  结合 ControlMaster 使用，指定连接打开后后台保持的时间。值可以为 no&amp;#x2F;yes&amp;#x2F;整数，单位 s。如果为 no，最初的客户端关闭就关闭。如果 yes&amp;#x2F;0，无限期的，直到杀死或通过其它机制，如：ssh -O exit。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;GatewayPorts&lt;/strong&gt;&lt;br&gt;  指定是否允许远程主机连接到本地转发端口，值可以为 no(default)&amp;#x2F;yes。默认情况，ssh 为本地回环地址绑定了端口转发器。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;HostName&lt;/strong&gt;&lt;br&gt;  真实的主机名，默认值为命令行输入的值（允许 IP）。你也可以使用 %h，它将自动替换，只要替换后的地址是完整的就 ok。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;IdentitiesOnly&lt;/strong&gt;&lt;br&gt;  指定 ssh 只能使用配置文件指定的 identity 和 certificate 文件或通过 ssh 命令行通过身份验证，即使 ssh-agent 或 PKCS11Provider 提供了多个 identities。值可以为 no(default)&amp;#x2F;yes。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;IdentityFile&lt;/strong&gt;&lt;br&gt;  指定读取的认证文件路径，允许 DSA，ECDSA，Ed25519 或 RSA。值可以直接指定也可以用一下参数代替：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;%d，本地用户目录 ~&lt;/li&gt;
&lt;li&gt;%u，本地用户&lt;/li&gt;
&lt;li&gt;%l，本地主机名&lt;/li&gt;
&lt;li&gt;%h，远程主机名&lt;/li&gt;
&lt;li&gt;%r，远程用户名&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;  &lt;strong&gt;LocalCommand&lt;/strong&gt;&lt;br&gt;  指定在连接成功后，本地主机执行的命令（单纯的本地命令）。可使用 %d，%h，%l，%n，%p，%r，%u，%C 替换部分参数。只在 PermitLocalCommand 开启的情况下有效。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;LocalForward&lt;/strong&gt;&lt;br&gt;  指定本地主机的端口通过 ssh 转发到指定远程主机。格式：LocalForward [bind_address:]post host:hostport，支持 IPv6。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;PasswordAuthentication&lt;/strong&gt;&lt;br&gt;  是否使用密码进行身份验证，yes(default)&amp;#x2F;no。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;PermitLocalCommand&lt;/strong&gt;&lt;br&gt;  是否允许指定 LocalCommand，值可以为 no(default)&amp;#x2F;yes。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;Port&lt;/strong&gt;&lt;br&gt;  指定连接远程主机的哪个端口，22(default)。&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;ProxyCommand&lt;/strong&gt;&lt;br&gt;  指定连接的服务器需要执行的命令。%h，%p，%r&lt;/p&gt;
&lt;p&gt;  如：ProxyCommand &amp;#x2F;usr&amp;#x2F;bin&amp;#x2F;nc -X connect -x 192.0.2.0:8080 %h %p&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;User&lt;/strong&gt;&lt;br&gt;  登录用户名&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;查看ssh登录失败记录&#34;&gt;&lt;a href=&#34;#查看ssh登录失败记录&#34; class=&#34;headerlink&#34; title=&#34;查看ssh登录失败记录&#34;&gt;&lt;/a&gt;查看ssh登录失败记录&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;查看并筛选 失败次数大于3次的 ip&lt;/span&gt;&lt;br&gt;sudo lastb |awk &amp;#x27;&amp;#123;print $3&amp;#125;&amp;#x27;|sort |uniq -c|awk &amp;#x27;&amp;#123;if ($1 &amp;gt; 3) print $2&amp;#125;&amp;#x27;&lt;br&gt;sudo lastb |awk &amp;#x27;&amp;#123;print $3&amp;#125;&amp;#x27;|sort |uniq -c|sort -bn|awk &amp;#x27;&amp;#123;if ($1 &amp;gt; 3) print&amp;#125;&amp;#x27;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;写一个脚本 统计一下ip 将这些ip禁止&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-------------------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;!/bin/bash&lt;/span&gt;&lt;br&gt;list=$( sudo lastb |awk &amp;#x27;&amp;#123;print $3&amp;#125;&amp;#x27;|sort |uniq -c|awk &amp;#x27;&amp;#123;if ($1 &amp;gt; 3) print $2&amp;#125;&amp;#x27; )&lt;br&gt;for ip in $&amp;#123;list&amp;#125;&lt;br&gt;do&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;	# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;hljs-variable&#34;&gt;$&amp;#123;ip&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;	# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;下面这个是加入黑名单&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;	# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;echo&lt;/span&gt; ALL: &lt;span class=&#34;hljs-variable&#34;&gt;$&amp;#123;ip&amp;#125;&lt;/span&gt; &amp;gt;&amp;gt; /etc/hosts.deny &lt;span class=&#34;hljs-comment&#34;&gt;#加入黑名单&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;	# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;这个是加入防火墙的禁止规则&lt;/span&gt;&lt;br&gt;	ufw deny from $&amp;#123;ip&amp;#125;&lt;br&gt;done&lt;br&gt;echo &amp;gt; /var/log/btmp    #清空失败记录，防止脚本下次执行重复统计IP&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-------------------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;定时执行 ssh密码错误没找到回调函数, 这里要是有回调函数处理起来就很及时了&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;crontab -e&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;内容为每天12:12执行一次脚本&lt;/span&gt;&lt;br&gt;12 12 * * * /bin/bash /home/xx/xx.sh&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;





&lt;h2 id=&#34;hosts文件&#34;&gt;&lt;a href=&#34;#hosts文件&#34; class=&#34;headerlink&#34; title=&#34;hosts文件&#34;&gt;&lt;/a&gt;hosts文件&lt;/h2&gt;&lt;figure class=&#34;highlight awk&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs awk&#34;&gt;&lt;span class=&#34;hljs-regexp&#34;&gt;/ets/&lt;/span&gt;hosts&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;服务器测试工具&#34;&gt;&lt;a href=&#34;#服务器测试工具&#34; class=&#34;headerlink&#34; title=&#34;服务器测试工具&#34;&gt;&lt;/a&gt;服务器测试工具&lt;/h2&gt;&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;wget -qO- --no-check-certificate https://raw.githubusercontent.com/oooldking/script/master/superbench.sh | bash&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;或者&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;curl -Lso- -no-check-certificate https://raw.githubusercontent.com/oooldking/script/master/superbench.sh | bash&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;搭建简易文件服务器-wget下载&#34;&gt;&lt;a href=&#34;#搭建简易文件服务器-wget下载&#34; class=&#34;headerlink&#34; title=&#34;搭建简易文件服务器 wget下载&#34;&gt;&lt;/a&gt;搭建简易文件服务器 wget下载&lt;/h2&gt;&lt;p&gt;两台服务器之间传递文件，可以使用http server，参考文章：&lt;a href=&#34;https://www.jianshu.com/p/f61151abb7a5&#34;&gt;python开启http服务传输文件&lt;/a&gt;.&lt;br&gt;在需要提供链接的server (ip: 11.111.111.111) 中运行以下命令：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Python &amp;lt;= 2.3&lt;/span&gt;&lt;br&gt;python -c &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;import SimpleHTTPServer as s; s.test();&amp;quot;&lt;/span&gt; 8000&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Python &amp;gt;= 2.4&lt;/span&gt;&lt;br&gt;python -m SimpleHTTPServer 8000&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Python 3.x&lt;/span&gt;&lt;br&gt;python -m http.server 8000&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;访问：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;wget ip:8080/filename&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;查看支持的shell&#34;&gt;&lt;a href=&#34;#查看支持的shell&#34; class=&#34;headerlink&#34; title=&#34;查看支持的shell&#34;&gt;&lt;/a&gt;查看支持的shell&lt;/h2&gt;&lt;figure class=&#34;highlight awk&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs awk&#34;&gt;cat &lt;span class=&#34;hljs-regexp&#34;&gt;/etc/&lt;/span&gt;shells&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;uninx-资源管理器&#34;&gt;&lt;a href=&#34;#uninx-资源管理器&#34; class=&#34;headerlink&#34; title=&#34;uninx 资源管理器&#34;&gt;&lt;/a&gt;uninx 资源管理器&lt;/h2&gt;&lt;h3 id=&#34;Glances&#34;&gt;&lt;a href=&#34;#Glances&#34; class=&#34;headerlink&#34; title=&#34;Glances&#34;&gt;&lt;/a&gt;Glances&lt;/h3&gt;&lt;p&gt;适合运维、云端开发人员或命令行爱好者&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2020/d4436089/webp.webp&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;安装：&lt;/p&gt;
&lt;figure class=&#34;highlight ruby&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs ruby&#34;&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$ &lt;/span&gt;sudo pip3 install glances&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;启动：&lt;/p&gt;
&lt;figure class=&#34;highlight ruby&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs ruby&#34;&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$ &lt;/span&gt;sudo glances&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;Sysmontask&#34;&gt;&lt;a href=&#34;#Sysmontask&#34; class=&#34;headerlink&#34; title=&#34;Sysmontask&#34;&gt;&lt;/a&gt;Sysmontask&lt;/h3&gt;&lt;p&gt;适合桌面端用户，界面仿照 &lt;code&gt;Win10&lt;/code&gt; 资源管理器，提供更多信息更直观&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2020/d4436089/webp-16552860429952.webp&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;安装：&lt;/p&gt;
&lt;figure class=&#34;highlight ruby&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs ruby&#34;&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$ &lt;/span&gt;sudo pip3 install sysmontask&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;启动:&lt;/p&gt;
&lt;figure class=&#34;highlight ruby&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs ruby&#34;&gt;&lt;span class=&#34;hljs-variable&#34;&gt;$ &lt;/span&gt;sudo sysmontask&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;bpytop&#34;&gt;&lt;a href=&#34;#bpytop&#34; class=&#34;headerlink&#34; title=&#34;bpytop&#34;&gt;&lt;/a&gt;bpytop&lt;/h3&gt;&lt;p&gt;github: &lt;a href=&#34;https://github.com/aristocratos/bpytop&#34;&gt;https://github.com/aristocratos/bpytop&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2020/d4436089/main-16552870928465.png&#34; alt=&#34;main&#34;&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 安装&lt;/span&gt;&lt;br&gt;git &lt;span class=&#34;hljs-built_in&#34;&gt;clone&lt;/span&gt; https://github.com/aristocratos/bpytop.git&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;cd&lt;/span&gt; bpytop&lt;br&gt;sudo make install&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;清理RAM-Cache&#34;&gt;&lt;a href=&#34;#清理RAM-Cache&#34; class=&#34;headerlink&#34; title=&#34;清理RAM Cache&#34;&gt;&lt;/a&gt;清理RAM Cache&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Sync&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  操作系统在运行过程中,会把访问到的文件放到buffer中。为了避免断电,等故障造成数据丢失,我们需要把buffer中的缓存数据写入到磁盘&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;手动释放内存的命令&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;echo&lt;/span&gt; 3 &amp;gt; /proc/sys/vm/drop_caches&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;blockquote&gt;
&lt;p&gt;  drop_caches的值可以是0-3之间的数字，代表不同的含义：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;0：不释放（系统默认值）&lt;/li&gt;
&lt;li&gt;1：释放页缓存&lt;/li&gt;
&lt;li&gt;2：释放dentries和inodes&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;设置代理&#34;&gt;&lt;a href=&#34;#设置代理&#34; class=&#34;headerlink&#34; title=&#34;设置代理&#34;&gt;&lt;/a&gt;设置代理&lt;/h2&gt;&lt;p&gt;编辑文件&amp;#x2F;etc&amp;#x2F;profile，增加如下两行, 临时使用直接export即可&lt;/p&gt;
&lt;figure class=&#34;highlight routeros&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs routeros&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;hljs-attribute&#34;&gt;http_proxy&lt;/span&gt;=http://proxy.com:8080/&lt;br&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;hljs-attribute&#34;&gt;https_proxy&lt;/span&gt;=http://proxy.com:8080/&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;然后更新一下环境文件：&lt;/p&gt;
&lt;figure class=&#34;highlight gradle&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs gradle&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;source&lt;/span&gt; &lt;span class=&#34;hljs-regexp&#34;&gt;/etc/&lt;/span&gt;profile&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;环境变量&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;描述&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;值示例&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;http_proxy&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;为http变量设置代理；默认不填开头以http协议传输&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;10.0.0.51:8080 user:&lt;a href=&#34;mailto:&amp;#x70;&amp;#x61;&amp;#x73;&amp;#x73;&amp;#64;&amp;#49;&amp;#x30;&amp;#x2e;&amp;#x30;&amp;#x2e;&amp;#48;&amp;#x2e;&amp;#x31;&amp;#48;&#34;&gt;&amp;#x70;&amp;#x61;&amp;#x73;&amp;#x73;&amp;#64;&amp;#49;&amp;#x30;&amp;#x2e;&amp;#x30;&amp;#x2e;&amp;#48;&amp;#x2e;&amp;#x31;&amp;#48;&lt;/a&gt;:8080 socks4:&amp;#x2F;&amp;#x2F;10.0.0.51:1080 socks5:&amp;#x2F;&amp;#x2F;192.168.1.1:1080&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;https_proxy&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;为https变量设置代理；&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;同上&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;ftp_proxy&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;为ftp变量设置代理；&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;同上&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;all_proxy&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;全部变量设置代理，设置了这个时候上面的不用设置&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;同上&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;no_proxy&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;无需代理的主机或域名； 可以使用通配符； 多个时使用“,”号分隔；&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;em&gt;.aiezu.com,10.&lt;/em&gt;.&lt;em&gt;.&lt;/em&gt;,192.168.&lt;em&gt;.&lt;/em&gt;, *.local,localhost,127.0.0.1&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h3 id=&#34;脚本为WSL设置代理&#34;&gt;&lt;a href=&#34;#脚本为WSL设置代理&#34; class=&#34;headerlink&#34; title=&#34;脚本为WSL设置代理&#34;&gt;&lt;/a&gt;脚本为WSL设置代理&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;WSL 中获取宿主机 IP&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;WSL 每次启动的时候都会有不同的 IP 地址，所以并不能直接用静态的方式来设置代理。WSL2 会把 IP 写在 &lt;code&gt;/etc/resolv.conf&lt;/code&gt;中，因此可以用 &lt;code&gt;cat /etc/resolv.conf | grep nameserver | awk &amp;#39;&amp;#123; print $2 &amp;#125;&amp;#39;&lt;/code&gt; 这条指令获得宿主机 IP 。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;设置代理&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-meta&#34;&gt;#!/bin/sh&lt;/span&gt;&lt;br&gt;hostip=$(&lt;span class=&#34;hljs-built_in&#34;&gt;cat&lt;/span&gt; /etc/resolv.conf | grep nameserver | awk &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;&amp;#123; print $2 &amp;#125;&amp;#x27;&lt;/span&gt;)&lt;br&gt;wslip=$(hostname -I | awk &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;&amp;#123;print $1&amp;#125;&amp;#x27;&lt;/span&gt;)&lt;br&gt;port=&amp;lt;PORT&amp;gt;&lt;br&gt;&lt;br&gt;PROXY_HTTP=&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;http://&lt;span class=&#34;hljs-variable&#34;&gt;$&amp;#123;hostip&amp;#125;&lt;/span&gt;:&lt;span class=&#34;hljs-variable&#34;&gt;$&amp;#123;port&amp;#125;&lt;/span&gt;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-function&#34;&gt;&lt;span class=&#34;hljs-title&#34;&gt;set_proxy&lt;/span&gt;&lt;/span&gt;()&amp;#123;&lt;br&gt;    &lt;span class=&#34;hljs-built_in&#34;&gt;export&lt;/span&gt; http_proxy=&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;&lt;span class=&#34;hljs-variable&#34;&gt;$&amp;#123;PROXY_HTTP&amp;#125;&lt;/span&gt;&amp;quot;&lt;/span&gt;&lt;br&gt;    &lt;span class=&#34;hljs-built_in&#34;&gt;export&lt;/span&gt; HTTP_PROXY=&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;&lt;span class=&#34;hljs-variable&#34;&gt;$&amp;#123;PROXY_HTTP&amp;#125;&lt;/span&gt;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;br&gt;    &lt;span class=&#34;hljs-built_in&#34;&gt;export&lt;/span&gt; https_proxy=&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;&lt;span class=&#34;hljs-variable&#34;&gt;$&amp;#123;PROXY_HTTP&amp;#125;&lt;/span&gt;&amp;quot;&lt;/span&gt;&lt;br&gt;    &lt;span class=&#34;hljs-built_in&#34;&gt;export&lt;/span&gt; HTTPS_proxy=&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;&lt;span class=&#34;hljs-variable&#34;&gt;$&amp;#123;PROXY_HTTP&amp;#125;&lt;/span&gt;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;br&gt;    &lt;span class=&#34;hljs-built_in&#34;&gt;export&lt;/span&gt; ALL_PROXY=&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;&lt;span class=&#34;hljs-variable&#34;&gt;$&amp;#123;PROXY_SOCKS5&amp;#125;&lt;/span&gt;&amp;quot;&lt;/span&gt;&lt;br&gt;    &lt;span class=&#34;hljs-built_in&#34;&gt;export&lt;/span&gt; all_proxy=&lt;span class=&#34;hljs-variable&#34;&gt;$&amp;#123;PROXY_SOCKS5&amp;#125;&lt;/span&gt;&lt;br&gt;&amp;#125;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-function&#34;&gt;&lt;span class=&#34;hljs-title&#34;&gt;unset_proxy&lt;/span&gt;&lt;/span&gt;()&amp;#123;&lt;br&gt;    &lt;span class=&#34;hljs-built_in&#34;&gt;unset&lt;/span&gt; http_proxy&lt;br&gt;    &lt;span class=&#34;hljs-built_in&#34;&gt;unset&lt;/span&gt; HTTP_PROXY&lt;br&gt;    &lt;span class=&#34;hljs-built_in&#34;&gt;unset&lt;/span&gt; https_proxy&lt;br&gt;    &lt;span class=&#34;hljs-built_in&#34;&gt;unset&lt;/span&gt; HTTPS_PROXY&lt;br&gt;    &lt;span class=&#34;hljs-built_in&#34;&gt;unset&lt;/span&gt; ALL_PROXY&lt;br&gt;    &lt;span class=&#34;hljs-built_in&#34;&gt;unset&lt;/span&gt; all_proxy&lt;br&gt;&amp;#125;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-function&#34;&gt;&lt;span class=&#34;hljs-title&#34;&gt;test_setting&lt;/span&gt;&lt;/span&gt;()&amp;#123;&lt;br&gt;    &lt;span class=&#34;hljs-built_in&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;Host ip:&amp;quot;&lt;/span&gt; &lt;span class=&#34;hljs-variable&#34;&gt;$&amp;#123;hostip&amp;#125;&lt;/span&gt;&lt;br&gt;    &lt;span class=&#34;hljs-built_in&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;WSL ip:&amp;quot;&lt;/span&gt; &lt;span class=&#34;hljs-variable&#34;&gt;$&amp;#123;wslip&amp;#125;&lt;/span&gt;&lt;br&gt;    &lt;span class=&#34;hljs-built_in&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;Current proxy:&amp;quot;&lt;/span&gt; &lt;span class=&#34;hljs-variable&#34;&gt;$https_proxy&lt;/span&gt;&lt;br&gt;&amp;#125;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;if&lt;/span&gt; [ &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;&lt;span class=&#34;hljs-variable&#34;&gt;$1&lt;/span&gt;&amp;quot;&lt;/span&gt; = &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;set&amp;quot;&lt;/span&gt; ]&lt;br&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;then&lt;/span&gt;&lt;br&gt;    set_proxy&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;elif&lt;/span&gt; [ &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;&lt;span class=&#34;hljs-variable&#34;&gt;$1&lt;/span&gt;&amp;quot;&lt;/span&gt; = &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;unset&amp;quot;&lt;/span&gt; ]&lt;br&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;then&lt;/span&gt;&lt;br&gt;    unset_proxy&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;elif&lt;/span&gt; [ &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;&lt;span class=&#34;hljs-variable&#34;&gt;$1&lt;/span&gt;&amp;quot;&lt;/span&gt; = &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;test&amp;quot;&lt;/span&gt; ]&lt;br&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;then&lt;/span&gt;&lt;br&gt;    test_setting&lt;br&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;else&lt;/span&gt;&lt;br&gt;    &lt;span class=&#34;hljs-built_in&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;Unsupported arguments.&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;fi&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;!!注意!!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;之后运行 &lt;code&gt;. ./proxy.sh set&lt;/code&gt; 就可以自动设置代理了。&lt;code&gt;unset&lt;/code&gt; 可以取消代理，test 可以查看代理状态，能够用来检查环境变量是否被正确修改。&lt;/p&gt;
&lt;p&gt;运行的时候不要忘记之前的 &lt;code&gt;.&lt;/code&gt;，或者使用 &lt;code&gt;source ./proxy.sh set&lt;/code&gt;，只有这样才能够修改环境变量&lt;/p&gt;
&lt;p&gt;直接运行例如 &lt;code&gt;./proxy.sh set&lt;/code&gt; 或者 &lt;code&gt;sh proxy.sh set&lt;/code&gt;，这样会是运行在一个子 shell 中，对当前 shell 没有效果&lt;/p&gt;
&lt;p&gt;另外可以在 &lt;code&gt;~/.bashrc&lt;/code&gt; 中选择性的加上下面两句话，记得将里面的路径修改成你放这个脚本的路径。&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;alias proxy=&amp;quot;source /path/to/proxy.sh&amp;quot;&lt;br&gt;. /path/to/proxy.sh set&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;第一句话可以为这个脚本设置别名 proxy，这样在任何路径下都可以通过 proxy 命令使用这个脚本了，之后在任何路径下，都可以随时都可以通过输入&lt;code&gt;proxy unset&lt;/code&gt; 来暂时取消代理。&lt;/p&gt;
&lt;p&gt;第二句话就是在每次 shell 启动的时候运行该脚本实现自动设置代理，这样以后不用额外操作就默认设置好代理啦~&lt;/p&gt;
&lt;h2 id=&#34;获取IP归属地&#34;&gt;&lt;a href=&#34;#获取IP归属地&#34; class=&#34;headerlink&#34; title=&#34;获取IP归属地&#34;&gt;&lt;/a&gt;获取IP归属地&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;  &lt;a href=&#34;http://ip-[api](https://so.csdn.net/so/search?q=api&amp;spm=1001.2101.3001.7020).com/json/&#34;&gt;http://ip-[api](https://so.csdn.net/so/search?q=api&amp;amp;spm=1001.2101.3001.7020).com/json/&lt;/a&gt;         # 国际化英文显示&lt;/p&gt;
&lt;p&gt;  &lt;a href=&#34;http://ip-api.com/json/?lang=zh-CN&#34;&gt;http://ip-api.com/json/?lang=zh-CN&lt;/a&gt;　　# 中文显示&lt;/p&gt;
&lt;p&gt;  &lt;a href=&#34;http://ip-api.com/json/8.8.8.8?lang=zh-CN&#34;&gt;http://ip-api.com/json/8.8.8.8?lang=zh-CN&lt;/a&gt;    #查询某个ip的信息&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;使用-curl-测试网站加载速度&#34;&gt;&lt;a href=&#34;#使用-curl-测试网站加载速度&#34; class=&#34;headerlink&#34; title=&#34;使用 curl 测试网站加载速度&#34;&gt;&lt;/a&gt;使用 curl 测试网站加载速度&lt;/h2&gt;&lt;p&gt; &lt;a href=&#34;###curl&#34;&gt;参考Curl章节-w参数&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;rsync-同步工具&#34;&gt;&lt;a href=&#34;#rsync-同步工具&#34; class=&#34;headerlink&#34; title=&#34;rsync 同步工具&#34;&gt;&lt;/a&gt;rsync 同步工具&lt;/h2&gt;&lt;p&gt;&lt;a href=&#34;https://wiki.archlinux.org/title/Rsync#Full_system_backup&#34;&gt;Full system backup&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.ruanyifeng.com/blog/2020/08/rsync.html&#34;&gt;rsync 用法教程_阮一峰&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;备份远程主机 &lt;code&gt;192.168.1.1&lt;/code&gt; 的 &lt;code&gt;/&lt;/code&gt;目录, 到本地&lt;code&gt;./xx_backup/&lt;/code&gt; , 并排除一些文件, 生成日志&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;rsync -a -e &amp;quot;ssh -p 22&amp;quot; --exclude=&amp;#123;&amp;quot;/dev/*&amp;quot;,&amp;quot;/proc/*&amp;quot;,&amp;quot;/sys/*&amp;quot;,&amp;quot;/tmp/*&amp;quot;,&amp;quot;/run/*&amp;quot;,&amp;quot;/mnt/*&amp;quot;,&amp;quot;/media/*&amp;quot;,&amp;quot;/lost+found&amp;quot;&amp;#125; user@192.168.1.1:/ ./xx_backup | tee ./xx_backup.log&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;ssh -p 22&amp;quot;&lt;/span&gt;         22 = port = 端口号&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;user@192.168.1.1  user = user = 用户名&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;192.168.1.1       = ip&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;r-参数&#34;&gt;&lt;a href=&#34;#r-参数&#34; class=&#34;headerlink&#34; title=&#34;-r 参数&#34;&gt;&lt;/a&gt;&lt;code&gt;-r&lt;/code&gt; 参数&lt;/h3&gt;&lt;p&gt;本机使用 rsync 命令时，可以作为&lt;code&gt;cp&lt;/code&gt;和&lt;code&gt;mv&lt;/code&gt;命令的替代方法，将源目录同步到目标目录。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;$ rsync -r &lt;span class=&#34;hljs-built_in&#34;&gt;source&lt;/span&gt; destination&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;p&gt;上面命令中，&lt;code&gt;-r&lt;/code&gt;表示递归，即包含子目录。注意，&lt;code&gt;-r&lt;/code&gt;是必须的，否则 rsync 运行不会成功。&lt;code&gt;source&lt;/code&gt;目录表示源目录，&lt;code&gt;destination&lt;/code&gt;表示目标目录。&lt;/p&gt;
&lt;p&gt;如果有多个文件或目录需要同步，可以写成下面这样。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;$ rsync -r source1 source2 destination&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;p&gt;上面命令中，&lt;code&gt;source1&lt;/code&gt;、&lt;code&gt;source2&lt;/code&gt;都会被同步到&lt;code&gt;destination&lt;/code&gt;目录。&lt;/p&gt;
&lt;h3 id=&#34;a-参数&#34;&gt;&lt;a href=&#34;#a-参数&#34; class=&#34;headerlink&#34; title=&#34;-a 参数&#34;&gt;&lt;/a&gt;&lt;code&gt;-a&lt;/code&gt; 参数&lt;/h3&gt;&lt;p&gt;&lt;code&gt;-a&lt;/code&gt;参数可以替代&lt;code&gt;-r&lt;/code&gt;，除了可以递归同步以外，还可以同步元信息（比如修改时间、权限等）。由于 rsync 默认使用文件大小和修改时间决定文件是否需要更新，所以&lt;code&gt;-a&lt;/code&gt;比&lt;code&gt;-r&lt;/code&gt;更有用。下面的用法才是常见的写法。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;$ rsync -a &lt;span class=&#34;hljs-built_in&#34;&gt;source&lt;/span&gt; destination&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;p&gt;目标目录&lt;code&gt;destination&lt;/code&gt;如果不存在，rsync 会自动创建。执行上面的命令后，源目录&lt;code&gt;source&lt;/code&gt;被完整地复制到了目标目录&lt;code&gt;destination&lt;/code&gt;下面，即形成了&lt;code&gt;destination/source&lt;/code&gt;的目录结构。&lt;/p&gt;
&lt;p&gt;如果只想同步源目录&lt;code&gt;source&lt;/code&gt;里面的内容到目标目录&lt;code&gt;destination&lt;/code&gt;，则需要在源目录后面加上斜杠。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;$ rsync -a &lt;span class=&#34;hljs-built_in&#34;&gt;source&lt;/span&gt;/ destination&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;p&gt;上面命令执行后，&lt;code&gt;source&lt;/code&gt;目录里面的内容，就都被复制到了&lt;code&gt;destination&lt;/code&gt;目录里面，并不会在&lt;code&gt;destination&lt;/code&gt;下面创建一个&lt;code&gt;source&lt;/code&gt;子目录。&lt;/p&gt;
&lt;h3 id=&#34;n-参数&#34;&gt;&lt;a href=&#34;#n-参数&#34; class=&#34;headerlink&#34; title=&#34;-n 参数&#34;&gt;&lt;/a&gt;&lt;code&gt;-n&lt;/code&gt; 参数&lt;/h3&gt;&lt;p&gt;对比两个目录下文件，想知道目标目录下哪些文件被修改或增加删除了，rsync提供了一个只校验文件但不实际同步目录内容的参数 &lt;code&gt;--dry-run&lt;/code&gt;或&lt;code&gt;-n&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;如果不确定 rsync 执行后会产生什么结果，可以先用&lt;code&gt;-n&lt;/code&gt;或&lt;code&gt;--dry-run&lt;/code&gt;参数模拟执行的结果。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;$ rsync -anv &lt;span class=&#34;hljs-built_in&#34;&gt;source&lt;/span&gt;/ destination&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;p&gt;上面命令中，&lt;code&gt;-n&lt;/code&gt;参数模拟命令执行的结果，并不真的执行命令。&lt;code&gt;-v&lt;/code&gt;参数则是将结果输出到终端，这样就可以看到哪些内容会被同步。&lt;/p&gt;
&lt;h3 id=&#34;delete-参数&#34;&gt;&lt;a href=&#34;#delete-参数&#34; class=&#34;headerlink&#34; title=&#34;--delete 参数&#34;&gt;&lt;/a&gt;&lt;code&gt;--delete&lt;/code&gt; 参数&lt;/h3&gt;&lt;p&gt;默认情况下，rsync 只确保源目录的所有内容（明确排除的文件除外）都复制到目标目录。它不会使两个目录保持相同，并且不会删除文件。如果要使得目标目录成为源目录的镜像副本，则必须使用&lt;code&gt;--delete&lt;/code&gt;参数，这将删除只存在于目标目录、不存在于源目录的文件。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;$ rsync -av --delete &lt;span class=&#34;hljs-built_in&#34;&gt;source&lt;/span&gt;/ destination&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/blockquote&gt;
&lt;p&gt;上面命令中，&lt;code&gt;--delete&lt;/code&gt;参数会使得&lt;code&gt;destination&lt;/code&gt;成为&lt;code&gt;source&lt;/code&gt;的一个镜像。&lt;/p&gt;
&lt;h2 id=&#34;ufw-ubuntu防火墙&#34;&gt;&lt;a href=&#34;#ufw-ubuntu防火墙&#34; class=&#34;headerlink&#34; title=&#34;ufw ubuntu防火墙&#34;&gt;&lt;/a&gt;ufw ubuntu防火墙&lt;/h2&gt;&lt;p&gt;UFW 只是 iptables 的前端，因此这些日志条目实际上来自 iptables。&lt;/p&gt;
&lt;p&gt;第 1 行：&lt;code&gt;Feb  6 16:27:08 jonasgroenbek kernel: [71910.873115]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;日期和时间、您的计算机名称和自引导以来的内核时间。&lt;/p&gt;
&lt;p&gt;第 2 行：&lt;code&gt;[UFW BLOCK] IN=eth0 OUT=&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;每当 iptables 执行日志条目时，都会有一个可选的&lt;code&gt;--log-prefix&lt;/code&gt;，在这种情况下&lt;code&gt;[UFW BLOCK]&lt;/code&gt;。UFW 最烦人的一点是，它对每种类型的日志条目都使用相同的前缀，因此很难关联回 iptables 规则集。&lt;code&gt;IN&lt;/code&gt;是数据包到达的网络接口名称。是空白的&lt;code&gt;OUT&lt;/code&gt;，因为数据包没有被重新传输，如果这是一个路由器应用程序可能就是这种情况。&lt;/p&gt;
&lt;p&gt;第 3 行：&lt;code&gt;MAC=a6:8d:e2:51:62:4c:f0:4b:3a:4f:80:30:08:00&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这些是本地目标 (a6:8d:e2:51:62:4c (eth0)) 和源 (f0:4b:3a:4f:80:30) 网络接口卡的机器地址代码。在您的情况下，源可能是您的 ISP 网关 NIC 的 MAC。每个 6 个字节。末尾额外的 2 个字节（08:00）是帧类型，在这种情况下，它表示“以太网帧携带 IPv4 数据报”。&lt;/p&gt;
&lt;p&gt;第 4 行：&lt;code&gt;SRC=77.72.85.26 DST=157.230.26.180&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这些是数据包来自哪里的IP地址，SRC，它应该去哪里，DST，应该是你的IP地址。&lt;/p&gt;
&lt;p&gt;第 5 行：&lt;code&gt;LEN=40 TOS=0x00 PREC=0x00 TTL=251 ID=62215 PROTO=TCP&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;原始数据包的有效载荷部分的长度；服务类型、存在时间、生存时间（在数据包因跳数过多而死亡之前还剩下多少跳）；鉴别; 协议（在本例中为 TCP）。&lt;/p&gt;
&lt;p&gt;第 6 行：&lt;code&gt;SPT=42772 DPT=3194 WINDOW=1024&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;源端口；探测端口；TCP 窗口大小&lt;/p&gt;
&lt;p&gt;第 7 行：&lt;code&gt;RES=0x00 SYN URGP=0&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;TCP 标志，这里重要的是“SYN”，意思是它试图建立一个新的连接。此日志条目表示尝试已被阻止。&lt;/p&gt;
&lt;h2 id=&#34;linux-gt-和-gt-gt-的区别-lt-号使用&#34;&gt;&lt;a href=&#34;#linux-gt-和-gt-gt-的区别-lt-号使用&#34; class=&#34;headerlink&#34; title=&#34;linux &amp;gt;和&amp;gt;&amp;gt;的区别,&amp;lt;号使用&#34;&gt;&lt;/a&gt;linux &amp;gt;和&amp;gt;&amp;gt;的区别,&amp;lt;号使用&lt;/h2&gt;&lt;p&gt;&lt;code&gt;&amp;gt;&lt;/code&gt;：将一条命令执行结果（标准输出，或者错误输出，本来都要打印到屏幕上面的）重定向其它输出设备（文件，打开文件操作符，或打印机等等）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt;：追加内容（原有内容保留）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;&amp;gt;&lt;/code&gt;：覆盖内容&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;&lt;/code&gt;：命令默认从键盘获得的输入，改成从文件，或者其它打开文件以及设备输入&lt;/p&gt;
&lt;h2 id=&#34;访问samba&#34;&gt;&lt;a href=&#34;#访问samba&#34; class=&#34;headerlink&#34; title=&#34;访问samba&#34;&gt;&lt;/a&gt;访问samba&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;  Linux用户可以从命令行访问samba共享，使用文件管理器或挂载samba共享。&lt;/p&gt;
&lt;p&gt;  &lt;code&gt;smbclient&lt;/code&gt;是一个允许您从命令行访问Samba共享资源的工具。大绝大部分的Linux发行版中，&lt;code&gt;smbclient&lt;/code&gt;软件包并不是预先安装的，所以需要在您的发行版软件包管理器中安装它。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;sudo apt install smbclient&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;访问Samba共享资源&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;smbclient //samba_hostname_or_server_ip/share_name -U username&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;看到这个提示符就表示成功登录了&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;Try &amp;quot;help&amp;quot; to get a list of possible commands.&lt;br&gt;smb: \&amp;gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;还有一种用的比较多的方法就是直接将&lt;strong&gt;Samba文件夹挂载到系统文件夹&lt;/strong&gt;下.&lt;/p&gt;
&lt;h3 id=&#34;挂载&#34;&gt;&lt;a href=&#34;#挂载&#34; class=&#34;headerlink&#34; title=&#34;挂载&#34;&gt;&lt;/a&gt;挂载&lt;/h3&gt;&lt;p&gt;我们需要先安装包&lt;code&gt;cifs-utils&lt;/code&gt;。&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;sudo apt install cifs-utils&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;创建挂载点：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;sudo &lt;span class=&#34;hljs-built_in&#34;&gt;mkdir&lt;/span&gt; /mnt/smbmount&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;挂载远程共享目录到本地目录&amp;#x2F;mnt&amp;#x2F;smbmount&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;sudo mount -t cifs -o username=my_username //samba_hostname_or_server_ip/sharePath /mnt/smbmount&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;把远程服务器192.168.20.245上的共享目录&lt;code&gt;share&lt;/code&gt;，用户名为&lt;code&gt;frank&lt;/code&gt;，挂载到本地目录&lt;code&gt;/mnt/smbmount&lt;/code&gt;上：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;sudo mount -t cifs -o username=frank //192.168.20.245/share /mnt/smbmount&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;系统将提示需要输入密码验证：&lt;/p&gt;
&lt;figure class=&#34;highlight angelscript&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs angelscript&#34;&gt;Password &lt;span class=&#34;hljs-keyword&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;hljs-symbol&#34;&gt;frank@&lt;/span&gt;&lt;span class=&#34;hljs-comment&#34;&gt;//192.168.20.245/share:  ********&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;查看挂载情况 可以看到已经成功挂载了&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;df -h&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;blockquote&gt;
&lt;p&gt;  Note:如果提示文件系统错误, 或者远程文件只读错误可以看看是不是没安装&lt;code&gt;cifs-utils&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;开机挂载&#34;&gt;&lt;a href=&#34;#开机挂载&#34; class=&#34;headerlink&#34; title=&#34;开机挂载&#34;&gt;&lt;/a&gt;开机挂载&lt;/h3&gt;&lt;p&gt;先卸载刚刚挂载的目录：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;umount /mnt/smbmount&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;我们要实现开机自动挂载，需要修改配置文件&lt;code&gt;/etc/fstab&lt;/code&gt;，假设服务器IP地址为192.168.20.245，共享目录名为share，本地目录为&lt;code&gt;/mnt/smbmount&lt;/code&gt;，用户名为&lt;code&gt;frank&lt;/code&gt;，密码为123，在配置文件的最后一行添加以下内容：&lt;/p&gt;
&lt;figure class=&#34;highlight awk&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs awk&#34;&gt;&lt;span class=&#34;hljs-regexp&#34;&gt;//&lt;/span&gt;&lt;span class=&#34;hljs-number&#34;&gt;192.168&lt;/span&gt;.&lt;span class=&#34;hljs-number&#34;&gt;20.245&lt;/span&gt;&lt;span class=&#34;hljs-regexp&#34;&gt;/share /m&lt;/span&gt;nt/smbmount  cifs  username=frank,password=&lt;span class=&#34;hljs-number&#34;&gt;123&lt;/span&gt;,soft,rw  &lt;span class=&#34;hljs-number&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;hljs-number&#34;&gt;0&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;测试挂载：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;mount -a&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;验证：看看挂载情况：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;df&lt;/span&gt; -h&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;接下来查看文件：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;ll /mnt/smbmount&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;查看文件占用&#34;&gt;&lt;a href=&#34;#查看文件占用&#34; class=&#34;headerlink&#34; title=&#34;查看文件占用&#34;&gt;&lt;/a&gt;查看文件占用&lt;/h2&gt;&lt;p&gt;ADD ME&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;sudo apt install ncdu&lt;br&gt;&lt;br&gt;ncdu&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;排除/mnt&lt;/span&gt;&lt;br&gt;ncdu --exclude /mnt &lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;du -h -d 1&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&#34;修改语言&#34;&gt;&lt;a href=&#34;#修改语言&#34; class=&#34;headerlink&#34; title=&#34;修改语言&#34;&gt;&lt;/a&gt;修改语言&lt;/h2&gt;&lt;h3 id=&#34;CentOS-更改系统语言&#34;&gt;&lt;a href=&#34;#CentOS-更改系统语言&#34; class=&#34;headerlink&#34; title=&#34;CentOS 更改系统语言&#34;&gt;&lt;/a&gt;CentOS 更改系统语言&lt;/h3&gt;&lt;p&gt;使用 &lt;code&gt;localectl list-locales&lt;/code&gt; 查看已有语言环境。例如切换简中只需运行下面命令，重启系统生效。&lt;/p&gt;
&lt;figure class=&#34;highlight dsconfig&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs dsconfig&#34;&gt;&lt;span class=&#34;hljs-string&#34;&gt;localectl&lt;/span&gt; &lt;span class=&#34;hljs-built_in&#34;&gt;set-locale&lt;/span&gt; &lt;span class=&#34;hljs-string&#34;&gt;LANG&lt;/span&gt;=&lt;span class=&#34;hljs-string&#34;&gt;zh_CN&lt;/span&gt;.&lt;span class=&#34;hljs-string&#34;&gt;UTF-8&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;也可以手动修改语言配置文件 &lt;code&gt;/etc/locale.conf&lt;/code&gt; 设置，效果是一样的。&lt;/p&gt;
&lt;p&gt;某些场景可能只要临时切换语言，仅对当前登录会话生效，这时可用 &lt;code&gt;LANG=zh_CN.UTF-8&lt;/code&gt; 命令设置。&lt;/p&gt;
&lt;h3 id=&#34;Ubuntu-更改系统语言&#34;&gt;&lt;a href=&#34;#Ubuntu-更改系统语言&#34; class=&#34;headerlink&#34; title=&#34;Ubuntu 更改系统语言&#34;&gt;&lt;/a&gt;Ubuntu 更改系统语言&lt;/h3&gt;&lt;p&gt;先用 &lt;code&gt;locale -a&lt;/code&gt; 查看系统语言环境。按下面命令格式更改语言，注销重新登录生效。&lt;/p&gt;
&lt;figure class=&#34;highlight routeros&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs routeros&#34;&gt;update-locale &lt;span class=&#34;hljs-attribute&#34;&gt;LANG&lt;/span&gt;=zh_CN.UTF-8&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;如果系统没有所需语言，先使用下面命令添加，以添加简中语言为例。&lt;/p&gt;
&lt;figure class=&#34;highlight sas&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs sas&#34;&gt;locale-gen zh_CN.UTF-8 &lt;span class=&#34;hljs-variable&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;hljs-keyword&#34;&gt;update&lt;/span&gt;-locale&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;Debian-更改系统语言&#34;&gt;&lt;a href=&#34;#Debian-更改系统语言&#34; class=&#34;headerlink&#34; title=&#34;Debian 更改系统语言&#34;&gt;&lt;/a&gt;Debian 更改系统语言&lt;/h3&gt;&lt;p&gt;用要添加语言的国家地区代码，相应修改如下命令运行，以简中为例。&lt;/p&gt;
&lt;figure class=&#34;highlight routeros&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs routeros&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;hljs-attribute&#34;&gt;LANG&lt;/span&gt;=zh_CN.UTF-8&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;再执行 &lt;code&gt;dpkg-reconfigure locales&lt;/code&gt; 命令重新配置语言，用空格键选择，之后重启系统生效。&lt;/p&gt;
&lt;h3 id=&#34;Docker-内-ubuntu&#34;&gt;&lt;a href=&#34;#Docker-内-ubuntu&#34; class=&#34;headerlink&#34; title=&#34;Docker 内 ubuntu&#34;&gt;&lt;/a&gt;Docker 内 ubuntu&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;apt-get install language-pack-zh-hans&lt;br&gt;locale-gen zh_CN.UTF-8&lt;br&gt;locale -a&lt;br&gt;echo &amp;quot;export LC_ALL=zh_CN.UTF-8&amp;quot;&amp;gt;&amp;gt; /etc/profile&lt;br&gt;source /etc/profile&lt;br&gt;locale&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&#34;date日期时间和Unix时间戳互转&#34;&gt;&lt;a href=&#34;#date日期时间和Unix时间戳互转&#34; class=&#34;headerlink&#34; title=&#34;date日期时间和Unix时间戳互转&#34;&gt;&lt;/a&gt;date日期时间和Unix时间戳互转&lt;/h2&gt;&lt;h3 id=&#34;将日期转换为Unix时间戳&#34;&gt;&lt;a href=&#34;#将日期转换为Unix时间戳&#34; class=&#34;headerlink&#34; title=&#34;将日期转换为Unix时间戳&#34;&gt;&lt;/a&gt;将日期转换为Unix时间戳&lt;/h3&gt;&lt;p&gt;将当前时间以Unix时间戳表示：&lt;/p&gt;
&lt;figure class=&#34;highlight mel&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs mel&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;date&lt;/span&gt; +%s&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;输出如下：&lt;/p&gt;
&lt;figure class=&#34;highlight dns&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs dns&#34;&gt;&lt;span class=&#34;hljs-number&#34;&gt;1361542433&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;转换指定日期为Unix时间戳：&lt;/p&gt;
&lt;figure class=&#34;highlight apache&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs apache&#34;&gt;&lt;span class=&#34;hljs-attribute&#34;&gt;date&lt;/span&gt; -d &amp;#x27;&lt;span class=&#34;hljs-number&#34;&gt;2013&lt;/span&gt;-&lt;span class=&#34;hljs-number&#34;&gt;2&lt;/span&gt;-&lt;span class=&#34;hljs-number&#34;&gt;22&lt;/span&gt; &lt;span class=&#34;hljs-number&#34;&gt;22&lt;/span&gt;:&lt;span class=&#34;hljs-number&#34;&gt;14&lt;/span&gt;&amp;#x27; +%s&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;输出如下：&lt;/p&gt;
&lt;figure class=&#34;highlight dns&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs dns&#34;&gt;&lt;span class=&#34;hljs-number&#34;&gt;1361542440&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;将Unix时间戳转换为日期时间&#34;&gt;&lt;a href=&#34;#将Unix时间戳转换为日期时间&#34; class=&#34;headerlink&#34; title=&#34;将Unix时间戳转换为日期时间&#34;&gt;&lt;/a&gt;将Unix时间戳转换为日期时间&lt;/h3&gt;&lt;p&gt;不指定日期时间的格式：&lt;/p&gt;
&lt;figure class=&#34;highlight mel&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs mel&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;date&lt;/span&gt; -d @1361542596&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;输出如下：&lt;/p&gt;
&lt;figure class=&#34;highlight apache&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs apache&#34;&gt;&lt;span class=&#34;hljs-attribute&#34;&gt;Fri&lt;/span&gt; Feb &lt;span class=&#34;hljs-number&#34;&gt;22&lt;/span&gt; &lt;span class=&#34;hljs-number&#34;&gt;22&lt;/span&gt;:&lt;span class=&#34;hljs-number&#34;&gt;16&lt;/span&gt;:&lt;span class=&#34;hljs-number&#34;&gt;36&lt;/span&gt; CST &lt;span class=&#34;hljs-number&#34;&gt;2013&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;指定日期格式的转换：&lt;/p&gt;
&lt;figure class=&#34;highlight perl&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs perl&#34;&gt;date -d @1361542596 +&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;%Y-%m-%d %H:%M:%S&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;输出如下：&lt;/p&gt;
&lt;figure class=&#34;highlight apache&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs apache&#34;&gt;&lt;span class=&#34;hljs-attribute&#34;&gt;2013&lt;/span&gt;-&lt;span class=&#34;hljs-number&#34;&gt;02&lt;/span&gt;-&lt;span class=&#34;hljs-number&#34;&gt;22&lt;/span&gt; &lt;span class=&#34;hljs-number&#34;&gt;22&lt;/span&gt;:&lt;span class=&#34;hljs-number&#34;&gt;16&lt;/span&gt;:&lt;span class=&#34;hljs-number&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;





&lt;h1 id=&#34;RaspberryPI&#34;&gt;&lt;a href=&#34;#RaspberryPI&#34; class=&#34;headerlink&#34; title=&#34;RaspberryPI&#34;&gt;&lt;/a&gt;RaspberryPI&lt;/h1&gt;&lt;h2 id=&#34;密码&#34;&gt;&lt;a href=&#34;#密码&#34; class=&#34;headerlink&#34; title=&#34;密码&#34;&gt;&lt;/a&gt;密码&lt;/h2&gt;&lt;h3 id=&#34;树莓派OS-默认&#34;&gt;&lt;a href=&#34;#树莓派OS-默认&#34; class=&#34;headerlink&#34; title=&#34;树莓派OS 默认&#34;&gt;&lt;/a&gt;树莓派OS 默认&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;   pi&lt;br&gt;  raspberry&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;注意！！&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  新版树莓派的镜像将没有默认密码&lt;/p&gt;
&lt;p&gt;  &lt;a href=&#34;https://www.raspberrypi.com/news/raspberry-pi-bullseye-update-april-2022/&#34;&gt;参考&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;  我们只需要将存储卡插入到PC在&lt;code&gt;boot&lt;/code&gt;盘下新建文件&lt;code&gt;userconf&lt;/code&gt;或者&lt;code&gt;userconf.txt&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;  文件内容是&lt;code&gt;username:encrypted-password&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;  &lt;code&gt;encrypted-password&lt;/code&gt;是通过这个命令运算来的&lt;/p&gt;
  &lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;echo &amp;#x27;mypassword&amp;#x27; | openssl passwd -6 -stdin&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;  用户名是&lt;code&gt;pi&lt;/code&gt;密码是&lt;code&gt;raspberry&lt;/code&gt; 那么文件内容形如下面这样&lt;/p&gt;
  &lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;pi:$6$LXbLeu63.T9FIeWq$rdm2RMzZQLjs1nDI7wiPEx8UKrVWpcEuhSvjFTR4smGXqO9bMow5Imkdgzk.PKdxf.sjxy.dKYDIXneJ0INst/&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;/blockquote&gt;
&lt;h2 id=&#34;初始化&#34;&gt;&lt;a href=&#34;#初始化&#34; class=&#34;headerlink&#34; title=&#34;初始化&#34;&gt;&lt;/a&gt;初始化&lt;/h2&gt;&lt;h3 id=&#34;WiFi-网络配置&#34;&gt;&lt;a href=&#34;#WiFi-网络配置&#34; class=&#34;headerlink&#34; title=&#34;WiFi 网络配置&#34;&gt;&lt;/a&gt;WiFi 网络配置&lt;/h3&gt;&lt;p&gt;用户可以在未启动树莓派的状态下单独修改 &amp;#x2F;boot&amp;#x2F;wpa_supplicant.conf 文件配置 WiFi 的 SSID 和密码，这样树莓派启动后会自行读取 wpa_supplicant.conf 配置文件连接 WiFi 设备。&lt;/p&gt;
&lt;p&gt;操作方法简单：将刷好 Raspbian 系统的 SD 卡用电脑读取。在 boot 分区，也就是树莓派的 &amp;#x2F;boot 目录下新建 wpa_supplicant.conf 文件，按照下面的参考格式填入内容并保存 &lt;code&gt;wpa_supplicant.conf&lt;/code&gt; 文件。&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;country=CN&lt;br&gt;ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev&lt;br&gt;update_config=1&lt;br&gt; &lt;br&gt;network=&amp;#123;&lt;br&gt;ssid=&amp;quot;WiFi-A&amp;quot;			#ssid:网络的ssid&lt;br&gt;psk=&amp;quot;12345678&amp;quot;			#psk:密码&lt;br&gt;key_mgmt=WPA-PSK&lt;br&gt;priority=1				#priority:连接优先级，数字越大优先级越高（不可以是负数）&lt;br&gt;&amp;#125;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;隐藏WiFi&lt;/span&gt;&lt;br&gt;network=&amp;#123;&lt;br&gt;ssid=&amp;quot;WiFi-B&amp;quot;&lt;br&gt;psk=&amp;quot;12345678&amp;quot;&lt;br&gt;key_mgmt=WPA-PSK&lt;br&gt;priority=2&lt;br&gt;scan_ssid=1				#scan_ssid:连接隐藏WiFi时需要指定该值为1&lt;br&gt;&amp;#125;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;WiFi 没有密码&lt;/span&gt;&lt;br&gt;network=&amp;#123;&lt;br&gt;ssid=&amp;quot;你的无线网络名称（ssid）&amp;quot;&lt;br&gt;key_mgmt=NONE&lt;br&gt;&amp;#125;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;如果你的 WiFi 使用WEP加密&lt;/span&gt;&lt;br&gt;network=&amp;#123;&lt;br&gt;ssid=&amp;quot;你的无线网络名称（ssid）&amp;quot;&lt;br&gt;key_mgmt=NONE&lt;br&gt;wep_key0=&amp;quot;你的wifi密码&amp;quot;&lt;br&gt;&amp;#125;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;开启-SSH-服务&#34;&gt;&lt;a href=&#34;#开启-SSH-服务&#34; class=&#34;headerlink&#34; title=&#34;开启 SSH 服务&#34;&gt;&lt;/a&gt;开启 SSH 服务&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;在boot盘下新建&lt;code&gt;ssh&lt;/code&gt;文件即可开启ssh&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;其他配置&#34;&gt;&lt;a href=&#34;#其他配置&#34; class=&#34;headerlink&#34; title=&#34;其他配置&#34;&gt;&lt;/a&gt;其他配置&lt;/h3&gt;&lt;figure class=&#34;highlight mipsasm&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs mipsasm&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 树莓派相关配置&lt;/span&gt;&lt;br&gt;sudo raspi-&lt;span class=&#34;hljs-built_in&#34;&gt;config&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;





&lt;h2 id=&#34;开关机&#34;&gt;&lt;a href=&#34;#开关机&#34; class=&#34;headerlink&#34; title=&#34;开关机&#34;&gt;&lt;/a&gt;开关机&lt;/h2&gt;&lt;h3 id=&#34;安全关机：&#34;&gt;&lt;a href=&#34;#安全关机：&#34; class=&#34;headerlink&#34; title=&#34;安全关机：&#34;&gt;&lt;/a&gt;安全关机：&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;sudo shutdown -h now&lt;br&gt;sudo halt&lt;br&gt;sudo poweroff&lt;br&gt;sudo init 0&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;安全重启：&#34;&gt;&lt;a href=&#34;#安全重启：&#34; class=&#34;headerlink&#34; title=&#34;安全重启：&#34;&gt;&lt;/a&gt;安全重启：&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;sudo reboot&lt;br&gt;shutdown -r now&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;GPIO&#34;&gt;&lt;a href=&#34;#GPIO&#34; class=&#34;headerlink&#34; title=&#34;GPIO&#34;&gt;&lt;/a&gt;GPIO&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;/2020/d4436089/GPIO1.png&#34; alt=&#34;GPIO1&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2020/d4436089/image-20210801204738591.png&#34; alt=&#34;image-20210801204738591&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;RaspberryPI-Note&#34;&gt;&lt;a href=&#34;#RaspberryPI-Note&#34; class=&#34;headerlink&#34; title=&#34;RaspberryPI Note&#34;&gt;&lt;/a&gt;RaspberryPI Note&lt;/h1&gt;&lt;h2 id=&#34;wiringPi-GPIO库&#34;&gt;&lt;a href=&#34;#wiringPi-GPIO库&#34; class=&#34;headerlink&#34; title=&#34;wiringPi GPIO库&#34;&gt;&lt;/a&gt;wiringPi GPIO库&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;cd /tmp&lt;br&gt;wget https://project-downloads.drogon.net/wiringpi-latest.deb&lt;br&gt;sudo dpkg -i wiringpi-latest.deb&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;查看GPIO编码&lt;/span&gt;&lt;br&gt;gpio readall&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;树莓派4b 需要版本大于2.52&lt;/span&gt;&lt;br&gt;gpio -v&lt;br&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;shell操作&#34;&gt;&lt;a href=&#34;#shell操作&#34; class=&#34;headerlink&#34; title=&#34;shell操作&#34;&gt;&lt;/a&gt;shell操作&lt;/h3&gt;&lt;h4 id=&#34;创建&#34;&gt;&lt;a href=&#34;#创建&#34; class=&#34;headerlink&#34; title=&#34;创建&#34;&gt;&lt;/a&gt;创建&lt;/h4&gt;&lt;p&gt;进入&lt;code&gt;/sys/class/gpio/&lt;/code&gt;目录并查看文件&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;cd /sys/class/gpio/&lt;br&gt;ls&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;img src=&#34;/2020/d4436089/1889022-20200410121643886-1233996502.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;目录&lt;code&gt;export&lt;/code&gt;为创建，&lt;code&gt;unexport&lt;/code&gt;为删除&lt;/p&gt;
&lt;p&gt;将gpio18重定向用户定义设备，生成gpio18目录&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;sudo echo 18 &amp;gt; export&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;img src=&#34;/2020/d4436089/1889022-20200410132825370-786913267.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;进入&lt;code&gt;gpio18&lt;/code&gt;目录并查看文件&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2020/d4436089/1889022-20200410134354086-537662427.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;direction&lt;/code&gt;设置引脚方向，输入还是输出&lt;/p&gt;
&lt;p&gt;&lt;code&gt;value&lt;/code&gt;设置引脚状态，高电平还是低电平&lt;/p&gt;
&lt;h4 id=&#34;输入状态&#34;&gt;&lt;a href=&#34;#输入状态&#34; class=&#34;headerlink&#34; title=&#34;输入状态&#34;&gt;&lt;/a&gt;输入状态&lt;/h4&gt;&lt;p&gt;设置引脚状态为输入状态&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;sudo echo in &amp;gt; direction&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;img src=&#34;/2020/d4436089/1889022-20200410134655161-2081521744.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;查看引脚高低电平&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;cat value &lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&#34;输出状态&#34;&gt;&lt;a href=&#34;#输出状态&#34; class=&#34;headerlink&#34; title=&#34;输出状态&#34;&gt;&lt;/a&gt;输出状态&lt;/h4&gt;&lt;p&gt;设置引脚状态为输出状态&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;sudo echo out &amp;gt; direction&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;img src=&#34;/2020/d4436089/1889022-20200410134856417-744239525.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;设置输出高电平&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;sudo echo 1 &amp;gt; value&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;设置输出低电平&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;sudo echo 0 &amp;gt; value&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&#34;删除&#34;&gt;&lt;a href=&#34;#删除&#34; class=&#34;headerlink&#34; title=&#34;删除&#34;&gt;&lt;/a&gt;删除&lt;/h4&gt;&lt;p&gt;测试完毕之后返回&lt;code&gt;/sys/class/gpio/&lt;/code&gt;目录，并将gpio注销&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;cd /sys/class/gpio/&lt;br&gt;sudo echo 18 &amp;gt; /sys/class/gpio/unexport&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&#34;增加开机启动项-1&#34;&gt;&lt;a href=&#34;#增加开机启动项-1&#34; class=&#34;headerlink&#34; title=&#34;增加开机启动项&#34;&gt;&lt;/a&gt;增加开机启动项&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;sudo nano /etc/rc.local&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;在打开的rc.local找到&lt;span class=&#34;hljs-built_in&#34;&gt;exit&lt;/span&gt; 0，在&lt;span class=&#34;hljs-built_in&#34;&gt;exit&lt;/span&gt; 0 之前添加即可&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;执行这段代码时是使用root用户权限的，注意当前的用户权限，以免因权限问题导致脚本执行失败。&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;树莓派自动挂载U盘&#34;&gt;&lt;a href=&#34;#树莓派自动挂载U盘&#34; class=&#34;headerlink&#34; title=&#34;树莓派自动挂载U盘&#34;&gt;&lt;/a&gt;树莓派自动挂载U盘&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;打开文件 添加以下 这个带有超时,可以避免拔掉U盘开不了机&lt;/span&gt;&lt;br&gt;sudo nano /etc/fstab&lt;br&gt;&lt;span class=&#34;hljs-meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;/dev/sda1 /mnt/usb    auto     defaults,nofail,x-systemd.device-timeout=1,noatime  0   0&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;查看温度&#34;&gt;&lt;a href=&#34;#查看温度&#34; class=&#34;headerlink&#34; title=&#34;查看温度&#34;&gt;&lt;/a&gt;查看温度&lt;/h2&gt;&lt;p&gt;使用watch命令每秒打印一次cpu温度信息&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;watch -n 1 cat /sys/class/thermal/thermal_zone0/temp&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;由于 Raspberry Pi 系列上使用的 SoC 的架构，以及在 Raspberry Pi OS 发行版中使用上游温度监控代码，基于 Linux 的温度测量可能不准确。但是，该&lt;code&gt;vcgencmd&lt;/code&gt;命令在直接与 GPU 通信时提供了当前 SoC 温度的准确和即时读数：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;vcgencmd measure_temp&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;远程桌面-1&#34;&gt;&lt;a href=&#34;#远程桌面-1&#34; class=&#34;headerlink&#34; title=&#34;远程桌面&#34;&gt;&lt;/a&gt;远程桌面&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs shell&#34;&gt;sudo apt-get install xrdp&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;固定IP&#34;&gt;&lt;a href=&#34;#固定IP&#34; class=&#34;headerlink&#34; title=&#34;固定IP&#34;&gt;&lt;/a&gt;固定IP&lt;/h2&gt;&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;sudo nano /etc/dhcpcd.conf&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# 找到如下内容 对应修改即可&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# Example static IP configuration:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;#interface eth0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;#static ip_address=192.168.0.10/24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;#static ip6_address=fd51:42f8:caae:d92e::ff/64&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;#static routers=192.168.0.1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;#static domain_name_servers=192.168.0.1 8.8.8.8 fd51:42f8:caae:d92e::1&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-comment&#34;&gt;# eg.&lt;/span&gt;&lt;br&gt;interface wlan0&lt;br&gt;static ip_address=192.168.31.222/24&lt;br&gt;static routers=192.168.31.254&lt;br&gt;static domain_name_servers=223.5.5.5 192.168.31.254&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&#34;I2C相关&#34;&gt;&lt;a href=&#34;#I2C相关&#34; class=&#34;headerlink&#34; title=&#34;I2C相关&#34;&gt;&lt;/a&gt;I2C相关&lt;/h2&gt;&lt;h3 id=&#34;修改I2C总线速度&#34;&gt;&lt;a href=&#34;#修改I2C总线速度&#34; class=&#34;headerlink&#34; title=&#34;修改I2C总线速度&#34;&gt;&lt;/a&gt;修改I2C总线速度&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;启用I2C接口&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sudo raspi-config&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;命令将启动raspi-config实用程序。选择“Interfacing Options”:&lt;/p&gt;
&lt;p&gt;将光标移动到“P5 I2C”，选中，然后“select”。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;编辑Config.txt文件设置I2C总线速度&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sudo nano /boot/config.txt&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;查找包含“&lt;code&gt;dtparam=i2c_arm=on&lt;/code&gt;”的行，添加“&lt;code&gt;i2c_arm_baudrate=400000&lt;/code&gt;”，其中&lt;code&gt;400000&lt;/code&gt;是新设置的速度(400kbit &amp;#x2F;s)，注意i2c前面的逗号。完整代码如下：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;dtparam=i2c_arm=on,i2c_arm_baudrate=400000&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这样可以启用I2C总线的同时，也完成了新波特率的设置。编辑完成后，使用CTRL-X，然后选择Y，保存文件并退出，&lt;strong&gt;并重新启动&lt;/strong&gt;。&lt;/p&gt;
 ]]></description>
        </item>
    </channel>
</rss>
